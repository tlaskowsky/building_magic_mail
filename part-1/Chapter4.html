<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>

<link href='https://fonts.googleapis.com/css?family=Merriweather:900,900italic,300,300italic&subset=latin-ext' rel='stylesheet' type='text/css' /><link href='https://fonts.googleapis.com/css?family=Lato:900,300&subset=latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --mermaid-theme: default; --mermaid-sequence-numbers: off; --mermaid-flowchart-curve: linear; --mermaid--gantt-left-padding: 75; --sequence-theme: simple; }
.privacy { display: none; }


:root { --bg-color: #ffffff; --text-color: #333333; --select-text-bg-color: #B5D6FC; --select-text-font-color: auto; --monospace: "Lucida Console",Consolas,"Courier",monospace; --title-bar-height: 20px; }
.mac-os-11 { --title-bar-height: 28px; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
h1, h2, h3, h4, h5 { white-space: pre-wrap; }
body { margin: 0px; padding: 0px; height: auto; inset: 0px; font-size: 1rem; line-height: 1.428571; overflow-x: hidden; background: inherit; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 36px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
.typora-export .task-list-item input { pointer-events: none; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; image-orientation: from-image; }
button, input, select, textarea { color: inherit; font-style: inherit; font-variant-caps: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; font-size-adjust: inherit; font-kerning: inherit; font-variant-alternates: inherit; font-variant-ligatures: inherit; font-variant-numeric: inherit; font-variant-east-asian: inherit; font-variant-position: inherit; font-variant-emoji: inherit; font-feature-settings: inherit; font-optical-sizing: inherit; font-variation-settings: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; position: relative; }
#write svg h1, #write svg h2, #write svg h3, #write svg h4, #write svg h5, #write svg h6, #write svg p { position: static; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 4; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px; }
thead, tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right-width: 0px; border-right-style: none; border-right-color: currentcolor; background-color: inherit; }
.CodeMirror-linenumber { -webkit-user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-fences-adv-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
svg { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li blockquote { margin: 1rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; font-variant-ligatures: no-common-ligatures; }
  #write { margin-top: 0px; border-color: transparent !important; padding-top: 0px !important; padding-bottom: 0px !important; }
  .typora-export * { print-color-adjust: exact; }
  .typora-export #write { break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  .is-mac table { break-inside: avoid; }
  #write > p:nth-child(1) { margin-top: 0px; }
  .typora-export-show-outline .typora-export-sidebar { display: none; }
  figure { overflow-x: visible; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
#write.first-line-indent p > .md-image:only-child:not(.md-img-error) img { left: -2em; position: relative; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
.MathJax_ref { fill: currentcolor; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: medium; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.reversefootnote { font-family: ui-monospace, sans-serif; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.6; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: medium !important; border-style: none !important; border-color: currentcolor !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom-width: 0px; border-bottom-style: none; border-bottom-color: currentcolor; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: medium; }
.highlight td, .highlight tr { border: 0px; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
.md-expand mark .md-meta { opacity: 0.3 !important; }
mark .md-meta { color: rgb(0, 0, 0); }
@media print {
  .typora-export h1, .typora-export h2, .typora-export h3, .typora-export h4, .typora-export h5, .typora-export h6 { break-inside: avoid; }
}
.md-diagram-panel .messageText { stroke: none !important; }
.md-diagram-panel .start-state { fill: var(--node-fill); }
.md-diagram-panel .edgeLabel rect { opacity: 1 !important; }
.md-fences.md-fences-math { font-size: 1em; }
.md-fences-advanced:not(.md-focus) { padding: 0px; white-space: nowrap; border: 0px; }
.md-fences-advanced:not(.md-focus) { background: inherit; }
.mermaid-svg { margin: auto; }
.typora-export-show-outline .typora-export-content { max-width: 1440px; margin: auto; display: flex; flex-direction: row; }
.typora-export-sidebar { width: 300px; font-size: 0.8rem; margin-top: 80px; margin-right: 18px; }
.typora-export-show-outline #write { --webkit-flex: 2; flex: 2 1 0%; }
.typora-export-sidebar .outline-content { position: fixed; top: 0px; max-height: 100%; overflow: hidden auto; padding-bottom: 30px; padding-top: 60px; width: 300px; }
@media screen and (max-width: 1024px) {
  .typora-export-sidebar, .typora-export-sidebar .outline-content { width: 240px; }
}
@media screen and (max-width: 800px) {
  .typora-export-sidebar { display: none; }
}
.outline-content li, .outline-content ul { margin-left: 0px; margin-right: 0px; padding-left: 0px; padding-right: 0px; list-style: none; overflow-wrap: anywhere; }
.outline-content ul { margin-top: 0px; margin-bottom: 0px; }
.outline-content strong { font-weight: 400; }
.outline-expander { width: 1rem; height: 1.428571rem; position: relative; display: table-cell; vertical-align: middle; cursor: pointer; padding-left: 4px; }
.outline-expander::before { content: ""; position: relative; font-family: Ionicons; display: inline-block; font-size: 8px; vertical-align: middle; }
.outline-item { padding-top: 3px; padding-bottom: 3px; cursor: pointer; }
.outline-expander:hover::before { content: ""; }
.outline-h1 > .outline-item { padding-left: 0px; }
.outline-h2 > .outline-item { padding-left: 1em; }
.outline-h3 > .outline-item { padding-left: 2em; }
.outline-h4 > .outline-item { padding-left: 3em; }
.outline-h5 > .outline-item { padding-left: 4em; }
.outline-h6 > .outline-item { padding-left: 5em; }
.outline-label { cursor: pointer; display: table-cell; vertical-align: middle; text-decoration: none; color: inherit; }
.outline-label:hover { text-decoration: underline; }
.outline-item:hover { border-color: rgb(245, 245, 245); background-color: var(--item-hover-bg-color); }
.outline-item:hover { margin-left: -28px; margin-right: -28px; border-left-width: 28px; border-left-style: solid; border-left-color: transparent; border-right-width: 28px; border-right-style: solid; border-right-color: transparent; }
.outline-item-single .outline-expander::before, .outline-item-single .outline-expander:hover::before { display: none; }
.outline-item-open > .outline-item > .outline-expander::before { content: ""; }
.outline-children { display: none; }
.info-panel-tab-wrapper { display: none; }
.outline-item-open > .outline-children { display: block; }
.typora-export .outline-item { padding-top: 1px; padding-bottom: 1px; }
.typora-export .outline-item:hover { margin-right: -8px; border-right-width: 8px; border-right-style: solid; border-right-color: transparent; }
.typora-export .outline-expander::before { content: "+"; font-family: inherit; top: -1px; }
.typora-export .outline-expander:hover::before, .typora-export .outline-item-open > .outline-item > .outline-expander::before { content: "−"; }
.typora-export-collapse-outline .outline-children { display: none; }
.typora-export-collapse-outline .outline-item-open > .outline-children, .typora-export-no-collapse-outline .outline-children { display: block; }
.typora-export-no-collapse-outline .outline-expander::before { content: "" !important; }
.typora-export-show-outline .outline-item-active > .outline-item .outline-label { font-weight: 700; }
.md-inline-math-container mjx-container { zoom: 0.95; }
mjx-container { break-inside: avoid; }
.md-alert.md-alert-note { border-left-color: rgb(9, 105, 218); }
.md-alert.md-alert-important { border-left-color: rgb(130, 80, 223); }
.md-alert.md-alert-warning { border-left-color: rgb(154, 103, 0); }
.md-alert.md-alert-tip { border-left-color: rgb(31, 136, 61); }
.md-alert.md-alert-caution { border-left-color: rgb(207, 34, 46); }
.md-alert { padding: 0px 1em; margin-bottom: 16px; color: inherit; border-left-width: 0.25em; border-left-style: solid; border-left-color: rgb(0, 0, 0); }
.md-alert-text-note { color: rgb(9, 105, 218); }
.md-alert-text-important { color: rgb(130, 80, 223); }
.md-alert-text-warning { color: rgb(154, 103, 0); }
.md-alert-text-tip { color: rgb(31, 136, 61); }
.md-alert-text-caution { color: rgb(207, 34, 46); }
.md-alert-text { font-size: 0.9rem; font-weight: 700; }
.md-alert-text svg { fill: currentcolor; position: relative; top: 0.125em; margin-right: 1ch; overflow: visible; }
.md-alert-text-container::after { content: attr(data-text); text-transform: capitalize; pointer-events: none; margin-right: 1ch; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; outline: 0px; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: auto hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 10px; z-index: 3; overflow-y: hidden; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: medium !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; overflow-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { overflow-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right-width: 30px; border-right-style: solid; border-right-color: transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right-width: medium; border-right-style: none; border-right-color: currentcolor; width: auto; }
.CodeMirror-linebackground { position: absolute; inset: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right-width: medium; border-right-style: none; border-right-color: currentcolor; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
span.cm-underlined { text-decoration: underline; }
span.cm-strikethrough { text-decoration: line-through; }
.cm-tw-syntaxerror { color: rgb(255, 255, 255); background-color: rgb(153, 0, 0); }
.cm-tw-deleted { text-decoration: line-through; }
.cm-tw-header5 { font-weight: 700; }
.cm-tw-listitem:first-child { padding-left: 10px; }
.cm-tw-box { border-style: solid; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-color: inherit; border-top-width: 0px !important; }
.cm-tw-underline { text-decoration: underline; }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


@include-when-export url(https://fonts.googleapis.com/css?family=Merriweather:900,900italic,300,300italic&subset=latin-ext);
@include-when-export url(https://fonts.googleapis.com/css?family=Lato:900,300&subset=latin-ext);

:root {
	--control-text-color: #777;
}

/**
 * forked from pixyll.com
 * MIT license
 */

h1,
.h1,
.f1 {
	font-size: 2rem;
	line-height: 2.5rem;
}
h2,
.h2,
.f2 {
	font-size: 1.5rem;
	line-height: 2rem;
}
h3,
.h3,
.f3 {
	font-size: 1.25rem;
	line-height: 1.5rem;
}
p,
.p,
.f4,
h4,
h5,
h6,
dl,
ol,
ul,
pre[cid],
div[cid],
#typora-source {
	font-size: 1.125rem;
	line-height: 1.5rem;
}

h4 {
	font-size: 1.13rem;
}
/*
 Pixyll
 A simple, beautiful theme for Jekyll that emphasizes content rather than aesthetic fluff.
 Best served with BASSCSS (http://jxnblk.github.io/basscss)
 Crafted with <3 by John Otander (@4lpine) - ©2015 John Otander MIT License http://opensource.org/licenses/MIT

*/

body {
	font-family: "Merriweather", "PT Serif", Georgia, "Times New Roman", "STSong", 'Segoe UI Emoji', Serif;
	line-height: 1.5rem;
	font-weight: 400;
}

#write {
	max-width: 914px;
	color: #333;
}

@media only screen and (min-width: 1400px) {
	#write {
		max-width: 1100px;
	}
}

@media only screen and (min-width: 1700px) {
	#write {
		max-width: 1200px;
	}
}

img {
	width: auto;
	max-width: 100%;
}
body {
	font-size: 1.5rem;
	box-sizing: border-box;
	-moz-box-sizing: border-box;
	-webkit-box-sizing: border-box;
}

.ty-table-edit {
	background: #ededed;
}

table {
	width: 100%;
	font-size: 1.125rem;
}
table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td,
table > tfoot > tr > th,
table > tfoot > tr > td {
	padding: 12px;
	line-height: 1.2;
	vertical-align: top;
	border-top: 1px solid #333;
}
table > thead > tr > th {
	vertical-align: bottom;
	border-bottom: 2px solid #333;
}
table > caption + thead > tr:first-child > th,
table > caption + thead > tr:first-child > td,
table > colgroup + thead > tr:first-child > th,
table > colgroup + thead > tr:first-child > td,
table > thead:first-child > tr:first-child > th,
table > thead:first-child > tr:first-child > td {
	border-top: 0;
}
table > tbody + tbody {
	border-top: 2px solid #333;
}
p {
	font-weight: 300;
	line-height: 1.5;
}
abbr {
	border-bottom: 1px black dotted;
	cursor: help;
}
pre,
code {
	font-family: Menlo, Monaco, "Courier New", monospace;
}

code,
.md-fences  {
	color: #7a7a7a;
}

.md-fences {
	padding: 1.125em;
	margin-bottom: 0.88em;
	font-size: 1rem;
	border: 1px solid #7a7a7a;
	padding-bottom: 0.5rem;
	padding-top: 0.5rem;
}

blockquote {
	padding: 1.33em;
	font-style: italic;
	border-left: 5px solid #7a7a7a;
	color: #555;
}
blockquote em {
	color: #000;
}
blockquote footer {
	font-size: .85rem;
	font-style: normal;
	background-color: #fff;
	color: #7a7a7a;
	border-color: transparent;
}
h1,
.h1,
h2,
.h2,
h3,
.h3,
h4,
.h4,
h5,
.h5,
h6,
.h6 {
	font-family: "Lato", 'Helvetica Neue', Helvetica, sans-serif;
	font-weight: bold;
	line-height: 1.2;
	margin: 1em 0 0.5em;
}
@media screen and (min-width: 48em) {
	.h1,
	h1 {
		font-size: 3.250rem;
	}
	.h2,
	h2 {
		font-size: 2.298rem;
	}
	.h3,
	h3 {
		font-size: 1.625rem;
	}
	.h4,
	h4 {
		font-size: 1.3rem;
	}
	#write>h4.md-focus:before,
	#write>h5.md-focus:before,
	#write>h6.md-focus:before{
		top: 1px;
	}
	.p,
	p,
	li {
		font-size: 1.25rem;
		line-height: 1.8;
	}
	table {
		font-size: 1.25rem;
	}
}
@media (max-width: 48em) {
	blockquote {
		margin-left: 1rem;
		margin-right: 0;
		padding: 0.5em;
	}
	.h1,
	h1 {
		font-size: 2.827rem;
	}
	.h2,
	h2 {
		font-size: 1.999rem;
	}
	.h3,
	h3 {
		font-size: 1.413rem;
	}
	.h4,
	h4 {
		font-size: 1.3rem;
	}
}
@media screen and (min-width: 64em) {
	.h1,
	h1 {
		font-size: 4.498rem;
	}
	.h2,
	h2 {
		font-size: 2.29rem;
	}
	.h3,
	h3 {
		font-size: 1.9rem;
	}
	.h4,
	h4 {
		font-size: 1.591rem;
	}
	#write>h4.md-focus:before{
		top:4px;
	}
}
a {
	color: #463F5C;
	text-decoration: underline;
}

#write {
	padding-top: 2rem;
}

#write pre.md-meta-block {
	min-height: 35px;
	padding: 0.5em 1em;
	white-space: pre;
	border: 0px;

	border-left: 30px #f8f8f8 solid;
	border-right: 30px #f8f8f8 solid;
	width: 100vw;
	max-width: calc(100% + 60px);

	margin-left: -30px;
	margin-bottom: 2em;
	margin-top: -2010px;
	padding-top: 2000px;
	padding-bottom: 10px;
	line-height: 1.5em;
	color: #7a7a7a;
	background-color: #fafafa;
	font-family: 'Lato', 'Helvetica Neue', Helvetica, sans-serif;
	font-weight: 300;
	clear: both;
	padding-left: 0;
	font-size:1.125rem;
}
.md-image>.md-meta {
	color: #463F5C
}
.footnotes {
	font-size:1.1rem;
}
.md-tag {
	font-family: 'Lato', 'Helvetica Neue', Helvetica, sans-serif;
}
.code-tooltip {
	background: white;
}
.code-tooltip-content {
	font-size: 1.1rem;
}

.task-list{
	padding-left: 0;
}

.md-task-list-item {
	padding-left:34px;
}

.md-task-list-item > input{
	width: 1.25rem;
	height: 1.25rem;
	display: block;
	-webkit-appearance: initial;
	top: -0.2rem;
	margin-left: -1.6em;
	margin-top: calc(1rem - 7px);
	border: none;
}

.md-task-list-item > input:focus{
	outline: none;
	box-shadow: none;
}

.md-task-list-item > input:before{
	border: 1px solid #555;
	border-radius: 1.5rem;
	width: 1.5rem;
	height: 1.5rem;
	background: #fff;
	content: ' ';
	transition: background-color 200ms ease-in-out;
	display: block;
}

.md-task-list-item > input:checked:before,
.md-task-list-item > input[checked]:before{
	background: #333;
	border-width: 2px;
	display:inline-block;
	transition: background-color 200ms ease-in-out;
}

.md-task-list-item > input:checked:after,
.md-task-list-item > input[checked]:after {
	opacity: 1;
}

.md-task-list-item > input:after {
	opacity: 1;
	-webkit-transition: opacity 0.05s ease-in-out;
	-moz-transition: opacity 0.05s ease-in-out;
	transition: opacity 0.05s ease-in-out;
	-webkit-transform: rotate(-45deg);
	-moz-transform: rotate(-45deg);
	transform: rotate(-45deg);
	position: absolute;
	top: 0.4375rem;
	left: 0.28125rem;
	width: 0.9375rem;
	height: 0.5rem;
	border: 3px solid #fff;
	border-top: 0;
	border-right: 0;
	content: ' ';
	opacity: 0;
}

.md-tag {
	color:inherit;
}

.md-toc:focus .md-toc-content{
	margin-top: 19px;
}

#typora-sidebar {
	font-size:1rem !important;
}

.html-for-mac #typora-sidebar {
	background-color:white;
}

.outline-content li, .outline-content ul {
	font-size:1rem !important;
}

.outline-title {
	line-height: inherit;
	margin-top: 10px;
}

.outline-expander {
	width: 18px;
}

.outline-expander:before {
 	content: "+";
	font-family: inherit;
	color: rgb(108, 108, 108); 
  font-size: 1.5rem;
 	top: -0.1rem;
}

.outline-expander:hover:before {
	content: "+";
}

.outline-item-open>.outline-item>.outline-expander:before{
	content: "-";
}

/** source code mode */
#typora-source {
	font-family: Courier, monospace;
    color: #6A6A6A;
}

.os-windows #typora-source {
	font-family: inherit;
}

.cm-s-typora-default .cm-header, 
.cm-s-typora-default .cm-property,
.CodeMirror.cm-s-typora-default div.CodeMirror-cursor {
	color: #428bca;
}

.cm-s-typora-default .cm-atom, .cm-s-typora-default .cm-number {
	color: #777777;
}

.md-diagram-panel {
	margin-top: 24px;
	margin-left: -1.2em;
}

.md-mathjax-midline {
	background: #fafafa;
}

.enable-diagrams pre.md-fences[lang="sequence"] .code-tooltip,
.enable-diagrams pre.md-fences[lang="flow"] .code-tooltip,
.enable-diagrams pre.md-fences[lang="mermaid"] .code-tooltip {
    bottom: -3.4em;
}

.dropdown-menu .divider {
	border-color: #e5e5e5;
}

li {
	margin: 0.5rem 0;
}

li > *:last-child {
	margin-bottom: 0;
}

p img + em {
  display: block;
  text-align: center;
  font-size: 0.85em;
  color: gray;
  margin-top: 4px;
}


 @media print { @page {margin: 0 0 0 0;} body.typora-export {padding-left: 0; padding-right: 0;} #write {padding:0;}}
</style><title>Chapter4</title>
</head>
<body class='typora-export'><div class='typora-export-content'>
<div id='write'  class=''><h1 id='chapter-4'><span>Chapter 4</span></h1><h2 id='infrastructure-as-code-concepts'><span>Infrastructure as Code Concepts</span></h2><p><em><span>Maya and Ethan settled into a quiet corner of the company&#39;s innovation lab. Unlike their previous coffee shop meetings, today they needed access to large display screens to review code side by side. Maya had prepared several examples on her laptop while Ethan unpacked his notebook.</span></em></p><hr /><p><span>&quot;Last time we created an S3 bucket for MagicMail&#39;s assets using the AWS Console,&quot; Maya began, pulling up the AWS Management Console on the screen. &quot;We clicked through forms, checked boxes, and entered values into fields.&quot;</span></p><p><span>Ethan nodded. &quot;It was straightforward enough for one bucket. But I imagine doing that for our entire architecture would be tedious.&quot;</span></p><p><span>&quot;More than tedious—it would be error-prone, hard to replicate, and nearly impossible to version control,&quot; Maya replied. &quot;That&#39;s why today we&#39;re going to recreate that same S3 bucket, but using </span><strong><span>Infrastructure as Code</span></strong><span>.&quot;</span></p><p><span>Maya opened a blank document on her screen. &quot;By the end of today, you&#39;ll understand why Infrastructure as Code is transforming how we build cloud systems, and you&#39;ll write your first CloudFormation template. This will be a stepping stone before we move on to the more powerful AWS CDK.&quot;</span></p><h2 id='understanding-infrastructure-as-code-iac'><span>Understanding Infrastructure as Code (IaC)</span></h2><p><span>&quot;Let&#39;s start with the fundamentals,&quot; Maya said. &quot;What exactly is Infrastructure as Code, or IaC?&quot;</span></p><p><span>She started typing a definition on the screen:</span></p><blockquote><p><em><span>Infrastructure as Code (IaC) is the practice of managing and provisioning computing infrastructure through machine-readable definition files (code!), rather than through physical hardware configuration or interactive configuration tools (like clicking in a console).</span></em></p></blockquote><p><span>&quot;In simpler terms,&quot; she continued, &quot;instead of clicking buttons in a web console, we write code that describes what our infrastructure should look like. Then we use tools to automatically turn that code into actual cloud resources.&quot;</span></p><p><span>&quot;So it&#39;s like moving from manual assembly to automated manufacturing,&quot; Ethan suggested.</span></p><p><span>&quot;That&#39;s an excellent analogy!&quot; Maya smiled. &quot;Just as automated manufacturing brought consistency, scalability, and quality control to physical production, IaC brings those same benefits to infrastructure deployment.&quot;</span></p><h2 id='benefits-of-infrastructure-as-code'><span>Benefits of Infrastructure as Code</span></h2><p><span>Maya pulled up a new slide on the screen with a list of benefits.</span></p><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart218" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="flowchart mermaid-svg" style="max-width: 594px;" viewBox="-8 -8 594 1115" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#mermaidChart218{font-family:sans-serif;font-size:16px;fill:#333;}#mermaidChart218 .error-icon{fill:#552222;}#mermaidChart218 .error-text{fill:#552222;stroke:#552222;}#mermaidChart218 .edge-thickness-normal{stroke-width:1px;}#mermaidChart218 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart218 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart218 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaidChart218 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart218 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart218 .marker{fill:#333333;stroke:#333333;}#mermaidChart218 .marker.cross{stroke:#333333;}#mermaidChart218 svg{font-family:sans-serif;font-size:16px;}#mermaidChart218 p{margin:0;}#mermaidChart218 .label{font-family:sans-serif;color:#333;}#mermaidChart218 .cluster-label text{fill:#333;}#mermaidChart218 .cluster-label span{color:#333;}#mermaidChart218 .cluster-label span p{background-color:transparent;}#mermaidChart218 .label text,#mermaidChart218 span{fill:#333;color:#333;}#mermaidChart218 .node rect,#mermaidChart218 .node circle,#mermaidChart218 .node ellipse,#mermaidChart218 .node polygon,#mermaidChart218 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaidChart218 .rough-node .label text,#mermaidChart218 .node .label text,#mermaidChart218 .image-shape .label,#mermaidChart218 .icon-shape .label{text-anchor:middle;}#mermaidChart218 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaidChart218 .rough-node .label,#mermaidChart218 .node .label,#mermaidChart218 .image-shape .label,#mermaidChart218 .icon-shape .label{text-align:center;}#mermaidChart218 .node.clickable{cursor:pointer;}#mermaidChart218 .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#mermaidChart218 .arrowheadPath{fill:#333333;}#mermaidChart218 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaidChart218 .flowchart-link{stroke:#333333;fill:none;}#mermaidChart218 .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaidChart218 .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#mermaidChart218 .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaidChart218 .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#mermaidChart218 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaidChart218 .cluster text{fill:#333;}#mermaidChart218 .cluster span{color:#333;}#mermaidChart218 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart218 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaidChart218 rect.text{fill:none;stroke-width:0;}#mermaidChart218 .icon-shape,#mermaidChart218 .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaidChart218 .icon-shape p,#mermaidChart218 .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#mermaidChart218 .icon-shape rect,#mermaidChart218 .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaidChart218 :root{--mermaid-alt-font-family:sans-serif;}</style><g><marker id="mermaidChart218_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart218_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart218_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart218_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart218_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart218_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M151.845,523L175.371,444.833C198.896,366.667,245.948,210.333,272.974,132.167C300,54,307,54,310.5,54L314,54" id="L_IaC_Consistency_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart218_flowchart-v2-pointEnd)"></path><path d="M156.353,523L179.127,465.917C201.902,408.833,247.451,294.667,280.53,237.583C313.609,180.5,334.219,180.5,344.523,180.5L354.828,180.5" id="L_IaC_VersionControl_1" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart218_flowchart-v2-pointEnd)"></path><path d="M163.694,523L185.245,484.417C206.796,445.833,249.898,368.667,284.239,330.083C318.581,291.5,344.161,291.5,356.952,291.5L369.742,291.5" id="L_IaC_Automation_2" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart218_flowchart-v2-pointEnd)"></path><path d="M180.823,523L199.519,502.917C218.215,482.833,255.608,442.667,282.095,422.583C308.583,402.5,324.167,402.5,331.958,402.5L339.75,402.5" id="L_IaC_Speed_3" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart218_flowchart-v2-pointEnd)"></path><path d="M266.468,523L270.89,521.417C275.312,519.833,284.156,516.667,301.613,515.083C319.07,513.5,345.141,513.5,358.176,513.5L371.211,513.5" id="L_IaC_Reusability_4" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart218_flowchart-v2-pointEnd)"></path><path d="M266.468,615L270.89,616.583C275.312,618.167,284.156,621.333,298.855,622.917C313.555,624.5,334.109,624.5,344.387,624.5L354.664,624.5" id="L_IaC_Docs_5" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart218_flowchart-v2-pointEnd)"></path><path d="M180.823,615L199.519,635.083C218.215,655.167,255.608,695.333,289.849,715.417C324.091,735.5,355.182,735.5,370.728,735.5L386.273,735.5" id="L_IaC_Testing_6" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart218_flowchart-v2-pointEnd)"></path><path d="M163.694,615L185.245,653.583C206.796,692.167,249.898,769.333,282.944,807.917C315.99,846.5,338.979,846.5,350.474,846.5L361.969,846.5" id="L_IaC_Collaboration_7" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart218_flowchart-v2-pointEnd)"></path><path d="M156.353,615L179.127,672.083C201.902,729.167,247.451,843.333,283.748,900.417C320.044,957.5,347.089,957.5,360.611,957.5L374.133,957.5" id="L_IaC_Scalability_8" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart218_flowchart-v2-pointEnd)"></path><path d="M152.274,615L175.729,690.583C199.183,766.167,246.091,917.333,277.772,992.917C309.453,1068.5,325.906,1068.5,334.133,1068.5L342.359,1068.5" id="L_IaC_DR_9" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart218_flowchart-v2-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default  " id="flowchart-IaC-3255" transform="translate(138, 569)"><rect class="basic label-container" style="" x="-130" y="-46" width="260" height="92"></rect><g class="label" style="" transform="translate(-100, -31)"><rect></rect><foreignObject width="200" height="62"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel "><p>Infrastructure as Code Benefits</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-Consistency-3257" transform="translate(448, 54)"><rect class="basic label-container" style="" x="-130" y="-46" width="260" height="92"></rect><g class="label" style="" transform="translate(-100, -31)"><rect></rect><foreignObject width="200" height="62"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel "><p>Consistency &amp; Reproducibility</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-VersionControl-3259" transform="translate(448, 180.5)"><rect class="basic label-container" style="" x="-89.171875" y="-30.5" width="178.34375" height="61"></rect><g class="label" style="" transform="translate(-59.171875, -15.5)"><rect></rect><foreignObject width="118.34375" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Version Control</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-Automation-3261" transform="translate(448, 291.5)"><rect class="basic label-container" style="" x="-74.2578125" y="-30.5" width="148.515625" height="61"></rect><g class="label" style="" transform="translate(-44.2578125, -15.5)"><rect></rect><foreignObject width="88.515625" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Automation</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-Speed-3263" transform="translate(448, 402.5)"><rect class="basic label-container" style="" x="-104.25" y="-30.5" width="208.5" height="61"></rect><g class="label" style="" transform="translate(-74.25, -15.5)"><rect></rect><foreignObject width="148.5" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Speed &amp; Efficiency</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-Reusability-3265" transform="translate(448, 513.5)"><rect class="basic label-container" style="" x="-72.7890625" y="-30.5" width="145.578125" height="61"></rect><g class="label" style="" transform="translate(-42.7890625, -15.5)"><rect></rect><foreignObject width="85.578125" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Reusability</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-Docs-3267" transform="translate(448, 624.5)"><rect class="basic label-container" style="" x="-89.3359375" y="-30.5" width="178.671875" height="61"></rect><g class="label" style="" transform="translate(-59.3359375, -15.5)"><rect></rect><foreignObject width="118.671875" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Documentation</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-Testing-3269" transform="translate(448, 735.5)"><rect class="basic label-container" style="" x="-57.7265625" y="-30.5" width="115.453125" height="61"></rect><g class="label" style="" transform="translate(-27.7265625, -15.5)"><rect></rect><foreignObject width="55.453125" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Testing</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-Collaboration-3271" transform="translate(448, 846.5)"><rect class="basic label-container" style="" x="-82.03125" y="-30.5" width="164.0625" height="61"></rect><g class="label" style="" transform="translate(-52.03125, -15.5)"><rect></rect><foreignObject width="104.0625" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Collaboration</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-Scalability-3273" transform="translate(448, 957.5)"><rect class="basic label-container" style="" x="-69.8671875" y="-30.5" width="139.734375" height="61"></rect><g class="label" style="" transform="translate(-39.8671875, -15.5)"><rect></rect><foreignObject width="79.734375" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Scalability</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-DR-3275" transform="translate(448, 1068.5)"><rect class="basic label-container" style="" x="-101.640625" y="-30.5" width="203.28125" height="61"></rect><g class="label" style="" transform="translate(-71.640625, -15.5)"><rect></rect><foreignObject width="143.28125" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Disaster Recovery</p></span></div></foreignObject></g></g></g></g></g></svg></div><p><em><span>Graphic listing IaC benefits</span></em></p><p><span>&quot;Let&#39;s discuss why IaC has become the standard for modern cloud deployments:</span></p><blockquote><ol start='' ><li><p><strong><span>Consistency &amp; Reproducibility:</span></strong><span> When infrastructure is defined as code, you get the same result every time you deploy it. This eliminates configuration drift and the &#39;it works on my machine&#39; problem for infrastructure.</span></p></li><li><p><strong><span>Version Control:</span></strong><span> Infrastructure code can be stored in version control systems (like Git) alongside your application code. This gives you a history of changes, allows collaboration, and enables rollbacks.</span></p></li><li><p><strong><span>Automation:</span></strong><span> Deployments, updates, and teardowns can be fully automated through CI/CD pipelines, reducing manual effort and human error.</span></p></li><li><p><strong><span>Speed &amp; Efficiency:</span></strong><span> Automated provisioning is much faster than manual configuration, allowing teams to deliver infrastructure and applications more quickly.</span></p></li><li><p><strong><span>Reusability:</span></strong><span> Code allows you to create reusable templates or modules for common infrastructure patterns, promoting consistency and reducing duplication.</span></p></li><li><p><strong><span>Documentation:</span></strong><span> The IaC code itself serves as living documentation of your infrastructure configuration.</span></p></li><li><p><strong><span>Testing:</span></strong><span> Infrastructure code can often be linted, validated, and sometimes even tested before deployment, catching errors early.</span></p></li><li><p><strong><span>Collaboration:</span></strong><span> Teams can review infrastructure changes using standard code review processes (like pull requests).</span></p></li><li><p><strong><span>Scalability:</span></strong><span> It&#39;s often as easy to deploy 100 identical environments (e.g., for testing or different tenants) as it is to deploy one.</span></p></li><li><p><strong><span>Disaster Recovery:</span></strong><span> In a disaster scenario, IaC allows you to quickly recreate your entire infrastructure stack in a different region from your code.&quot;</span></p></li></ol></blockquote><p><span>&quot;These benefits become crucial as infrastructure complexity grows,&quot; Maya added. &quot;For a system like MagicMail with multiple microservices, databases, and APIs, managing it all manually would be unsustainable.&quot;</span></p><p><span>Ethan nodded, jotting notes. &quot;It makes perfect sense. Treat infrastructure like software.&quot;</span></p><h2 id='declarative-vs-imperative-approaches'><span>Declarative vs. Imperative Approaches</span></h2><p><span>Maya drew a simple diagram on the whiteboard, creating two columns.</span></p><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart219" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="classDiagram mermaid-svg" style="max-width: 735.484375px;" viewBox="0 -47.828125 735.484375 600.828125" role="graphics-document document" aria-roledescription="class"><style>#mermaidChart219{font-family:sans-serif;font-size:16px;fill:#333;}#mermaidChart219 .error-icon{fill:#552222;}#mermaidChart219 .error-text{fill:#552222;stroke:#552222;}#mermaidChart219 .edge-thickness-normal{stroke-width:1px;}#mermaidChart219 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart219 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart219 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaidChart219 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart219 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart219 .marker{fill:#666;stroke:#666;}#mermaidChart219 .marker.cross{stroke:#666;}#mermaidChart219 svg{font-family:sans-serif;font-size:16px;}#mermaidChart219 p{margin:0;}#mermaidChart219 g.classGroup text{fill:#9370DB;stroke:none;font-family:sans-serif;font-size:10px;}#mermaidChart219 g.classGroup text .title{font-weight:bolder;}#mermaidChart219 .nodeLabel,#mermaidChart219 .edgeLabel{color:#131300;}#mermaidChart219 .edgeLabel .label rect{fill:#ECECFF;}#mermaidChart219 .label text{fill:#131300;}#mermaidChart219 .labelBkg{background:#ECECFF;}#mermaidChart219 .edgeLabel .label span{background:#ECECFF;}#mermaidChart219 .classTitle{font-weight:bolder;}#mermaidChart219 .node rect,#mermaidChart219 .node circle,#mermaidChart219 .node ellipse,#mermaidChart219 .node polygon,#mermaidChart219 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaidChart219 .divider{stroke:#9370DB;stroke-width:1;}#mermaidChart219 g.clickable{cursor:pointer;}#mermaidChart219 g.classGroup rect{fill:#ECECFF;stroke:#9370DB;}#mermaidChart219 g.classGroup line{stroke:#9370DB;stroke-width:1;}#mermaidChart219 .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5;}#mermaidChart219 .classLabel .label{fill:#9370DB;font-size:10px;}#mermaidChart219 .relation{stroke:#666;stroke-width:1;fill:none;}#mermaidChart219 .dashed-line{stroke-dasharray:3;}#mermaidChart219 .dotted-line{stroke-dasharray:1 2;}#mermaidChart219 #compositionStart,#mermaidChart219 .composition{fill:#666!important;stroke:#666!important;stroke-width:1;}#mermaidChart219 #compositionEnd,#mermaidChart219 .composition{fill:#666!important;stroke:#666!important;stroke-width:1;}#mermaidChart219 #dependencyStart,#mermaidChart219 .dependency{fill:#666!important;stroke:#666!important;stroke-width:1;}#mermaidChart219 #dependencyStart,#mermaidChart219 .dependency{fill:#666!important;stroke:#666!important;stroke-width:1;}#mermaidChart219 #extensionStart,#mermaidChart219 .extension{fill:transparent!important;stroke:#666!important;stroke-width:1;}#mermaidChart219 #extensionEnd,#mermaidChart219 .extension{fill:transparent!important;stroke:#666!important;stroke-width:1;}#mermaidChart219 #aggregationStart,#mermaidChart219 .aggregation{fill:transparent!important;stroke:#666!important;stroke-width:1;}#mermaidChart219 #aggregationEnd,#mermaidChart219 .aggregation{fill:transparent!important;stroke:#666!important;stroke-width:1;}#mermaidChart219 #lollipopStart,#mermaidChart219 .lollipop{fill:#ECECFF!important;stroke:#666!important;stroke-width:1;}#mermaidChart219 #lollipopEnd,#mermaidChart219 .lollipop{fill:#ECECFF!important;stroke:#666!important;stroke-width:1;}#mermaidChart219 .edgeTerminals{font-size:11px;line-height:initial;}#mermaidChart219 .classTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaidChart219 :root{--mermaid-alt-font-family:sans-serif;}</style><g><defs><marker id="mermaidChart219_class-aggregationStart" class="marker aggregation class" refX="18" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="mermaidChart219_class-aggregationEnd" class="marker aggregation class" refX="1" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="mermaidChart219_class-extensionStart" class="marker extension class" refX="18" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 1,7 L18,13 V 1 Z"></path></marker></defs><defs><marker id="mermaidChart219_class-extensionEnd" class="marker extension class" refX="1" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 1,1 V 13 L18,7 Z"></path></marker></defs><defs><marker id="mermaidChart219_class-compositionStart" class="marker composition class" refX="18" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="mermaidChart219_class-compositionEnd" class="marker composition class" refX="1" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="mermaidChart219_class-dependencyStart" class="marker dependency class" refX="6" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 5,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="mermaidChart219_class-dependencyEnd" class="marker dependency class" refX="13" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><defs><marker id="mermaidChart219_class-lollipopStart" class="marker lollipop class" refX="13" refY="7" markerWidth="190" markerHeight="240" orient="auto"><circle stroke="currentColor" fill="transparent" cx="7" cy="7" r="6"></circle></marker></defs><defs><marker id="mermaidChart219_class-lollipopEnd" class="marker lollipop class" refX="1" refY="7" markerWidth="190" markerHeight="240" orient="auto"><circle stroke="currentColor" fill="transparent" cx="7" cy="7" r="6"></circle></marker></defs><g class="root"><g class="clusters"></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g class="node default " id="classId-Declarative-508" transform="translate(176.3359375, 276.5)"><g class="basic label-container"><path d="M-168.3359375 -268.5 L168.3359375 -268.5 L168.3359375 268.5 L-168.3359375 268.5" stroke="none" stroke-width="0" fill="#ECECFF" style=""></path><path d="M-168.3359375 -268.5 C-91.01042446818164 -268.5, -13.68491143636328 -268.5, 168.3359375 -268.5 M-168.3359375 -268.5 C-100.32512088204605 -268.5, -32.3143042640921 -268.5, 168.3359375 -268.5 M168.3359375 -268.5 C168.3359375 -77.83367698054133, 168.3359375 112.83264603891735, 168.3359375 268.5 M168.3359375 -268.5 C168.3359375 -136.14615555260488, 168.3359375 -3.7923111052097624, 168.3359375 268.5 M168.3359375 268.5 C85.24214889722808 268.5, 2.148360294456154 268.5, -168.3359375 268.5 M168.3359375 268.5 C93.13065095595628 268.5, 17.925364411912568 268.5, -168.3359375 268.5 M-168.3359375 268.5 C-168.3359375 72.37682957749792, -168.3359375 -123.74634084500417, -168.3359375 -268.5 M-168.3359375 268.5 C-168.3359375 146.29826505272732, -168.3359375 24.096530105454633, -168.3359375 -268.5" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g><g class="annotation-group text" transform="translate(0, -244.5)"></g><g class="label-group text" transform="translate(-44.25, -244.5)"><g class="label" style="font-weight: bolder" transform="translate(0,-15.5)"><foreignObject width="88.5" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 130px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>Declarative</p></span></div></foreignObject></g></g><g class="members-group text" transform="translate(-156.3359375, -189.5)"><g class="label" style="" transform="translate(0,-15.5)"><foreignObject width="132.625" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 177px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>"WHAT you want"</p></span></div></foreignObject></g><g class="label" style="" transform="translate(0,15.5)"><foreignObject width="17.484375" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 70px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>---</p></span></div></foreignObject></g><g class="label" style="" transform="translate(0,46.5)"><foreignObject width="122.546875" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 160px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>Characteristics:</p></span></div></foreignObject></g><g class="label" style="" transform="translate(0,77.5)"><foreignObject width="213.640625" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 240px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>• Specify desired end state</p></span></div></foreignObject></g><g class="label" style="" transform="translate(0,108.5)"><foreignObject width="122.5625" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 159px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>• State-focused</p></span></div></foreignObject></g><g class="label" style="" transform="translate(0,139.5)"><foreignObject width="119.328125" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 155px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>• More concise</p></span></div></foreignObject></g><g class="label" style="" transform="translate(0,170.5)"><foreignObject width="208.75" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 237px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>• Simpler reasoning model</p></span></div></foreignObject></g><g class="label" style="" transform="translate(0,201.5)"><foreignObject width="268.421875" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 287px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>• Handles complex dependencies</p></span></div></foreignObject></g><g class="label" style="" transform="translate(0,232.5)"><foreignObject width="185.109375" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 217px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>• Tool determines steps</p></span></div></foreignObject></g><g class="label" style="" transform="translate(0,263.5)"><foreignObject width="17.484375" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 70px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>---</p></span></div></foreignObject></g><g class="label" style="" transform="translate(0,294.5)"><foreignObject width="81.6875" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 125px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>Examples:</p></span></div></foreignObject></g><g class="label" style="" transform="translate(0,325.5)"><foreignObject width="180.5625" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 215px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>• AWS CloudFormation</p></span></div></foreignObject></g><g class="label" style="" transform="translate(0,356.5)"><foreignObject width="87.84375" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 130px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>• Terraform</p></span></div></foreignObject></g><g class="label" style="" transform="translate(0,387.5)"><foreignObject width="184.140625" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 215px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>• Kubernetes manifests</p></span></div></foreignObject></g></g><g class="methods-group text" transform="translate(-156.3359375, 268.5)"></g><g class="divider" style=""><path d="M-168.3359375 -213.5 C-55.6008105209044 -213.5, 57.13431645819119 -213.5, 168.3359375 -213.5 M-168.3359375 -213.5 C-97.44569537944682 -213.5, -26.555453258893635 -213.5, 168.3359375 -213.5" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g><g class="divider" style=""><path d="M-168.3359375 244.5 C-41.89373861639204 244.5, 84.54846026721592 244.5, 168.3359375 244.5 M-168.3359375 244.5 C-73.9841682047033 244.5, 20.36760109059341 244.5, 168.3359375 244.5" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g></g><g class="node default " id="classId-Imperative-509" transform="translate(561.078125, 276.5)"><g class="basic label-container"><path d="M-166.40625 -268.5 L166.40625 -268.5 L166.40625 268.5 L-166.40625 268.5" stroke="none" stroke-width="0" fill="#ECECFF" style=""></path><path d="M-166.40625 -268.5 C-37.48934143681839 -268.5, 91.42756712636321 -268.5, 166.40625 -268.5 M-166.40625 -268.5 C-76.47622156777965 -268.5, 13.453806864440708 -268.5, 166.40625 -268.5 M166.40625 -268.5 C166.40625 -61.00646968630787, 166.40625 146.48706062738427, 166.40625 268.5 M166.40625 -268.5 C166.40625 -69.9686527589354, 166.40625 128.5626944821292, 166.40625 268.5 M166.40625 268.5 C67.04252681909415 268.5, -32.3211963618117 268.5, -166.40625 268.5 M166.40625 268.5 C98.60470567521017 268.5, 30.80316135042034 268.5, -166.40625 268.5 M-166.40625 268.5 C-166.40625 151.31214559461205, -166.40625 34.124291189224124, -166.40625 -268.5 M-166.40625 268.5 C-166.40625 123.41769954994268, -166.40625 -21.664600900114635, -166.40625 -268.5" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g><g class="annotation-group text" transform="translate(0, -244.5)"></g><g class="label-group text" transform="translate(-41.328125, -244.5)"><g class="label" style="font-weight: bolder" transform="translate(0,-15.5)"><foreignObject width="82.65625" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 125px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>Imperative</p></span></div></foreignObject></g></g><g class="members-group text" transform="translate(-154.40625, -189.5)"><g class="label" style="" transform="translate(0,-15.5)"><foreignObject width="109.90625" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 153px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>"HOW to do it"</p></span></div></foreignObject></g><g class="label" style="" transform="translate(0,15.5)"><foreignObject width="17.484375" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 70px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>---</p></span></div></foreignObject></g><g class="label" style="" transform="translate(0,46.5)"><foreignObject width="122.546875" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 160px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>Characteristics:</p></span></div></foreignObject></g><g class="label" style="" transform="translate(0,77.5)"><foreignObject width="261.625" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 283px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>• Specify exact commands to run</p></span></div></foreignObject></g><g class="label" style="" transform="translate(0,108.5)"><foreignObject width="145.578125" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 179px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>• Process-focused</p></span></div></foreignObject></g><g class="label" style="" transform="translate(0,139.5)"><foreignObject width="171.5" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 202px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>• More explicit control</p></span></div></foreignObject></g><g class="label" style="" transform="translate(0,170.5)"><foreignObject width="239.578125" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 263px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>• May require conditional logic</p></span></div></foreignObject></g><g class="label" style="" transform="translate(0,201.5)"><foreignObject width="267.484375" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 289px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>• Must handle each possible state</p></span></div></foreignObject></g><g class="label" style="" transform="translate(0,232.5)"><foreignObject width="209.078125" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 236px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>• Step-by-step instructions</p></span></div></foreignObject></g><g class="label" style="" transform="translate(0,263.5)"><foreignObject width="17.484375" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 70px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>---</p></span></div></foreignObject></g><g class="label" style="" transform="translate(0,294.5)"><foreignObject width="81.6875" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 125px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>Examples:</p></span></div></foreignObject></g><g class="label" style="" transform="translate(0,325.5)"><foreignObject width="108.90625" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 146px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>• Shell scripts</p></span></div></foreignObject></g><g class="label" style="" transform="translate(0,356.5)"><foreignObject width="175.375" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 209px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>• AWS CLI commands</p></span></div></foreignObject></g><g class="label" style="" transform="translate(0,387.5)"><foreignObject width="234.671875" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 258px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>• Ansible playbooks - partially</p></span></div></foreignObject></g></g><g class="methods-group text" transform="translate(-154.40625, 268.5)"></g><g class="divider" style=""><path d="M-166.40625 -213.5 C-82.57359297300002 -213.5, 1.259064053999964 -213.5, 166.40625 -213.5 M-166.40625 -213.5 C-40.270016468363195 -213.5, 85.86621706327361 -213.5, 166.40625 -213.5" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g><g class="divider" style=""><path d="M-166.40625 244.5 C-64.18510509035167 244.5, 38.03603981929666 244.5, 166.40625 244.5 M-166.40625 244.5 C-82.00619079056382 244.5, 2.3938684188723585 244.5, 166.40625 244.5" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g></g></g></g></g><text text-anchor="middle" x="367.7421875" y="-25" class="classDiagramTitleText">Declarative vs. Imperative IaC Approaches</text></svg></div><p><em><span>Diagram contrasting Declarative (&#39;What&#39;) vs. Imperative (&#39;How&#39;) IaC</span></em></p><p><span>&quot;There are two main approaches to Infrastructure as Code: declarative and imperative,&quot; she explained.</span></p><p><span>&quot;In a </span><strong><span>declarative</span></strong><span> approach (the &#39;What&#39;), you define the desired </span><strong><span>end state</span></strong><span> of your infrastructure—what you want it to look like. The IaC tool is responsible for figuring out </span><em><span>how</span></em><span> to achieve that state. You say, &#39;I want an S3 bucket with versioning enabled and these specific tags,&#39; and the tool creates it if it doesn&#39;t exist, updates it if it differs, or leaves it alone if it already matches.</span></p><p><span>In an </span><strong><span>imperative</span></strong><span> approach (the &#39;How&#39;), you write scripts that specify the exact </span><strong><span>sequence of commands</span></strong><span> needed to achieve the desired state. You might write code like &#39;Check if bucket exists; if not, run the command to create the bucket; then run the command to enable versioning; then run the command to add tags.&#39;&quot;</span></p><p><span>&quot;What&#39;s the advantage of one over the other?&quot; Ethan asked.</span></p><p><span>&quot;Declarative approaches tend to be more robust and easier to manage for infrastructure,&quot; Maya replied. &quot;You don&#39;t have to explicitly handle all possible starting states or the exact order of operations. You declare the target state, and the tool manages the transitions. This makes the definitions more concise and less prone to errors when dealing with complex dependencies or updates.&quot;</span></p><p><span>&quot;AWS CloudFormation, which we&#39;ll start with today, is </span><strong><span>declarative</span></strong><span>. You describe your desired resources in a template, and CloudFormation manages the lifecycle (create, update, delete) to match that description. AWS CDK, which we&#39;ll use later, is also declarative at its core because it generates CloudFormation templates, but it lets you use the power of imperative </span><em><span>programming languages</span></em><span> (like TypeScript) to </span><em><span>generate</span></em><span> those declarative templates.&quot;</span></p><h2 id='introduction-to-aws-cloudformation'><span>Introduction to AWS CloudFormation</span></h2><p><span>Maya opened the AWS CloudFormation console in her browser.</span></p><p><img src="images/cfn-1.png" referrerpolicy="no-referrer" alt="cfn-1"></p><p><em><span>Screenshot of the CloudFormation console dashboard</span></em></p><p><span>&quot;CloudFormation is AWS&#39;s native Infrastructure as Code service. It allows you to model, provision, and manage AWS and third-party resources by treating infrastructure as code. It uses template files written in either </span><strong><span>JSON</span></strong><span> or </span><strong><span>YAML</span></strong><span> format to define the resources you want to provision.&quot;</span></p><p><span>She opened a simple YAML file in her editor.</span></p><p><span>&quot;A CloudFormation template describes your desired resources and their dependencies so you can launch and configure them together as a stack. The most important section is usually the </span><code>Resources</code><span> section, which defines the AWS resources you want to create (like S3 buckets, EC2 instances, DynamoDB tables, etc.). Each resource has a </span><strong><span>Logical ID</span></strong><span> (a name you give it within the template), a </span><strong><span>Type</span></strong><span> (like </span><code>AWS::S3::Bucket</code><span> or </span><code>AWS::EC2::Instance</code><span>), and </span><strong><span>Properties</span></strong><span> that configure that specific resource.&quot;</span></p><p><span>Maya began typing a simple CloudFormation template in YAML:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="yaml" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="yaml"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">AWSTemplateFormatVersion</span><span class="cm-meta">: </span><span class="cm-string">'2010-09-09'</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">Description</span><span class="cm-meta">: </span><span class="cm-string">'MagicMail Development Asset Storage (Simple)'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">Resources</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># This is the Logical ID for our S3 Bucket resource</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">  MagicMailAssetsBucket</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment"># This specifies the type of AWS resource to create</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp;  Type</span><span class="cm-meta">: </span>AWS<span class="cm-meta">::</span>S3<span class="cm-meta">::</span>Bucket</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment"># These are the specific configurations for the S3 Bucket</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp;  Properties</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment"># We'll make the bucket name more robust later</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp;  BucketName</span><span class="cm-meta">: </span>magicmail-assets-dev-cfn-example</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp;  VersioningConfiguration</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp; &nbsp;  Status</span><span class="cm-meta">: </span>Enabled</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp;  BucketEncryption</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp; &nbsp;  ServerSideEncryptionConfiguration</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta"> &nbsp; &nbsp; &nbsp; &nbsp;  - </span><span class="cm-atom">ServerSideEncryptionByDefault</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  SSEAlgorithm</span><span class="cm-meta">: </span>AES256</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 378px;"></div><div class="CodeMirror-gutters" style="display: none; height: 378px;"></div></div></div></pre><p><span>&quot;This simple template defines just one resource: an S3 bucket named </span><code>magicmail-assets-dev-cfn-example</code><span> with versioning enabled and default server-side encryption (SSE-S3). It&#39;s similar to the bucket we created manually in the last chapter, but now it&#39;s defined in code.&quot;</span></p><h2 id='cloudformation-concepts'><span>CloudFormation Concepts</span></h2><p><span>&quot;Before we deploy this, let&#39;s understand some key CloudFormation concepts,&quot; Maya said, pulling up another diagram.</span></p><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart220" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="flowchart mermaid-svg" style="max-width: 1023.453125px;" viewBox="-8 -8 1023.453125 431" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#mermaidChart220{font-family:sans-serif;font-size:16px;fill:#333;}#mermaidChart220 .error-icon{fill:#552222;}#mermaidChart220 .error-text{fill:#552222;stroke:#552222;}#mermaidChart220 .edge-thickness-normal{stroke-width:1px;}#mermaidChart220 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart220 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart220 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaidChart220 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart220 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart220 .marker{fill:#666;stroke:#666;}#mermaidChart220 .marker.cross{stroke:#666;}#mermaidChart220 svg{font-family:sans-serif;font-size:16px;}#mermaidChart220 p{margin:0;}#mermaidChart220 .label{font-family:sans-serif;color:#333;}#mermaidChart220 .cluster-label text{fill:#333;}#mermaidChart220 .cluster-label span{color:#333;}#mermaidChart220 .cluster-label span p{background-color:transparent;}#mermaidChart220 .label text,#mermaidChart220 span{fill:#333;color:#333;}#mermaidChart220 .node rect,#mermaidChart220 .node circle,#mermaidChart220 .node ellipse,#mermaidChart220 .node polygon,#mermaidChart220 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaidChart220 .rough-node .label text,#mermaidChart220 .node .label text,#mermaidChart220 .image-shape .label,#mermaidChart220 .icon-shape .label{text-anchor:middle;}#mermaidChart220 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaidChart220 .rough-node .label,#mermaidChart220 .node .label,#mermaidChart220 .image-shape .label,#mermaidChart220 .icon-shape .label{text-align:center;}#mermaidChart220 .node.clickable{cursor:pointer;}#mermaidChart220 .root .anchor path{fill:#666!important;stroke-width:0;stroke:#666;}#mermaidChart220 .arrowheadPath{fill:#333333;}#mermaidChart220 .edgePath .path{stroke:#666;stroke-width:2.0px;}#mermaidChart220 .flowchart-link{stroke:#666;fill:none;}#mermaidChart220 .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaidChart220 .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#mermaidChart220 .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaidChart220 .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#mermaidChart220 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaidChart220 .cluster text{fill:#333;}#mermaidChart220 .cluster span{color:#333;}#mermaidChart220 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:sans-serif;font-size:12px;background:#f4f4f4;border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart220 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaidChart220 rect.text{fill:none;stroke-width:0;}#mermaidChart220 .icon-shape,#mermaidChart220 .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaidChart220 .icon-shape p,#mermaidChart220 .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#mermaidChart220 .icon-shape rect,#mermaidChart220 .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaidChart220 :root{--mermaid-alt-font-family:sans-serif;}#mermaidChart220 .template&gt;*{fill:#e1f5fe!important;stroke:#01579b!important;stroke-width:2px!important;}#mermaidChart220 .template span{fill:#e1f5fe!important;stroke:#01579b!important;stroke-width:2px!important;}#mermaidChart220 .stack&gt;*{fill:#e8f5e9!important;stroke:#2e7d32!important;stroke-width:2px!important;}#mermaidChart220 .stack span{fill:#e8f5e9!important;stroke:#2e7d32!important;stroke-width:2px!important;}#mermaidChart220 .resource&gt;*{fill:#fff3e0!important;stroke:#e65100!important;stroke-width:2px!important;}#mermaidChart220 .resource span{fill:#fff3e0!important;stroke:#e65100!important;stroke-width:2px!important;}#mermaidChart220 .changeSet&gt;*{fill:#f3e5f5!important;stroke:#6a1b9a!important;stroke-width:2px!important;}#mermaidChart220 .changeSet span{fill:#f3e5f5!important;stroke:#6a1b9a!important;stroke-width:2px!important;}#mermaidChart220 .policy&gt;*{fill:#ffebee!important;stroke:#b71c1c!important;stroke-width:2px!important;}#mermaidChart220 .policy span{fill:#ffebee!important;stroke:#b71c1c!important;stroke-width:2px!important;}</style><g><marker id="mermaidChart220_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart220_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart220_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart220_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart220_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart220_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M99.586,115.5L99.586,122.25C99.586,129,99.586,142.5,142.516,157.478C185.446,172.456,271.305,188.911,314.235,197.139L357.165,205.367" id="L_A_B_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart220_flowchart-v2-pointEnd)"></path><path d="M361.094,260.261L340.492,266.551C319.889,272.841,278.685,285.42,258.083,295.21C237.48,305,237.48,312,237.48,315.5L237.48,319" id="L_B_C1_1" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart220_flowchart-v2-pointEnd)"></path><path d="M460.905,273L460.078,277.167C459.251,281.333,457.596,289.667,456.769,297.333C455.941,305,455.941,312,455.941,315.5L455.941,319" id="L_B_C2_2" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart220_flowchart-v2-pointEnd)"></path><path d="M578.984,260.261L599.587,266.551C620.189,272.841,661.393,285.42,681.995,295.21C702.598,305,702.598,312,702.598,315.5L702.598,319" id="L_B_C3_3" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart220_flowchart-v2-pointEnd)"></path><path d="M343.469,115.5L343.469,122.25C343.469,129,343.469,142.5,350.315,153.091C357.162,163.681,370.854,171.362,377.701,175.203L384.547,179.043" id="L_D_B_4" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart220_flowchart-v2-pointEnd)"></path><path d="M596.609,115.5L596.609,122.25C596.609,129,596.609,142.5,589.763,153.091C582.917,163.681,569.224,171.362,562.377,175.203L555.531,179.043" id="L_E_B_5" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart220_flowchart-v2-pointEnd)"></path><path d="M877.453,131L877.453,135.167C877.453,139.333,877.453,147.667,828.365,160.388C779.277,173.109,681.101,190.218,632.013,198.773L582.925,207.327" id="L_F_B_6" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart220_flowchart-v2-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default template " id="flowchart-A-3276" transform="translate(99.5859375, 69.5)"><rect class="basic label-container" style="fill:#e1f5fe !important;stroke:#01579b !important;stroke-width:2px !important" x="-91.5859375" y="-46" width="183.171875" height="92"></rect><g class="label" style="" transform="translate(-61.5859375, -31)"><rect></rect><foreignObject width="123.171875" height="62"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Template<br/>JSON/YAML file</p></span></div></foreignObject></g></g><g class="node default stack " id="flowchart-B-3277" transform="translate(470.0390625, 227)"><rect class="basic label-container" style="fill:#e8f5e9 !important;stroke:#2e7d32 !important;stroke-width:2px !important" x="-108.9453125" y="-46" width="217.890625" height="92"></rect><g class="label" style="" transform="translate(-78.9453125, -31)"><rect></rect><foreignObject width="157.890625" height="62"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Stack<br/>Deployed resources</p></span></div></foreignObject></g></g><g class="node default resource " id="flowchart-C1-3279" transform="translate(237.48046875, 369)"><rect class="basic label-container" style="fill:#fff3e0 !important;stroke:#e65100 !important;stroke-width:2px !important" x="-69.8828125" y="-46" width="139.765625" height="92"></rect><g class="label" style="" transform="translate(-39.8828125, -31)"><rect></rect><foreignObject width="79.765625" height="62"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Resource<br/>S3 Bucket</p></span></div></foreignObject></g></g><g class="node default resource " id="flowchart-C2-3281" transform="translate(455.94140625, 369)"><rect class="basic label-container" style="fill:#fff3e0 !important;stroke:#e65100 !important;stroke-width:2px !important" x="-98.578125" y="-46" width="197.15625" height="92"></rect><g class="label" style="" transform="translate(-68.578125, -31)"><rect></rect><foreignObject width="137.15625" height="62"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Resource<br/>Lambda Function</p></span></div></foreignObject></g></g><g class="node default resource " id="flowchart-C3-3283" transform="translate(702.59765625, 369)"><rect class="basic label-container" style="fill:#fff3e0 !important;stroke:#e65100 !important;stroke-width:2px !important" x="-98.078125" y="-46" width="196.15625" height="92"></rect><g class="label" style="" transform="translate(-68.078125, -31)"><rect></rect><foreignObject width="136.15625" height="62"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Resource<br/>DynamoDB Table</p></span></div></foreignObject></g></g><g class="node default changeSet " id="flowchart-D-3284" transform="translate(343.46875, 69.5)"><rect class="basic label-container" style="fill:#f3e5f5 !important;stroke:#6a1b9a !important;stroke-width:2px !important" x="-102.296875" y="-46" width="204.59375" height="92"></rect><g class="label" style="" transform="translate(-72.296875, -31)"><rect></rect><foreignObject width="144.59375" height="62"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Change Set<br/>Proposed updates</p></span></div></foreignObject></g></g><g class="node default policy " id="flowchart-E-3286" transform="translate(596.609375, 69.5)"><rect class="basic label-container" style="fill:#ffebee !important;stroke:#b71c1c !important;stroke-width:2px !important" x="-100.84375" y="-46" width="201.6875" height="92"></rect><g class="label" style="" transform="translate(-70.84375, -31)"><rect></rect><foreignObject width="141.6875" height="62"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Stack Policy<br/>Update protection</p></span></div></foreignObject></g></g><g class="node default changeSet " id="flowchart-F-3288" transform="translate(877.453125, 69.5)"><rect class="basic label-container" style="fill:#f3e5f5 !important;stroke:#6a1b9a !important;stroke-width:2px !important" x="-130" y="-61.5" width="260" height="123"></rect><g class="label" style="" transform="translate(-100, -46.5)"><rect></rect><foreignObject width="200" height="93"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel "><p>Drift Detection<br/>Identifies manual changes</p></span></div></foreignObject></g></g></g></g></g></svg></div><p><em><span>Diagram showing relationship: Template -&gt; Deployed as -&gt; Stack (containing Resources), with arrows for Change Sets and Drift Detection</span></em></p><blockquote><ul><li><p><strong><span>Template:</span></strong><span> The JSON or YAML file containing your infrastructure definition (the code). It describes the resources, their properties, dependencies, parameters, outputs, etc.</span></p></li><li><p><strong><span>Stack:</span></strong><span> When you deploy a template, CloudFormation creates a </span><strong><span>stack</span></strong><span>. A stack is a collection of AWS resources managed as a single unit. You create, update, or delete a stack, and CloudFormation provisions, updates, or deletes the underlying resources accordingly. Think of the template as the blueprint and the stack as the actual building constructed from that blueprint.</span></p></li><li><p><strong><span>Resources:</span></strong><span> The individual AWS components defined within your template and provisioned as part of a stack (e.g., an </span><code>AWS::S3::Bucket</code><span>, an </span><code>AWS::Lambda::Function</code><span>).</span></p></li><li><p><strong><span>Change Sets:</span></strong><span> Before applying updates to an existing stack, you can create a change set. CloudFormation compares your modified template with the currently deployed stack and shows you a preview of exactly what resources will be added, modified, or deleted. This is a crucial safety mechanism to review changes before execution.</span></p></li><li><p><strong><span>Stack Policies:</span></strong><span> Optional JSON documents that protect specified stack resources from unintentional updates or deletions during a stack update.</span></p></li><li><p><strong><span>Drift Detection:</span></strong><span> CloudFormation can detect if resources within a stack have been modified manually (outside of CloudFormation) since the last stack operation. This difference is called </span><code>drift</code><span> and helps identify unintended manual changes.</span></p></li></ul></blockquote><p><span>&quot;So a stack is like a live instance of a template?&quot; Ethan asked.</span></p><p><span>&quot;Exactly. The template is the definition, and the stack is the collection of live AWS resources created based on that definition.&quot;</span></p><h2 id='creating-a-complete-cloudformation-template'><span>Creating a Complete CloudFormation Template</span></h2><p><span>&quot;Let&#39;s enhance our template to be more flexible and robust, incorporating more features we used previously,&quot; Maya said, continuing to edit the YAML file.</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="yaml" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="yaml"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">AWSTemplateFormatVersion</span><span class="cm-meta">: </span><span class="cm-string">'2010-09-09'</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">Description</span><span class="cm-meta">: </span><span class="cm-string">'MagicMail Development Asset Storage Stack'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Parameters allow customization at deployment time</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">Parameters</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">  EnvironmentName</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp;  Description</span><span class="cm-meta">: </span>The environment name (e.g., dev, test, prod)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp;  Type</span><span class="cm-meta">: </span>String</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp;  Default</span><span class="cm-meta">: </span>dev</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp;  AllowedValues</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta"> &nbsp; &nbsp;  - </span>dev</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta"> &nbsp; &nbsp;  - </span>test</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta"> &nbsp; &nbsp;  - </span>prod</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">Resources</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">  MagicMailAssetsBucket</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp;  Type</span><span class="cm-meta">: </span>AWS<span class="cm-meta">::</span>S3<span class="cm-meta">::</span>Bucket</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp;  Properties</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment"># Constructing a globally unique bucket name using parameters and pseudo parameters</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp;  BucketName</span><span class="cm-meta">: </span>!Sub <span class="cm-string">'magicmail-assets-${EnvironmentName}-${AWS::AccountId}'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp;  VersioningConfiguration</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp; &nbsp;  Status</span><span class="cm-meta">: </span>Enabled</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp;  BucketEncryption</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp; &nbsp;  ServerSideEncryptionConfiguration</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta"> &nbsp; &nbsp; &nbsp; &nbsp;  - </span><span class="cm-atom">ServerSideEncryptionByDefault</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  SSEAlgorithm</span><span class="cm-meta">: </span>AES256</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp;  PublicAccessBlockConfiguration</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp; &nbsp;  BlockPublicAcls</span><span class="cm-meta">: </span><span class="cm-keyword">true</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp; &nbsp;  BlockPublicPolicy</span><span class="cm-meta">: </span><span class="cm-keyword">true</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp; &nbsp;  IgnorePublicAcls</span><span class="cm-meta">: </span><span class="cm-keyword">true</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp; &nbsp;  RestrictPublicBuckets</span><span class="cm-meta">: </span><span class="cm-keyword">true</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment"># Adding tags for organization and cost tracking</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp;  Tags</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta"> &nbsp; &nbsp; &nbsp;  - </span><span class="cm-atom">Key</span><span class="cm-meta">: </span>Project</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp; &nbsp; &nbsp;  Value</span><span class="cm-meta">: </span>MagicMail</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta"> &nbsp; &nbsp; &nbsp;  - </span><span class="cm-atom">Key</span><span class="cm-meta">: </span>Environment</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp; &nbsp; &nbsp;  Value</span><span class="cm-meta">: </span>!Ref EnvironmentName <span class="cm-comment"># Reference the parameter value</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Outputs provide information about the created resources</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">Outputs</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">  BucketName</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp;  Description</span><span class="cm-meta">: </span>Name of the S3 bucket created</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp;  Value</span><span class="cm-meta">: </span>!Ref MagicMailAssetsBucket <span class="cm-comment"># Get the physical name of the bucket</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp;  Export</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp;  Name</span><span class="cm-meta">: </span>!Sub <span class="cm-string">'${AWS::StackName}-AssetsBucketName'</span> <span class="cm-comment"># Export for cross-stack reference</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">  BucketArn</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp;  Description</span><span class="cm-meta">: </span>ARN of the S3 bucket created</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp;  Value</span><span class="cm-meta">: </span>!GetAtt MagicMailAssetsBucket.Arn <span class="cm-comment"># Get the ARN attribute of the bucket</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp;  Export</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp;  Name</span><span class="cm-meta">: </span>!Sub <span class="cm-string">'${AWS::StackName}-AssetsBucketArn'</span> <span class="cm-comment"># Export for cross-stack reference</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 1113px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1113px;"></div></div></div></pre><p><span>&quot;I&#39;ve added several important elements,&quot; Maya explained.</span></p><p><span>&quot;First, the </span><code>Parameters</code><span> section. This allows us to pass in values when we deploy the stack, making the template reusable. Here, we define </span><code>EnvironmentName</code><span> which defaults to </span><code>dev</code><span> but can be overridden.&quot;</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="yaml"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="yaml"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">Parameters</span><span class="cm-meta">:</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">  EnvironmentName</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp;  Description</span><span class="cm-meta">: </span>The environment name (e.g., dev, test, prod)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp;  Type</span><span class="cm-meta">: </span>String</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp;  Default</span><span class="cm-meta">: </span>dev</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp;  AllowedValues</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta"> &nbsp; &nbsp;  - </span>dev</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta"> &nbsp; &nbsp;  - </span>test</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta"> &nbsp; &nbsp;  - </span>prod</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 189px;"></div><div class="CodeMirror-gutters" style="display: none; height: 189px;"></div></div></div></pre><p><span>&quot;We use this parameter in the </span><code>BucketName</code><span> property using the </span><code>!Sub</code><span> intrinsic function. </span><code>!Sub</code><span> substitutes variables within a string. We&#39;re also using </span><code>${AWS::AccountId}</code><span>, which is a </span><strong><span>pseudo parameter</span></strong><span> provided by CloudFormation representing the AWS account ID where the stack is being deployed. </span><strong><span>We include the Account ID because S3 bucket names must be globally unique across all AWS accounts</span></strong><span>, so this helps ensure our bucket name doesn&#39;t collide with one in another account. We also include the </span><code>EnvironmentName</code><span> to differentiate buckets between environments (dev, test, prod).&quot;</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="yaml"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="yaml"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp;  BucketName</span><span class="cm-meta">: </span>!Sub <span class="cm-string">'magicmail-assets-${EnvironmentName}-${AWS::AccountId}'</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 21px;"></div><div class="CodeMirror-gutters" style="display: none; height: 21px;"></div></div></div></pre><p><span>&quot;We&#39;ve added the </span><code>PublicAccessBlockConfiguration</code><span> to match the secure settings from the console, and included </span><code>Tags</code><span> using the </span><code>EnvironmentName</code><span> parameter value via the </span><code>!Ref</code><span> function.&quot;</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="yaml"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="yaml"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp;  PublicAccessBlockConfiguration</span><span class="cm-meta">:</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp; &nbsp;  BlockPublicAcls</span><span class="cm-meta">: </span><span class="cm-keyword">true</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp; &nbsp;  BlockPublicPolicy</span><span class="cm-meta">: </span><span class="cm-keyword">true</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp; &nbsp;  IgnorePublicAcls</span><span class="cm-meta">: </span><span class="cm-keyword">true</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp; &nbsp;  RestrictPublicBuckets</span><span class="cm-meta">: </span><span class="cm-keyword">true</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp;  Tags</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta"> &nbsp; &nbsp; &nbsp;  - </span><span class="cm-atom">Key</span><span class="cm-meta">: </span>Project</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp; &nbsp; &nbsp;  Value</span><span class="cm-meta">: </span>MagicMail</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta"> &nbsp; &nbsp; &nbsp;  - </span><span class="cm-atom">Key</span><span class="cm-meta">: </span>Environment</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp; &nbsp; &nbsp;  Value</span><span class="cm-meta">: </span>!Ref EnvironmentName</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 210px;"></div><div class="CodeMirror-gutters" style="display: none; height: 210px;"></div></div></div></pre><p><span>&quot;Finally, the </span><code>Outputs</code><span> section defines values that CloudFormation will display after the stack is created. These outputs can also be </span><strong><span>exported</span></strong><span> (using the </span><code>Export</code><span> field) so they can be referenced by </span><em><span>other</span></em><span> CloudFormation stacks. We&#39;re outputting and exporting the bucket&#39;s actual name and its ARN, which might be needed by other parts of our MagicMail infrastructure later.&quot;</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="yaml"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="yaml"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">Outputs</span><span class="cm-meta">:</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">  BucketName</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp;  Description</span><span class="cm-meta">: </span>Name of the S3 bucket created</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp;  Value</span><span class="cm-meta">: </span>!Ref MagicMailAssetsBucket</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp;  Export</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp;  Name</span><span class="cm-meta">: </span>!Sub <span class="cm-string">'${AWS::StackName}-AssetsBucketName'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">  BucketArn</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp;  Description</span><span class="cm-meta">: </span>ARN of the S3 bucket created</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp;  Value</span><span class="cm-meta">: </span>!GetAtt MagicMailAssetsBucket.Arn</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp;  Export</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp;  Name</span><span class="cm-meta">: </span>!Sub <span class="cm-string">'${AWS::StackName}-AssetsBucketArn'</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 231px;"></div><div class="CodeMirror-gutters" style="display: none; height: 231px;"></div></div></div></pre><p><span>&quot;I see we&#39;re using </span><code>!Ref</code><span>, </span><code>!GetAtt</code><span>, and </span><code>!Sub</code><span>,&quot; Ethan noted.</span></p><p><span>&quot;Good observation,&quot; Maya replied. &quot;These are CloudFormation </span><strong><span>intrinsic functions</span></strong><span> used within templates:</span></p><blockquote><ul><li><p><code>!Ref</code><span>: Returns the value of a parameter (like </span><code>!Ref EnvironmentName</code><span>) or the default identifier of a resource (like </span><code>!Ref MagicMailAssetsBucket</code><span>, which returns the physical bucket name).</span></p></li><li><p><code>!GetAtt</code><span>: Retrieves the value of a specific attribute from a resource (like </span><code>!GetAtt MagicMailAssetsBucket.Arn</code><span> to get the bucket&#39;s ARN). You need to check the CloudFormation documentation for the available attributes for each resource type.</span></p></li><li><p><code>!Sub</code><span>: Substitutes variables in a string. Variables are denoted by </span><code>${VariableName}</code><span>. It can reference parameters, resource logical IDs, resource attributes (using dot notation like </span><code>${MagicMailAssetsBucket.Arn}</code><span>), and pseudo parameters (like </span><code>${AWS::AccountId}</code><span>, </span><code>${AWS::Region}</code><span>, </span><code>${AWS::StackName}</code><span>).</span></p></li></ul></blockquote><p><span>There are other useful intrinsic functions like </span><code>!Join</code><span> (to combine strings), </span><code>!Split</code><span> (to split strings), </span><code>!Select</code><span> (to pick an element from a list), and conditional functions (</span><code>!If</code><span>, </span><code>!Equals</code><span>, </span><code>!Not</code><span>, etc.) that provide more logic within your templates.&quot;</span></p><h2 id='deploying-a-cloudformation-stack-console'><span>Deploying a CloudFormation Stack (Console)</span></h2><p><span>&quot;Now let&#39;s deploy our template using the AWS console to create the S3 bucket,&quot; Maya said, switching to the CloudFormation console.</span></p><p><img src="images/cfn-1.png" referrerpolicy="no-referrer" alt="cfn-1"></p><p><em><span>Screenshot showing the &#39;Create stack&#39; button</span></em></p><p><span>&quot;Click </span><code>Create stack</code><span> (with new resources). Choose </span><code>Template is ready</code><span> and </span><code>Upload a template file</code><span>. Select the YAML file we just created.&quot;</span></p><p><img src="images/cfn-s-2.png" referrerpolicy="no-referrer" alt="cfn-s-2"></p><p><em><span>Screenshot showing the template file uploaded</span></em></p><p><span>&quot;Click </span><code>Next</code><span>. Give your stack a name, like </span><code>magicmail-assets-dev-stack</code><span>. You&#39;ll see the </span><code>EnvironmentName</code><span> parameter with its default value &#39;dev&#39;. You could override it here if needed.&quot;</span></p><p><img src="images/cfn-s-3.png" referrerpolicy="no-referrer" alt="cfn-s-3"></p><p><em><span>Screenshot showing the &#39;Specify stack details&#39; page with Stack name and Parameters section</span></em></p><p><span>&quot;Click </span><code>Next</code><span>. On the &#39;Configure stack options&#39; page, you can add tags </span><em><span>to the stack itself</span></em><span> (separate from resource tags), configure stack policies, rollback behavior, and notification options. We&#39;ll leave these as default for now.&quot;</span></p><p><img src="images/cfn-s-4.png" referrerpolicy="no-referrer" alt="cfn-s-4"></p><p><em><span>Screenshot showing the &#39;Configure stack options&#39; page</span></em></p><p><span>&quot;Click </span><code>Next</code><span>. Review all your choices on the final page. At the bottom, acknowledge that CloudFormation might create IAM resources (though our template doesn&#39;t currently) and click </span><code>Create stack</code><span>.&quot;</span></p><p><img src="images/cfn-s-5.png" referrerpolicy="no-referrer" alt="cfn-s-5"></p><p><em><span>Screenshot showing the final review page before creation</span></em></p><p><span>&quot;CloudFormation now starts provisioning the resources defined in the template. You can monitor the progress in the &#39;Events&#39; tab for the stack.&quot;</span></p><p><img src="images/cfn-s-6.png" referrerpolicy="no-referrer" alt="cfn-s-6"></p><p><em><span>Screenshot showing the CloudFormation stack events during creation, ending with CREATE_COMPLETE for the stack</span></em></p><p><span>&quot;Once the status reaches </span><code>CREATE_COMPLETE</code><span>, navigate to the &#39;Outputs&#39; tab for the stack. You should see the </span><code>BucketName</code><span> and </span><code>BucketArn</code><span> we defined.&quot;</span></p><p><img src="images/cfn-s-7.png" referrerpolicy="no-referrer" alt="cfn-s-7"></p><p><em><span>Screenshot showing the &#39;Outputs&#39; tab with the bucket name and ARN</span></em></p><p><span>&quot;And if we go to the S3 console, we should see our new bucket, named according to the pattern we specified, with versioning enabled and the correct tags.&quot;</span></p><p><img src="images/cfn-s-8.png" referrerpolicy="no-referrer" alt="cfn-s-8"></p><p><em><span>Screenshot of the S3 console showing the created bucket and confirming its properties like name, versioning, tags</span></em></p><h2 id='updating-infrastructure-with-cloudformation'><span>Updating Infrastructure with CloudFormation</span></h2><p><span>&quot;What if we want to modify our infrastructure?&quot; Ethan asked. &quot;Do we have to delete everything and start over?&quot;</span></p><p><span>&quot;Not at all,&quot; Maya replied. &quot;That&#39;s a key benefit of IaC. You modify the code (the template) and redeploy. CloudFormation figures out what changed and applies only those changes. Let&#39;s add a lifecycle rule to our bucket to transition objects to infrequent access storage after 90 days.&quot;</span></p><p><span>Maya updated the </span><code>Properties</code><span> section of the </span><code>MagicMailAssetsBucket</code><span> resource in the template:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="yaml" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="yaml"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">Resources</span><span class="cm-meta">:</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">  MagicMailAssetsBucket</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp;  Type</span><span class="cm-meta">: </span>AWS<span class="cm-meta">::</span>S3<span class="cm-meta">::</span>Bucket</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp;  Properties</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment"># ... (existing properties like BucketName, VersioningConfiguration, etc.) ...</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp;  PublicAccessBlockConfiguration</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment"># ... (existing block public access settings) ...</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp;  Tags</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment"># ... (existing tags) ...</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment"># Add Lifecycle Configuration</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp;  LifecycleConfiguration</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp; &nbsp;  Rules</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta"> &nbsp; &nbsp; &nbsp; &nbsp;  - </span><span class="cm-atom">Id</span><span class="cm-meta">: </span>TransitionToInfrequentAccessRule</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  Status</span><span class="cm-meta">: </span>Enabled</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  Transitions</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  - </span><span class="cm-atom">StorageClass</span><span class="cm-meta">: </span>STANDARD_IA <span class="cm-comment"># Target storage class</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  TransitionInDays</span><span class="cm-meta">: </span>90 &nbsp; &nbsp; <span class="cm-comment"># Days after object creation</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 378px;"></div><div class="CodeMirror-gutters" style="display: none; height: 378px;"></div></div></div></pre><p><span>&quot;This </span><code>LifecycleConfiguration</code><span> block adds a rule to automatically transition objects to the </span><code>STANDARD_IA</code><span> storage class 90 days after they are created, which can help reduce storage costs for older assets.&quot;</span></p><p><span>&quot;Now let&#39;s update our stack. In the CloudFormation console, select the stack (</span><code>magicmail-assets-dev-stack</code><span>) and click </span><code>Update</code><span>.&quot;</span></p><p><img src="images/cfn-change-1.png" referrerpolicy="no-referrer" alt="cfn-change-1"></p><p><em><span>Screenshot showing the &#39;Update&#39; button on the stack details page</span></em></p><p><span>&quot;Choose </span><code>Replace current template</code><span>, upload your modified YAML file, and click </span><code>Next</code><span> through the parameter and stack options pages (we aren&#39;t changing those).&quot;</span></p><p><img src="images/cfn-change-2.png" referrerpolicy="no-referrer" alt="cfn-change-2"></p><p><em><span>Screenshot showing the &#39;Replace current template&#39; option during stack update</span></em></p><p><span>&quot;Before applying the changes, CloudFormation will generate a </span><strong><span>Change Set</span></strong><span>. Review the changes listed – it should show that the </span><code>MagicMailAssetsBucket</code><span> resource will be &#39;Modified&#39; to add the </span><code>LifecycleConfiguration</code><span>.&quot;</span></p><p><img src="images/cfn-change-3.png" referrerpolicy="no-referrer" alt="cfn-change-3"></p><p><em><span>Screenshot showing the Change Set preview, highlighting the modification to the S3 bucket resource</span></em></p><p><span>&quot;This preview step is critical. Always review the change set carefully before executing an update, especially in production. Once you&#39;re satisfied, click </span><code>Update stack</code><span> (or </span><code>Execute change set</code><span> if you created it separately).&quot;</span></p><p><span>&quot;CloudFormation will now apply the update.&quot;</span></p><p><img src="images/cfn-change-4.png" referrerpolicy="no-referrer" alt="cfn-change-4"></p><p><em><span>Screenshot showing the stack status as UPDATE_IN_PROGRESS</span></em></p><p><span>&quot;Once it reaches </span><code>UPDATE_COMPLETE</code><span>, you can verify in the S3 console that the bucket now has the lifecycle rule configured under its &#39;Management&#39; tab.&quot;</span></p><p><img src="images/cfn-change-6.png" referrerpolicy="no-referrer" alt="cfn-change-6"></p><p><em><span>Screenshot of the S3 bucket&#39;s &#39;Management&#39; tab showing the configured lifecycle rule</span></em></p><h2 id='using-the-aws-cli-for-cloudformation'><span>Using the AWS CLI for CloudFormation</span></h2><p><span>&quot;We can also manage CloudFormation stacks entirely from the command line using the AWS CLI,&quot; Maya explained, opening a terminal window. &quot;This is essential for automation and CI/CD pipelines.&quot;</span></p><p><span>&quot;To create a stack using the CLI, you use the </span><code>aws cloudformation deploy</code><span> command. This command conveniently packages creating and updating into one action:&quot;</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Save the template content to a file named magicmail-assets.yaml</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">aws cloudformation deploy \</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-attribute">--template-file</span> magicmail-assets.yaml \</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-attribute">--stack-name</span> magicmail-assets-dev-cli \</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-attribute">--parameter-overrides</span> <span class="cm-def">EnvironmentName</span><span class="cm-operator">=</span>dev \</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-attribute">--tags</span> <span class="cm-def">Project</span><span class="cm-operator">=</span>MagicMail <span class="cm-def">Environment</span><span class="cm-operator">=</span>dev \</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-attribute">--capabilities</span> CAPABILITY_IAM CAPABILITY_NAMED_IAM</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 168px;"></div><div class="CodeMirror-gutters" style="display: none; height: 168px;"></div></div></div></pre><p><span>&quot;Let&#39;s break this down:</span></p><ul><li><p><code>--template-file</code><span>: Specifies the path to your template file.</span></p></li><li><p><code>--stack-name</code><span>: The name for the stack.</span></p></li><li><p><code>--parameter-overrides</code><span>: Allows you to provide values for parameters defined in the template.</span></p></li><li><p><code>--tags</code><span>: Allows you to add tags to the stack itself.</span></p></li><li><p><code>--capabilities</code><span>: Some templates might require explicit acknowledgement of capabilities, such as creating IAM resources (</span><code>CAPABILITY_IAM</code><span> or </span><code>CAPABILITY_NAMED_IAM</code><span>) or macros (</span><code>CAPABILITY_AUTO_EXPAND</code><span>). It&#39;s good practice to include these if your template might create such resources, even if our current one doesn&#39;t create IAM roles directly.</span></p></li></ul><p><span>If the stack doesn&#39;t exist, </span><code>deploy</code><span> creates it. If it </span><em><span>does</span></em><span> exist, </span><code>deploy</code><span> creates and executes a change set to update it based on the template provided.&quot;</span></p><p><span>&quot;To delete a stack via the CLI:&quot;</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">aws cloudformation delete-stack <span class="cm-attribute">--stack-name</span> magicmail-assets-dev-cli</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 21px;"></div><div class="CodeMirror-gutters" style="display: none; height: 21px;"></div></div></div></pre><p><span>&quot;The CLI approach is powerful for scripting and automating your infrastructure deployments.&quot;</span></p><h2 id='cloudformation-best-practices'><span>CloudFormation Best Practices</span></h2><p><span>&quot;Before we move on from CloudFormation, let&#39;s cover some best practices,&quot; Maya said, pulling up another list.</span></p><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart221" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="flowchart mermaid-svg" style="max-width: 594px;" viewBox="-8 -8 594 1283" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#mermaidChart221{font-family:sans-serif;font-size:16px;fill:#333;}#mermaidChart221 .error-icon{fill:#552222;}#mermaidChart221 .error-text{fill:#552222;stroke:#552222;}#mermaidChart221 .edge-thickness-normal{stroke-width:1px;}#mermaidChart221 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart221 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart221 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaidChart221 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart221 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart221 .marker{fill:#333333;stroke:#333333;}#mermaidChart221 .marker.cross{stroke:#333333;}#mermaidChart221 svg{font-family:sans-serif;font-size:16px;}#mermaidChart221 p{margin:0;}#mermaidChart221 .label{font-family:sans-serif;color:#333;}#mermaidChart221 .cluster-label text{fill:#333;}#mermaidChart221 .cluster-label span{color:#333;}#mermaidChart221 .cluster-label span p{background-color:transparent;}#mermaidChart221 .label text,#mermaidChart221 span{fill:#333;color:#333;}#mermaidChart221 .node rect,#mermaidChart221 .node circle,#mermaidChart221 .node ellipse,#mermaidChart221 .node polygon,#mermaidChart221 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaidChart221 .rough-node .label text,#mermaidChart221 .node .label text,#mermaidChart221 .image-shape .label,#mermaidChart221 .icon-shape .label{text-anchor:middle;}#mermaidChart221 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaidChart221 .rough-node .label,#mermaidChart221 .node .label,#mermaidChart221 .image-shape .label,#mermaidChart221 .icon-shape .label{text-align:center;}#mermaidChart221 .node.clickable{cursor:pointer;}#mermaidChart221 .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#mermaidChart221 .arrowheadPath{fill:#333333;}#mermaidChart221 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaidChart221 .flowchart-link{stroke:#333333;fill:none;}#mermaidChart221 .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaidChart221 .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#mermaidChart221 .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaidChart221 .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#mermaidChart221 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaidChart221 .cluster text{fill:#333;}#mermaidChart221 .cluster span{color:#333;}#mermaidChart221 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart221 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaidChart221 rect.text{fill:none;stroke-width:0;}#mermaidChart221 .icon-shape,#mermaidChart221 .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaidChart221 .icon-shape p,#mermaidChart221 .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#mermaidChart221 .icon-shape rect,#mermaidChart221 .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaidChart221 :root{--mermaid-alt-font-family:sans-serif;}</style><g><marker id="mermaidChart221_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart221_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart221_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart221_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart221_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart221_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M150.905,545L174.587,460.583C198.27,376.167,245.635,207.333,275.332,122.917C305.029,38.5,317.057,38.5,323.072,38.5L329.086,38.5" id="L_title_V1_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart221_flowchart-v2-pointEnd)"></path><path d="M154.737,545L177.781,481.667C200.825,418.333,246.912,291.667,273.456,228.333C300,165,307,165,310.5,165L314,165" id="L_title_V2_1" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart221_flowchart-v2-pointEnd)"></path><path d="M163.106,545L184.755,505.333C206.404,465.667,249.702,386.333,274.851,346.667C300,307,307,307,310.5,307L314,307" id="L_title_V3_2" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart221_flowchart-v2-pointEnd)"></path><path d="M188.211,545L205.676,529C223.141,513,258.07,481,279.035,465C300,449,307,449,310.5,449L314,449" id="L_title_V4_3" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart221_flowchart-v2-pointEnd)"></path><path d="M268,591L272.167,591C276.333,591,284.667,591,292.333,591C300,591,307,591,310.5,591L314,591" id="L_title_V5_4" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart221_flowchart-v2-pointEnd)"></path><path d="M183.27,637L201.558,655.583C219.847,674.167,256.423,711.333,278.212,729.917C300,748.5,307,748.5,310.5,748.5L314,748.5" id="L_title_V6_5" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart221_flowchart-v2-pointEnd)"></path><path d="M160.635,637L182.696,681.833C204.757,726.667,248.878,816.333,274.439,861.167C300,906,307,906,310.5,906L314,906" id="L_title_V7_6" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart221_flowchart-v2-pointEnd)"></path><path d="M153.602,637L176.835,705.5C200.068,774,246.534,911,273.267,979.5C300,1048,307,1048,310.5,1048L314,1048" id="L_title_V8_7" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart221_flowchart-v2-pointEnd)"></path><path d="M149.603,637L173.502,731.75C197.402,826.5,245.201,1016,272.6,1110.75C300,1205.5,307,1205.5,310.5,1205.5L314,1205.5" id="L_title_V9_8" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart221_flowchart-v2-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default  " id="flowchart-title-3298" transform="translate(138, 591)"><rect class="basic label-container" style="" x="-130" y="-46" width="260" height="92"></rect><g class="label" style="" transform="translate(-100, -31)"><rect></rect><foreignObject width="200" height="62"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel "><p>CloudFormation Best Practices</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-V1-3300" transform="translate(448, 38.5)"><rect class="basic label-container" style="" x="-114.9140625" y="-30.5" width="229.828125" height="61"></rect><g class="label" style="" transform="translate(-84.9140625, -15.5)"><rect></rect><foreignObject width="169.828125" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>☐ Use version control</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-V2-3302" transform="translate(448, 165)"><rect class="basic label-container" style="" x="-130" y="-46" width="260" height="92"></rect><g class="label" style="" transform="translate(-100, -31)"><rect></rect><foreignObject width="200" height="62"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel "><p>☐ Validate templates before deployment</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-V3-3304" transform="translate(448, 307)"><rect class="basic label-container" style="" x="-130" y="-46" width="260" height="92"></rect><g class="label" style="" transform="translate(-100, -31)"><rect></rect><foreignObject width="200" height="62"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel "><p>☐ Use parameters for flexibility</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-V4-3306" transform="translate(448, 449)"><rect class="basic label-container" style="" x="-130" y="-46" width="260" height="92"></rect><g class="label" style="" transform="translate(-100, -31)"><rect></rect><foreignObject width="200" height="62"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel "><p>☐ Use outputs for cross-stack references</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-V5-3308" transform="translate(448, 591)"><rect class="basic label-container" style="" x="-130" y="-46" width="260" height="92"></rect><g class="label" style="" transform="translate(-100, -31)"><rect></rect><foreignObject width="200" height="62"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel "><p>☐ Review change sets before applying updates</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-V6-3310" transform="translate(448, 748.5)"><rect class="basic label-container" style="" x="-130" y="-61.5" width="260" height="123"></rect><g class="label" style="" transform="translate(-100, -46.5)"><rect></rect><foreignObject width="200" height="93"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel "><p>☐ Keep templates focused on specific resources</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-V7-3312" transform="translate(448, 906)"><rect class="basic label-container" style="" x="-130" y="-46" width="260" height="92"></rect><g class="label" style="" transform="translate(-100, -31)"><rect></rect><foreignObject width="200" height="62"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel "><p>☐ Use descriptive and consistent naming</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-V8-3314" transform="translate(448, 1048)"><rect class="basic label-container" style="" x="-130" y="-46" width="260" height="92"></rect><g class="label" style="" transform="translate(-100, -31)"><rect></rect><foreignObject width="200" height="62"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel "><p>☐ Tag resources for cost tracking and organization</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-V9-3316" transform="translate(448, 1205.5)"><rect class="basic label-container" style="" x="-130" y="-61.5" width="260" height="123"></rect><g class="label" style="" transform="translate(-100, -46.5)"><rect></rect><foreignObject width="200" height="93"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel "><p>☐ Understand and configure deletion policies</p></span></div></foreignObject></g></g></g></g></g></svg></div><p>&nbsp;</p><p><em><span>Graphic summarizing CloudFormation best practices</span></em></p><blockquote><ol start='' ><li><p><strong><span>Use Version Control:</span></strong><span> Store your templates in Git or another version control system.</span></p></li><li><p><strong><span>Validate Templates:</span></strong><span> Use </span><code>aws cloudformation validate-template</code><span> or linters (like </span><code>cfn-lint</code><span>) to catch syntax errors before deployment.</span></p></li><li><p><strong><span>Use Parameters for Flexibility:</span></strong><span> Parameterize environment-specific values (like instance sizes, domain names, environment names) to make templates reusable. Avoid hardcoding values.</span></p></li><li><p><strong><span>Use Outputs for Cross-Stack References:</span></strong><span> Use outputs and exports (</span><code>Export: Name: ...</code><span>) to share resource information between stacks. Use </span><code>!ImportValue</code><span> in other templates to consume exported values.</span></p></li><li><p><strong><span>Review Change Sets:</span></strong><span> Always create and review change sets before updating stacks to understand the impact of your changes.</span></p></li><li><p><strong><span>Keep Templates Focused:</span></strong><span> Break down large, complex infrastructure into smaller, more manageable stacks focused on specific components or lifecycles.</span></p></li><li><p><strong><span>Use Descriptive Naming:</span></strong><span> Use clear logical IDs for resources and meaningful descriptions in parameters, resources, and outputs.</span></p></li><li><p><strong><span>Tag Resources:</span></strong><span> Use tags consistently for cost allocation, automation, and organization.</span></p></li><li><p><strong><span>Understand Deletion Policies:</span></strong><span> Use </span><code>DeletionPolicy: Retain</code><span> on critical stateful resources (like databases or S3 buckets with important data) to prevent accidental data loss when a stack is deleted. The default is often </span><code>Delete</code><span> (except for some resources like non-empty S3 buckets).</span></p></li></ol></blockquote><h2 id='from-cloudformation-to-aws-cdk'><span>From CloudFormation to AWS CDK</span></h2><p><span>&quot;CloudFormation is powerful and fundamental to AWS IaC, but writing and maintaining large JSON or YAML templates can become complex and verbose,&quot; Maya said. &quot;Managing logic, loops, or creating truly reusable components can be challenging.&quot;</span></p><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart222" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="flowchart mermaid-svg" style="max-width: 346px;" viewBox="0 0 346 697" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#mermaidChart222{font-family:sans-serif;font-size:16px;fill:#000000;}#mermaidChart222 .error-icon{fill:#552222;}#mermaidChart222 .error-text{fill:#552222;stroke:#552222;}#mermaidChart222 .edge-thickness-normal{stroke-width:1px;}#mermaidChart222 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart222 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart222 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaidChart222 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart222 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart222 .marker{fill:#666;stroke:#666;}#mermaidChart222 .marker.cross{stroke:#666;}#mermaidChart222 svg{font-family:sans-serif;font-size:16px;}#mermaidChart222 p{margin:0;}#mermaidChart222 .label{font-family:sans-serif;color:#000000;}#mermaidChart222 .cluster-label text{fill:#333;}#mermaidChart222 .cluster-label span{color:#333;}#mermaidChart222 .cluster-label span p{background-color:transparent;}#mermaidChart222 .label text,#mermaidChart222 span{fill:#000000;color:#000000;}#mermaidChart222 .node rect,#mermaidChart222 .node circle,#mermaidChart222 .node ellipse,#mermaidChart222 .node polygon,#mermaidChart222 .node path{fill:#eee;stroke:#999;stroke-width:1px;}#mermaidChart222 .rough-node .label text,#mermaidChart222 .node .label text,#mermaidChart222 .image-shape .label,#mermaidChart222 .icon-shape .label{text-anchor:middle;}#mermaidChart222 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaidChart222 .rough-node .label,#mermaidChart222 .node .label,#mermaidChart222 .image-shape .label,#mermaidChart222 .icon-shape .label{text-align:center;}#mermaidChart222 .node.clickable{cursor:pointer;}#mermaidChart222 .root .anchor path{fill:#666!important;stroke-width:0;stroke:#666;}#mermaidChart222 .arrowheadPath{fill:#333333;}#mermaidChart222 .edgePath .path{stroke:#666;stroke-width:2.0px;}#mermaidChart222 .flowchart-link{stroke:#666;fill:none;}#mermaidChart222 .edgeLabel{background-color:white;text-align:center;}#mermaidChart222 .edgeLabel p{background-color:white;}#mermaidChart222 .edgeLabel rect{opacity:0.5;background-color:white;fill:white;}#mermaidChart222 .labelBkg{background-color:rgba(255, 255, 255, 0.5);}#mermaidChart222 .cluster rect{fill:hsl(0, 0%, 98.9215686275%);stroke:#707070;stroke-width:1px;}#mermaidChart222 .cluster text{fill:#333;}#mermaidChart222 .cluster span{color:#333;}#mermaidChart222 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:sans-serif;font-size:12px;background:#f4f4f4;border:1px solid #707070;border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart222 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#000000;}#mermaidChart222 rect.text{fill:none;stroke-width:0;}#mermaidChart222 .icon-shape,#mermaidChart222 .image-shape{background-color:white;text-align:center;}#mermaidChart222 .icon-shape p,#mermaidChart222 .image-shape p{background-color:white;padding:2px;}#mermaidChart222 .icon-shape rect,#mermaidChart222 .image-shape rect{opacity:0.5;background-color:white;fill:white;}#mermaidChart222 :root{--mermaid-alt-font-family:sans-serif;}#mermaidChart222 .cdk&gt;*{fill:#e3f2fd!important;stroke:#1565c0!important;stroke-width:2px!important;}#mermaidChart222 .cdk span{fill:#e3f2fd!important;stroke:#1565c0!important;stroke-width:2px!important;}#mermaidChart222 .cfn&gt;*{fill:#e8f5e9!important;stroke:#2e7d32!important;stroke-width:2px!important;}#mermaidChart222 .cfn span{fill:#e8f5e9!important;stroke:#2e7d32!important;stroke-width:2px!important;}#mermaidChart222 .aws&gt;*{fill:#fff8e1!important;stroke:#ff8f00!important;stroke-width:2px!important;}#mermaidChart222 .aws span{fill:#fff8e1!important;stroke:#ff8f00!important;stroke-width:2px!important;}</style><g><marker id="mermaidChart222_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart222_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart222_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart222_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart222_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart222_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"><g class="cluster " id="subGraph2" data-look="classic"><rect style="" x="8" y="516" width="330" height="173"></rect><g class="cluster-label " transform="translate(105.5625, 516)"><foreignObject width="134.875" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Cloud Resources</p></span></div></foreignObject></g></g><g class="cluster " id="subGraph1" data-look="classic"><rect style="" x="45.6015625" y="231" width="254.796875" height="173"></rect><g class="cluster-label " transform="translate(85.6171875, 231)"><foreignObject width="174.765625" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Infrastructure as Code</p></span></div></foreignObject></g></g><g class="cluster " id="subGraph0" data-look="classic"><rect style="" x="9.53125" y="8" width="326.9375" height="142"></rect><g class="cluster-label " transform="translate(85.9609375, 8)"><foreignObject width="174.078125" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Developer Experience</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path d="M173,125L173,129.167C173,133.333,173,141.667,173,152.583C173,163.5,173,177,173,190.5C173,204,173,217.5,173,227.75C173,238,173,245,173,248.5L173,252" id="L_A_B_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart222_flowchart-v2-pointEnd)"></path><path d="M173,379L173,383.167C173,387.333,173,395.667,173,409.167C173,422.667,173,441.333,173,460C173,478.667,173,497.333,173,510.167C173,523,173,530,173,533.5L173,537" id="L_B_C_1" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart222_flowchart-v2-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel" transform="translate(173, 190.5)"><g class="label" transform="translate(-37.9375, -15.5)"><foreignObject width="75.875" height="31"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "><p>cdk synth</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(173, 460)"><g class="label" transform="translate(-62.3984375, -31)"><foreignObject width="124.796875" height="62"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "><p>cdk deploy or<br/>CloudFormation</p></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default cdk " id="flowchart-A-3317" transform="translate(173, 79)"><rect class="basic label-container" style="fill:#e3f2fd !important;stroke:#1565c0 !important;stroke-width:2px !important" x="-128.46875" y="-46" width="256.9375" height="92"></rect><g class="label" style="" transform="translate(-98.46875, -31)"><rect></rect><foreignObject width="196.9375" height="62"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>AWS CDK Code<br/>(TypeScript, Python, etc.)</p></span></div></foreignObject></g></g><g class="node default cfn " id="flowchart-B-3318" transform="translate(173, 317.5)"><rect class="basic label-container" style="fill:#e8f5e9 !important;stroke:#2e7d32 !important;stroke-width:2px !important" x="-92.3984375" y="-61.5" width="184.796875" height="123"></rect><g class="label" style="" transform="translate(-62.3984375, -46.5)"><rect></rect><foreignObject width="124.796875" height="93"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>CloudFormation<br/>Template<br/>(JSON/YAML)</p></span></div></foreignObject></g></g><g class="node default aws " id="flowchart-C-3320" transform="translate(173, 602.5)"><rect class="basic label-container" style="fill:#fff8e1 !important;stroke:#ff8f00 !important;stroke-width:2px !important" x="-130" y="-61.5" width="260" height="123"></rect><g class="label" style="" transform="translate(-100, -46.5)"><rect></rect><foreignObject width="200" height="93"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel "><p>AWS Resources<br/>(S3, Lambda, DynamoDB, etc.)</p></span></div></foreignObject></g></g></g></g></g></svg></div><p><em><span>Diagram showing CDK code -&gt; (Synth) -&gt; CloudFormation Template -&gt; (Deploy) -&gt; AWS Resources</span></em></p><p><span>&quot;That&#39;s where the </span><strong><span>AWS Cloud Development Kit (CDK)</span></strong><span> comes in. CDK lets you define your infrastructure using familiar programming languages like TypeScript, Python, Java, C#, or Go. Your CDK code </span><em><span>generates</span></em><span> CloudFormation templates behind the scenes, but you get the full power of a real programming language.&quot;</span></p><p><span>&quot;This means you can:</span></p><blockquote><ul><li><p><span>Use variables, loops, conditionals, functions, classes, and inheritance.</span></p></li><li><p><span>Create strongly-typed, reusable infrastructure components (called Constructs).</span></p></li><li><p><span>Benefit from IDE features like autocompletion and inline documentation.</span></p></li><li><p><span>Write unit tests for your infrastructure code.</span></p></li><li><p><span>Often write significantly less code compared to raw CloudFormation for the same result, thanks to higher-level abstractions provided by CDK.&quot;</span></p></li></ul></blockquote><p><span>&quot;In our next session, we&#39;ll dive into TypeScript fundamentals, which will prepare us to use CDK effectively for building MagicMail&#39;s infrastructure in a much more expressive way.&quot;</span></p><h2 id='cleaning-up-and-next-steps'><span>Cleaning Up and Next Steps</span></h2><p><span>&quot;Let&#39;s clean up the resources we created today to avoid any unnecessary charges,&quot; Maya said, navigating back to the CloudFormation console.</span></p><p><img src="images/cfn-delete-1.png" referrerpolicy="no-referrer" alt="cfn-delete-1"></p><p><em><span>Screenshot showing the &#39;Delete&#39; button for a selected stack</span></em></p><p><span>&quot;Select the stack we created (</span><code>magicmail-assets-dev-stack</code><span> or </span><code>magicmail-assets-dev-cli</code><span>) and click </span><code>Delete</code><span>. Confirm the deletion.&quot;</span></p><p><img src="images/cfn-delete-2.png" referrerpolicy="no-referrer" alt="cfn-delete-2"></p><p><em><span>Screenshot showing the stack status as DELETE_IN_PROGRESS</span></em></p><p><span>&quot;CloudFormation will now delete the resources managed by the stack, including the S3 bucket (since we didn&#39;t set a </span><code>DeletionPolicy: Retain</code><span>).&quot;</span></p><p><span>&quot;For homework, I&#39;d like you to browse the CloudFormation documentation for a few other resource types we&#39;ll likely use later, like </span><code>AWS::Lambda::Function</code><span> and </span><code>AWS::DynamoDB::Table</code><span>. Just look at their properties to get a feel for how different resources are defined in CloudFormation templates. Don&#39;t worry about understanding every detail yet.&quot;</span></p><p><span>Ethan nodded, closing his notebook. &quot;I&#39;m starting to see the power of defining infrastructure in code. CloudFormation seems capable, but I can already imagine how using a real programming language with CDK will make things even better.&quot;</span></p><p><span>&quot;Exactly,&quot; Maya smiled. &quot;CloudFormation is the engine, and CDK provides a more developer-friendly way to interact with it. Mastering IaC is a key skill for cloud development, and you&#39;re well on your way.&quot;</span></p><h2 id='ethans-homework'><span>Ethan&#39;s Homework</span></h2><blockquote><ol start='' ><li><p><span>Review the CloudFormation template created in this chapter. Identify the </span><code>Parameters</code><span>, </span><code>Resources</code><span>, and </span><code>Outputs</code><span> sections.</span></p></li><li><p><span>Look up the CloudFormation documentation for </span><code>AWS::Lambda::Function</code><span>. What are some key properties required to define a Lambda function? (e.g., Handler, Role, Code, Runtime).</span></p></li><li><p><span>Look up the CloudFormation documentation for </span><code>AWS::DynamoDB::Table</code><span>. What properties are needed to define the primary key? (e.g., KeySchema, AttributeDefinitions).</span></p></li><li><p><span>(Optional) Try deploying the final template from this chapter using the AWS CLI </span><code>aws cloudformation deploy</code><span> command, then delete it using </span><code>aws cloudformation delete-stack</code><span>.</span></p></li></ol></blockquote><h2 id='key-takeaways'><span>Key Takeaways</span></h2><blockquote><ul><li><p><span>Infrastructure as Code (IaC) manages infrastructure through code, offering consistency, automation, version control, and scalability.</span></p></li><li><p><span>AWS CloudFormation is AWS&#39;s native declarative IaC service using JSON or YAML </span><strong><span>Templates</span></strong><span>.</span></p></li><li><p><span>Templates define </span><strong><span>Resources</span></strong><span>, </span><strong><span>Parameters</span></strong><span>, and </span><strong><span>Outputs</span></strong><span>. Deployed templates create </span><strong><span>Stacks</span></strong><span>.</span></p></li><li><p><strong><span>Change Sets</span></strong><span> provide crucial previews before updating stacks.</span></p></li><li><p><span>CloudFormation </span><strong><span>intrinsic functions</span></strong><span> (</span><code>!Ref</code><span>, </span><code>!GetAtt</code><span>, </span><code>!Sub</code><span>, etc.) add logic to templates.</span></p></li><li><p><span>Stacks can be managed via the AWS Console or the AWS CLI (</span><code>deploy</code><span>, </span><code>delete-stack</code><span>).</span></p></li><li><p><span>Following best practices (version control, validation, parameters, outputs, change sets, focused stacks, </span><code>DeletionPolicy</code><span>) is vital.</span></p></li><li><p><span>AWS CDK builds upon CloudFormation, allowing infrastructure definition in programming languages for greater expressiveness and reusability.</span></p></li></ul></blockquote><h2 id='looking-ahead'><span>Looking Ahead</span></h2><p><span>In the next chapter, Maya will introduce Ethan to TypeScript fundamentals, covering the essential programming concepts needed to effectively use the AWS CDK for building MagicMail&#39;s infrastructure.</span></p><h2 id='aws-services-introduced'><span>AWS Services Introduced</span></h2><blockquote><ul><li><p><span>No new services (focused on CloudFormation concepts).</span></p></li></ul></blockquote></div></div>
</body>
</html>