<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>

<link href='https://fonts.googleapis.com/css?family=Merriweather:900,900italic,300,300italic&subset=latin-ext' rel='stylesheet' type='text/css' /><link href='https://fonts.googleapis.com/css?family=Lato:900,300&subset=latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --mermaid-theme: default; --mermaid-sequence-numbers: off; --mermaid-flowchart-curve: linear; --mermaid--gantt-left-padding: 75; --sequence-theme: simple; }
.privacy { display: none; }


:root { --bg-color: #ffffff; --text-color: #333333; --select-text-bg-color: #B5D6FC; --select-text-font-color: auto; --monospace: "Lucida Console",Consolas,"Courier",monospace; --title-bar-height: 20px; }
.mac-os-11 { --title-bar-height: 28px; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
h1, h2, h3, h4, h5 { white-space: pre-wrap; }
body { margin: 0px; padding: 0px; height: auto; inset: 0px; font-size: 1rem; line-height: 1.428571; overflow-x: hidden; background: inherit; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 36px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
.typora-export .task-list-item input { pointer-events: none; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; image-orientation: from-image; }
button, input, select, textarea { color: inherit; font-style: inherit; font-variant-caps: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; font-size-adjust: inherit; font-kerning: inherit; font-variant-alternates: inherit; font-variant-ligatures: inherit; font-variant-numeric: inherit; font-variant-east-asian: inherit; font-variant-position: inherit; font-variant-emoji: inherit; font-feature-settings: inherit; font-optical-sizing: inherit; font-variation-settings: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; position: relative; }
#write svg h1, #write svg h2, #write svg h3, #write svg h4, #write svg h5, #write svg h6, #write svg p { position: static; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 4; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px; }
thead, tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right-width: 0px; border-right-style: none; border-right-color: currentcolor; background-color: inherit; }
.CodeMirror-linenumber { -webkit-user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-fences-adv-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
svg { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li blockquote { margin: 1rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; font-variant-ligatures: no-common-ligatures; }
  #write { margin-top: 0px; border-color: transparent !important; padding-top: 0px !important; padding-bottom: 0px !important; }
  .typora-export * { print-color-adjust: exact; }
  .typora-export #write { break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  .is-mac table { break-inside: avoid; }
  #write > p:nth-child(1) { margin-top: 0px; }
  .typora-export-show-outline .typora-export-sidebar { display: none; }
  figure { overflow-x: visible; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
#write.first-line-indent p > .md-image:only-child:not(.md-img-error) img { left: -2em; position: relative; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
.MathJax_ref { fill: currentcolor; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: medium; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.reversefootnote { font-family: ui-monospace, sans-serif; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.6; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: medium !important; border-style: none !important; border-color: currentcolor !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom-width: 0px; border-bottom-style: none; border-bottom-color: currentcolor; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: medium; }
.highlight td, .highlight tr { border: 0px; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
.md-expand mark .md-meta { opacity: 0.3 !important; }
mark .md-meta { color: rgb(0, 0, 0); }
@media print {
  .typora-export h1, .typora-export h2, .typora-export h3, .typora-export h4, .typora-export h5, .typora-export h6 { break-inside: avoid; }
}
.md-diagram-panel .messageText { stroke: none !important; }
.md-diagram-panel .start-state { fill: var(--node-fill); }
.md-diagram-panel .edgeLabel rect { opacity: 1 !important; }
.md-fences.md-fences-math { font-size: 1em; }
.md-fences-advanced:not(.md-focus) { padding: 0px; white-space: nowrap; border: 0px; }
.md-fences-advanced:not(.md-focus) { background: inherit; }
.mermaid-svg { margin: auto; }
.typora-export-show-outline .typora-export-content { max-width: 1440px; margin: auto; display: flex; flex-direction: row; }
.typora-export-sidebar { width: 300px; font-size: 0.8rem; margin-top: 80px; margin-right: 18px; }
.typora-export-show-outline #write { --webkit-flex: 2; flex: 2 1 0%; }
.typora-export-sidebar .outline-content { position: fixed; top: 0px; max-height: 100%; overflow: hidden auto; padding-bottom: 30px; padding-top: 60px; width: 300px; }
@media screen and (max-width: 1024px) {
  .typora-export-sidebar, .typora-export-sidebar .outline-content { width: 240px; }
}
@media screen and (max-width: 800px) {
  .typora-export-sidebar { display: none; }
}
.outline-content li, .outline-content ul { margin-left: 0px; margin-right: 0px; padding-left: 0px; padding-right: 0px; list-style: none; overflow-wrap: anywhere; }
.outline-content ul { margin-top: 0px; margin-bottom: 0px; }
.outline-content strong { font-weight: 400; }
.outline-expander { width: 1rem; height: 1.428571rem; position: relative; display: table-cell; vertical-align: middle; cursor: pointer; padding-left: 4px; }
.outline-expander::before { content: ""; position: relative; font-family: Ionicons; display: inline-block; font-size: 8px; vertical-align: middle; }
.outline-item { padding-top: 3px; padding-bottom: 3px; cursor: pointer; }
.outline-expander:hover::before { content: ""; }
.outline-h1 > .outline-item { padding-left: 0px; }
.outline-h2 > .outline-item { padding-left: 1em; }
.outline-h3 > .outline-item { padding-left: 2em; }
.outline-h4 > .outline-item { padding-left: 3em; }
.outline-h5 > .outline-item { padding-left: 4em; }
.outline-h6 > .outline-item { padding-left: 5em; }
.outline-label { cursor: pointer; display: table-cell; vertical-align: middle; text-decoration: none; color: inherit; }
.outline-label:hover { text-decoration: underline; }
.outline-item:hover { border-color: rgb(245, 245, 245); background-color: var(--item-hover-bg-color); }
.outline-item:hover { margin-left: -28px; margin-right: -28px; border-left-width: 28px; border-left-style: solid; border-left-color: transparent; border-right-width: 28px; border-right-style: solid; border-right-color: transparent; }
.outline-item-single .outline-expander::before, .outline-item-single .outline-expander:hover::before { display: none; }
.outline-item-open > .outline-item > .outline-expander::before { content: ""; }
.outline-children { display: none; }
.info-panel-tab-wrapper { display: none; }
.outline-item-open > .outline-children { display: block; }
.typora-export .outline-item { padding-top: 1px; padding-bottom: 1px; }
.typora-export .outline-item:hover { margin-right: -8px; border-right-width: 8px; border-right-style: solid; border-right-color: transparent; }
.typora-export .outline-expander::before { content: "+"; font-family: inherit; top: -1px; }
.typora-export .outline-expander:hover::before, .typora-export .outline-item-open > .outline-item > .outline-expander::before { content: "−"; }
.typora-export-collapse-outline .outline-children { display: none; }
.typora-export-collapse-outline .outline-item-open > .outline-children, .typora-export-no-collapse-outline .outline-children { display: block; }
.typora-export-no-collapse-outline .outline-expander::before { content: "" !important; }
.typora-export-show-outline .outline-item-active > .outline-item .outline-label { font-weight: 700; }
.md-inline-math-container mjx-container { zoom: 0.95; }
mjx-container { break-inside: avoid; }
.md-alert.md-alert-note { border-left-color: rgb(9, 105, 218); }
.md-alert.md-alert-important { border-left-color: rgb(130, 80, 223); }
.md-alert.md-alert-warning { border-left-color: rgb(154, 103, 0); }
.md-alert.md-alert-tip { border-left-color: rgb(31, 136, 61); }
.md-alert.md-alert-caution { border-left-color: rgb(207, 34, 46); }
.md-alert { padding: 0px 1em; margin-bottom: 16px; color: inherit; border-left-width: 0.25em; border-left-style: solid; border-left-color: rgb(0, 0, 0); }
.md-alert-text-note { color: rgb(9, 105, 218); }
.md-alert-text-important { color: rgb(130, 80, 223); }
.md-alert-text-warning { color: rgb(154, 103, 0); }
.md-alert-text-tip { color: rgb(31, 136, 61); }
.md-alert-text-caution { color: rgb(207, 34, 46); }
.md-alert-text { font-size: 0.9rem; font-weight: 700; }
.md-alert-text svg { fill: currentcolor; position: relative; top: 0.125em; margin-right: 1ch; overflow: visible; }
.md-alert-text-container::after { content: attr(data-text); text-transform: capitalize; pointer-events: none; margin-right: 1ch; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; outline: 0px; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: auto hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 10px; z-index: 3; overflow-y: hidden; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: medium !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; overflow-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { overflow-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right-width: 30px; border-right-style: solid; border-right-color: transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right-width: medium; border-right-style: none; border-right-color: currentcolor; width: auto; }
.CodeMirror-linebackground { position: absolute; inset: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right-width: medium; border-right-style: none; border-right-color: currentcolor; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
span.cm-underlined { text-decoration: underline; }
span.cm-strikethrough { text-decoration: line-through; }
.cm-tw-syntaxerror { color: rgb(255, 255, 255); background-color: rgb(153, 0, 0); }
.cm-tw-deleted { text-decoration: line-through; }
.cm-tw-header5 { font-weight: 700; }
.cm-tw-listitem:first-child { padding-left: 10px; }
.cm-tw-box { border-style: solid; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-color: inherit; border-top-width: 0px !important; }
.cm-tw-underline { text-decoration: underline; }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


@include-when-export url(https://fonts.googleapis.com/css?family=Merriweather:900,900italic,300,300italic&subset=latin-ext);
@include-when-export url(https://fonts.googleapis.com/css?family=Lato:900,300&subset=latin-ext);

:root {
	--control-text-color: #777;
}

/**
 * forked from pixyll.com
 * MIT license
 */

h1,
.h1,
.f1 {
	font-size: 2rem;
	line-height: 2.5rem;
}
h2,
.h2,
.f2 {
	font-size: 1.5rem;
	line-height: 2rem;
}
h3,
.h3,
.f3 {
	font-size: 1.25rem;
	line-height: 1.5rem;
}
p,
.p,
.f4,
h4,
h5,
h6,
dl,
ol,
ul,
pre[cid],
div[cid],
#typora-source {
	font-size: 1.125rem;
	line-height: 1.5rem;
}

h4 {
	font-size: 1.13rem;
}
/*
 Pixyll
 A simple, beautiful theme for Jekyll that emphasizes content rather than aesthetic fluff.
 Best served with BASSCSS (http://jxnblk.github.io/basscss)
 Crafted with <3 by John Otander (@4lpine) - ©2015 John Otander MIT License http://opensource.org/licenses/MIT

*/

body {
	font-family: "Merriweather", "PT Serif", Georgia, "Times New Roman", "STSong", 'Segoe UI Emoji', Serif;
	line-height: 1.5rem;
	font-weight: 400;
}

#write {
	max-width: 914px;
	color: #333;
}

@media only screen and (min-width: 1400px) {
	#write {
		max-width: 1100px;
	}
}

@media only screen and (min-width: 1700px) {
	#write {
		max-width: 1200px;
	}
}

img {
	width: auto;
	max-width: 100%;
}
body {
	font-size: 1.5rem;
	box-sizing: border-box;
	-moz-box-sizing: border-box;
	-webkit-box-sizing: border-box;
}

.ty-table-edit {
	background: #ededed;
}

table {
	width: 100%;
	font-size: 1.125rem;
}
table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td,
table > tfoot > tr > th,
table > tfoot > tr > td {
	padding: 12px;
	line-height: 1.2;
	vertical-align: top;
	border-top: 1px solid #333;
}
table > thead > tr > th {
	vertical-align: bottom;
	border-bottom: 2px solid #333;
}
table > caption + thead > tr:first-child > th,
table > caption + thead > tr:first-child > td,
table > colgroup + thead > tr:first-child > th,
table > colgroup + thead > tr:first-child > td,
table > thead:first-child > tr:first-child > th,
table > thead:first-child > tr:first-child > td {
	border-top: 0;
}
table > tbody + tbody {
	border-top: 2px solid #333;
}
p {
	font-weight: 300;
	line-height: 1.5;
}
abbr {
	border-bottom: 1px black dotted;
	cursor: help;
}
pre,
code {
	font-family: Menlo, Monaco, "Courier New", monospace;
}

code,
.md-fences  {
	color: #7a7a7a;
}

.md-fences {
	padding: 1.125em;
	margin-bottom: 0.88em;
	font-size: 1rem;
	border: 1px solid #7a7a7a;
	padding-bottom: 0.5rem;
	padding-top: 0.5rem;
}

blockquote {
	padding: 1.33em;
	font-style: italic;
	border-left: 5px solid #7a7a7a;
	color: #555;
}
blockquote em {
	color: #000;
}
blockquote footer {
	font-size: .85rem;
	font-style: normal;
	background-color: #fff;
	color: #7a7a7a;
	border-color: transparent;
}
h1,
.h1,
h2,
.h2,
h3,
.h3,
h4,
.h4,
h5,
.h5,
h6,
.h6 {
	font-family: "Lato", 'Helvetica Neue', Helvetica, sans-serif;
	font-weight: bold;
	line-height: 1.2;
	margin: 1em 0 0.5em;
}
@media screen and (min-width: 48em) {
	.h1,
	h1 {
		font-size: 3.250rem;
	}
	.h2,
	h2 {
		font-size: 2.298rem;
	}
	.h3,
	h3 {
		font-size: 1.625rem;
	}
	.h4,
	h4 {
		font-size: 1.3rem;
	}
	#write>h4.md-focus:before,
	#write>h5.md-focus:before,
	#write>h6.md-focus:before{
		top: 1px;
	}
	.p,
	p,
	li {
		font-size: 1.25rem;
		line-height: 1.8;
	}
	table {
		font-size: 1.25rem;
	}
}
@media (max-width: 48em) {
	blockquote {
		margin-left: 1rem;
		margin-right: 0;
		padding: 0.5em;
	}
	.h1,
	h1 {
		font-size: 2.827rem;
	}
	.h2,
	h2 {
		font-size: 1.999rem;
	}
	.h3,
	h3 {
		font-size: 1.413rem;
	}
	.h4,
	h4 {
		font-size: 1.3rem;
	}
}
@media screen and (min-width: 64em) {
	.h1,
	h1 {
		font-size: 4.498rem;
	}
	.h2,
	h2 {
		font-size: 2.29rem;
	}
	.h3,
	h3 {
		font-size: 1.9rem;
	}
	.h4,
	h4 {
		font-size: 1.591rem;
	}
	#write>h4.md-focus:before{
		top:4px;
	}
}
a {
	color: #463F5C;
	text-decoration: underline;
}

#write {
	padding-top: 2rem;
}

#write pre.md-meta-block {
	min-height: 35px;
	padding: 0.5em 1em;
	white-space: pre;
	border: 0px;

	border-left: 30px #f8f8f8 solid;
	border-right: 30px #f8f8f8 solid;
	width: 100vw;
	max-width: calc(100% + 60px);

	margin-left: -30px;
	margin-bottom: 2em;
	margin-top: -2010px;
	padding-top: 2000px;
	padding-bottom: 10px;
	line-height: 1.5em;
	color: #7a7a7a;
	background-color: #fafafa;
	font-family: 'Lato', 'Helvetica Neue', Helvetica, sans-serif;
	font-weight: 300;
	clear: both;
	padding-left: 0;
	font-size:1.125rem;
}
.md-image>.md-meta {
	color: #463F5C
}
.footnotes {
	font-size:1.1rem;
}
.md-tag {
	font-family: 'Lato', 'Helvetica Neue', Helvetica, sans-serif;
}
.code-tooltip {
	background: white;
}
.code-tooltip-content {
	font-size: 1.1rem;
}

.task-list{
	padding-left: 0;
}

.md-task-list-item {
	padding-left:34px;
}

.md-task-list-item > input{
	width: 1.25rem;
	height: 1.25rem;
	display: block;
	-webkit-appearance: initial;
	top: -0.2rem;
	margin-left: -1.6em;
	margin-top: calc(1rem - 7px);
	border: none;
}

.md-task-list-item > input:focus{
	outline: none;
	box-shadow: none;
}

.md-task-list-item > input:before{
	border: 1px solid #555;
	border-radius: 1.5rem;
	width: 1.5rem;
	height: 1.5rem;
	background: #fff;
	content: ' ';
	transition: background-color 200ms ease-in-out;
	display: block;
}

.md-task-list-item > input:checked:before,
.md-task-list-item > input[checked]:before{
	background: #333;
	border-width: 2px;
	display:inline-block;
	transition: background-color 200ms ease-in-out;
}

.md-task-list-item > input:checked:after,
.md-task-list-item > input[checked]:after {
	opacity: 1;
}

.md-task-list-item > input:after {
	opacity: 1;
	-webkit-transition: opacity 0.05s ease-in-out;
	-moz-transition: opacity 0.05s ease-in-out;
	transition: opacity 0.05s ease-in-out;
	-webkit-transform: rotate(-45deg);
	-moz-transform: rotate(-45deg);
	transform: rotate(-45deg);
	position: absolute;
	top: 0.4375rem;
	left: 0.28125rem;
	width: 0.9375rem;
	height: 0.5rem;
	border: 3px solid #fff;
	border-top: 0;
	border-right: 0;
	content: ' ';
	opacity: 0;
}

.md-tag {
	color:inherit;
}

.md-toc:focus .md-toc-content{
	margin-top: 19px;
}

#typora-sidebar {
	font-size:1rem !important;
}

.html-for-mac #typora-sidebar {
	background-color:white;
}

.outline-content li, .outline-content ul {
	font-size:1rem !important;
}

.outline-title {
	line-height: inherit;
	margin-top: 10px;
}

.outline-expander {
	width: 18px;
}

.outline-expander:before {
 	content: "+";
	font-family: inherit;
	color: rgb(108, 108, 108); 
  font-size: 1.5rem;
 	top: -0.1rem;
}

.outline-expander:hover:before {
	content: "+";
}

.outline-item-open>.outline-item>.outline-expander:before{
	content: "-";
}

/** source code mode */
#typora-source {
	font-family: Courier, monospace;
    color: #6A6A6A;
}

.os-windows #typora-source {
	font-family: inherit;
}

.cm-s-typora-default .cm-header, 
.cm-s-typora-default .cm-property,
.CodeMirror.cm-s-typora-default div.CodeMirror-cursor {
	color: #428bca;
}

.cm-s-typora-default .cm-atom, .cm-s-typora-default .cm-number {
	color: #777777;
}

.md-diagram-panel {
	margin-top: 24px;
	margin-left: -1.2em;
}

.md-mathjax-midline {
	background: #fafafa;
}

.enable-diagrams pre.md-fences[lang="sequence"] .code-tooltip,
.enable-diagrams pre.md-fences[lang="flow"] .code-tooltip,
.enable-diagrams pre.md-fences[lang="mermaid"] .code-tooltip {
    bottom: -3.4em;
}

.dropdown-menu .divider {
	border-color: #e5e5e5;
}

li {
	margin: 0.5rem 0;
}

li > *:last-child {
	margin-bottom: 0;
}

p img + em {
  display: block;
  text-align: center;
  font-size: 0.85em;
  color: gray;
  margin-top: 4px;
}


 @media print { @page {margin: 0 0 0 0;} body.typora-export {padding-left: 0; padding-right: 0;} #write {padding:0;}}
</style><title>Chapter6</title>
</head>
<body class='typora-export'><div class='typora-export-content'>
<div id='write'  class=''><h1 id='chapter-6'><span>Chapter 6</span></h1><h2 id='cdk-fundamentals'><span>CDK Fundamentals</span></h2><p><em><span>Maya had reserved a larger conference room for their sixth session. As Ethan arrived, he noticed she had already set up her laptop, but there was also a large whiteboard filled with diagrams showing the architectural hierarchy of something called &quot;Constructs&quot;.</span></em></p><hr /><p><span>&quot;Today&#39;s the day we finally start working with the AWS CDK,&quot; Maya said with a smile as Ethan took his seat. &quot;Now that you understand TypeScript and the basics of Infrastructure as Code, we&#39;re ready to put those skills to work.&quot;</span></p><p><span>Ethan opened his laptop eagerly. &quot;I&#39;ve been looking forward to this. After all our preparation, I&#39;m excited to see how CDK actually works.&quot;</span></p><p><span>&quot;That&#39;s the spirit,&quot; Maya nodded. &quot;We&#39;ll start by understanding the fundamental concepts of CDK, and then we&#39;ll recreate our S3 bucket from Chapter 3—but this time using TypeScript and CDK instead of the console or raw CloudFormation templates.&quot;</span></p><p><span>She pointed to the diagrams on the whiteboard. &quot;By the end of today, you&#39;ll understand how CDK projects are structured, what constructs are, and how to write CDK code to create real AWS resources.&quot;</span></p><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart229" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="flowchart mermaid-svg" style="max-width: 1113.78125px;" viewBox="-8 -8 1113.78125 751" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#mermaidChart229{font-family:sans-serif;font-size:16px;fill:#333;}#mermaidChart229 .error-icon{fill:#552222;}#mermaidChart229 .error-text{fill:#552222;stroke:#552222;}#mermaidChart229 .edge-thickness-normal{stroke-width:1px;}#mermaidChart229 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart229 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart229 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaidChart229 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart229 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart229 .marker{fill:#333333;stroke:#333333;}#mermaidChart229 .marker.cross{stroke:#333333;}#mermaidChart229 svg{font-family:sans-serif;font-size:16px;}#mermaidChart229 p{margin:0;}#mermaidChart229 .label{font-family:sans-serif;color:#333;}#mermaidChart229 .cluster-label text{fill:#333;}#mermaidChart229 .cluster-label span{color:#333;}#mermaidChart229 .cluster-label span p{background-color:transparent;}#mermaidChart229 .label text,#mermaidChart229 span{fill:#333;color:#333;}#mermaidChart229 .node rect,#mermaidChart229 .node circle,#mermaidChart229 .node ellipse,#mermaidChart229 .node polygon,#mermaidChart229 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaidChart229 .rough-node .label text,#mermaidChart229 .node .label text,#mermaidChart229 .image-shape .label,#mermaidChart229 .icon-shape .label{text-anchor:middle;}#mermaidChart229 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaidChart229 .rough-node .label,#mermaidChart229 .node .label,#mermaidChart229 .image-shape .label,#mermaidChart229 .icon-shape .label{text-align:center;}#mermaidChart229 .node.clickable{cursor:pointer;}#mermaidChart229 .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#mermaidChart229 .arrowheadPath{fill:#333333;}#mermaidChart229 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaidChart229 .flowchart-link{stroke:#333333;fill:none;}#mermaidChart229 .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaidChart229 .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#mermaidChart229 .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaidChart229 .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#mermaidChart229 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaidChart229 .cluster text{fill:#333;}#mermaidChart229 .cluster span{color:#333;}#mermaidChart229 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart229 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaidChart229 rect.text{fill:none;stroke-width:0;}#mermaidChart229 .icon-shape,#mermaidChart229 .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaidChart229 .icon-shape p,#mermaidChart229 .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#mermaidChart229 .icon-shape rect,#mermaidChart229 .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaidChart229 :root{--mermaid-alt-font-family:sans-serif;}#mermaidChart229 .app&gt;*{fill:#f9f!important;stroke:#333!important;stroke-width:2px!important;}#mermaidChart229 .app span{fill:#f9f!important;stroke:#333!important;stroke-width:2px!important;}#mermaidChart229 .stack&gt;*{fill:#bbf!important;stroke:#333!important;stroke-width:1px!important;}#mermaidChart229 .stack span{fill:#bbf!important;stroke:#333!important;stroke-width:1px!important;}#mermaidChart229 .l3&gt;*{fill:#bfb!important;stroke:#333!important;stroke-width:1px!important;}#mermaidChart229 .l3 span{fill:#bfb!important;stroke:#333!important;stroke-width:1px!important;}#mermaidChart229 .l2&gt;*{fill:#fdb!important;stroke:#333!important;stroke-width:1px!important;}#mermaidChart229 .l2 span{fill:#fdb!important;stroke:#333!important;stroke-width:1px!important;}#mermaidChart229 .l1&gt;*{fill:#fbb!important;stroke:#333!important;stroke-width:1px!important;}#mermaidChart229 .l1 span{fill:#fbb!important;stroke:#333!important;stroke-width:1px!important;}</style><g><marker id="mermaidChart229_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart229_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart229_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart229_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart229_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart229_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M92.37,507.5L104.955,484.833C117.539,462.167,142.707,416.833,158.791,394.167C174.875,371.5,181.875,371.5,185.375,371.5L188.875,371.5" id="L_A_S1_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart229_flowchart-v2-pointEnd)"></path><path d="M100.837,568.5L112.01,581.917C123.183,595.333,145.529,622.167,160.202,635.583C174.875,649,181.875,649,185.375,649L188.875,649" id="L_A_S2_1" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart229_flowchart-v2-pointEnd)"></path><path d="M263.629,341L275.732,309.083C287.836,277.167,312.043,213.333,327.646,181.417C343.25,149.5,350.25,149.5,353.75,149.5L357.25,149.5" id="L_S1_L3_1_2" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart229_flowchart-v2-pointEnd)"></path><path d="M311.25,371.5L315.417,371.5C319.583,371.5,327.917,371.5,337.124,371.5C346.331,371.5,356.411,371.5,361.452,371.5L366.492,371.5" id="L_S1_L2_1_3" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart229_flowchart-v2-pointEnd)"></path><path d="M275.195,402L285.371,415.417C295.547,428.833,315.898,455.667,331.411,469.083C346.924,482.5,357.599,482.5,362.936,482.5L368.273,482.5" id="L_S1_L1_1_4" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart229_flowchart-v2-pointEnd)"></path><path d="M549.846,119L560.194,114.833C570.543,110.667,591.24,102.333,605.089,98.167C618.938,94,625.938,94,629.438,94L632.938,94" id="L_L3_1_L2_2_5" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart229_flowchart-v2-pointEnd)"></path><path d="M511.97,180L528.631,193.417C545.292,206.833,578.615,233.667,598.776,247.083C618.938,260.5,625.938,260.5,629.438,260.5L632.938,260.5" id="L_L3_1_L2_3_6" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart229_flowchart-v2-pointEnd)"></path><path d="M577.695,371.5L583.402,371.5C589.109,371.5,600.523,371.5,610.027,371.5C619.531,371.5,627.125,371.5,630.922,371.5L634.719,371.5" id="L_L2_1_L1_2_7" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart229_flowchart-v2-pointEnd)"></path><path d="M811.212,63.5L820.867,59.333C830.522,55.167,849.831,46.833,862.986,42.667C876.141,38.5,883.141,38.5,886.641,38.5L890.141,38.5" id="L_L2_2_L1_3_8" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart229_flowchart-v2-pointEnd)"></path><path d="M811.212,124.5L820.867,128.667C830.522,132.833,849.831,141.167,862.986,145.333C876.141,149.5,883.141,149.5,886.641,149.5L890.141,149.5" id="L_L2_2_L1_4_9" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart229_flowchart-v2-pointEnd)"></path><path d="M844.141,260.5L848.307,260.5C852.474,260.5,860.807,260.5,868.474,260.5C876.141,260.5,883.141,260.5,886.641,260.5L890.141,260.5" id="L_L2_3_L1_5_10" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart229_flowchart-v2-pointEnd)"></path><path d="M298.328,618.5L304.648,614.333C310.968,610.167,323.609,601.833,334.97,597.667C346.331,593.5,356.411,593.5,361.452,593.5L366.492,593.5" id="L_S2_L2_4_11" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart229_flowchart-v2-pointEnd)"></path><path d="M298.328,679.5L304.648,683.667C310.968,687.833,323.609,696.167,334.97,700.333C346.331,704.5,356.411,704.5,361.452,704.5L366.492,704.5" id="L_S2_L2_5_12" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart229_flowchart-v2-pointEnd)"></path><path d="M577.695,593.5L583.402,593.5C589.109,593.5,600.523,593.5,610.027,593.5C619.531,593.5,627.125,593.5,630.922,593.5L634.719,593.5" id="L_L2_4_L1_6_13" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart229_flowchart-v2-pointEnd)"></path><path d="M577.695,704.5L583.402,704.5C589.109,704.5,600.523,704.5,610.027,704.5C619.531,704.5,627.125,704.5,630.922,704.5L634.719,704.5" id="L_L2_5_L1_7_14" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart229_flowchart-v2-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default app " id="flowchart-A-3327" transform="translate(75.4375, 538)"><rect class="basic label-container" style="fill:#f9f !important;stroke:#333 !important;stroke-width:2px !important" x="-67.4375" y="-30.5" width="134.875" height="61"></rect><g class="label" style="" transform="translate(-37.4375, -15.5)"><rect></rect><foreignObject width="74.875" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>CDK App</p></span></div></foreignObject></g></g><g class="node default stack " id="flowchart-S1-3328" transform="translate(252.0625, 371.5)"><rect class="basic label-container" style="fill:#bbf !important;stroke:#333 !important;stroke-width:1px !important" x="-59.1875" y="-30.5" width="118.375" height="61"></rect><g class="label" style="" transform="translate(-29.1875, -15.5)"><rect></rect><foreignObject width="58.375" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Stack 1</p></span></div></foreignObject></g></g><g class="node default stack " id="flowchart-S2-3330" transform="translate(252.0625, 649)"><rect class="basic label-container" style="fill:#bbf !important;stroke:#333 !important;stroke-width:1px !important" x="-59.1875" y="-30.5" width="118.375" height="61"></rect><g class="label" style="" transform="translate(-29.1875, -15.5)"><rect></rect><foreignObject width="58.375" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Stack 2</p></span></div></foreignObject></g></g><g class="node default l3 " id="flowchart-L3_1-3332" transform="translate(474.09375, 149.5)"><rect class="basic label-container" style="fill:#bfb !important;stroke:#333 !important;stroke-width:1px !important" x="-112.84375" y="-30.5" width="225.6875" height="61"></rect><g class="label" style="" transform="translate(-82.84375, -15.5)"><rect></rect><foreignObject width="165.6875" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>L3: Pattern Construct</p></span></div></foreignObject></g></g><g class="node default l2 " id="flowchart-L2_1-3334" transform="translate(474.09375, 371.5)"><rect class="basic label-container" style="fill:#fdb !important;stroke:#333 !important;stroke-width:1px !important" x="-103.6015625" y="-30.5" width="207.203125" height="61"></rect><g class="label" style="" transform="translate(-73.6015625, -15.5)"><rect></rect><foreignObject width="147.203125" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>L2: AWS Construct</p></span></div></foreignObject></g></g><g class="node default l1 " id="flowchart-L1_1-3336" transform="translate(474.09375, 482.5)"><rect class="basic label-container" style="fill:#fbb !important;stroke:#333 !important;stroke-width:1px !important" x="-101.8203125" y="-30.5" width="203.640625" height="61"></rect><g class="label" style="" transform="translate(-71.8203125, -15.5)"><rect></rect><foreignObject width="143.640625" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>L1: CFN Resource</p></span></div></foreignObject></g></g><g class="node default l2 " id="flowchart-L2_2-3338" transform="translate(740.5390625, 94)"><rect class="basic label-container" style="fill:#fdb !important;stroke:#333 !important;stroke-width:1px !important" x="-103.6015625" y="-30.5" width="207.203125" height="61"></rect><g class="label" style="" transform="translate(-73.6015625, -15.5)"><rect></rect><foreignObject width="147.203125" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>L2: AWS Construct</p></span></div></foreignObject></g></g><g class="node default l2 " id="flowchart-L2_3-3340" transform="translate(740.5390625, 260.5)"><rect class="basic label-container" style="fill:#fdb !important;stroke:#333 !important;stroke-width:1px !important" x="-103.6015625" y="-30.5" width="207.203125" height="61"></rect><g class="label" style="" transform="translate(-73.6015625, -15.5)"><rect></rect><foreignObject width="147.203125" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>L2: AWS Construct</p></span></div></foreignObject></g></g><g class="node default l1 " id="flowchart-L1_2-3342" transform="translate(740.5390625, 371.5)"><rect class="basic label-container" style="fill:#fbb !important;stroke:#333 !important;stroke-width:1px !important" x="-101.8203125" y="-30.5" width="203.640625" height="61"></rect><g class="label" style="" transform="translate(-71.8203125, -15.5)"><rect></rect><foreignObject width="143.640625" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>L1: CFN Resource</p></span></div></foreignObject></g></g><g class="node default l1 " id="flowchart-L1_3-3344" transform="translate(995.9609375, 38.5)"><rect class="basic label-container" style="fill:#fbb !important;stroke:#333 !important;stroke-width:1px !important" x="-101.8203125" y="-30.5" width="203.640625" height="61"></rect><g class="label" style="" transform="translate(-71.8203125, -15.5)"><rect></rect><foreignObject width="143.640625" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>L1: CFN Resource</p></span></div></foreignObject></g></g><g class="node default l1 " id="flowchart-L1_4-3346" transform="translate(995.9609375, 149.5)"><rect class="basic label-container" style="fill:#fbb !important;stroke:#333 !important;stroke-width:1px !important" x="-101.8203125" y="-30.5" width="203.640625" height="61"></rect><g class="label" style="" transform="translate(-71.8203125, -15.5)"><rect></rect><foreignObject width="143.640625" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>L1: CFN Resource</p></span></div></foreignObject></g></g><g class="node default l1 " id="flowchart-L1_5-3348" transform="translate(995.9609375, 260.5)"><rect class="basic label-container" style="fill:#fbb !important;stroke:#333 !important;stroke-width:1px !important" x="-101.8203125" y="-30.5" width="203.640625" height="61"></rect><g class="label" style="" transform="translate(-71.8203125, -15.5)"><rect></rect><foreignObject width="143.640625" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>L1: CFN Resource</p></span></div></foreignObject></g></g><g class="node default l2 " id="flowchart-L2_4-3350" transform="translate(474.09375, 593.5)"><rect class="basic label-container" style="fill:#fdb !important;stroke:#333 !important;stroke-width:1px !important" x="-103.6015625" y="-30.5" width="207.203125" height="61"></rect><g class="label" style="" transform="translate(-73.6015625, -15.5)"><rect></rect><foreignObject width="147.203125" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>L2: AWS Construct</p></span></div></foreignObject></g></g><g class="node default l2 " id="flowchart-L2_5-3352" transform="translate(474.09375, 704.5)"><rect class="basic label-container" style="fill:#fdb !important;stroke:#333 !important;stroke-width:1px !important" x="-103.6015625" y="-30.5" width="207.203125" height="61"></rect><g class="label" style="" transform="translate(-73.6015625, -15.5)"><rect></rect><foreignObject width="147.203125" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>L2: AWS Construct</p></span></div></foreignObject></g></g><g class="node default l1 " id="flowchart-L1_6-3354" transform="translate(740.5390625, 593.5)"><rect class="basic label-container" style="fill:#fbb !important;stroke:#333 !important;stroke-width:1px !important" x="-101.8203125" y="-30.5" width="203.640625" height="61"></rect><g class="label" style="" transform="translate(-71.8203125, -15.5)"><rect></rect><foreignObject width="143.640625" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>L1: CFN Resource</p></span></div></foreignObject></g></g><g class="node default l1 " id="flowchart-L1_7-3356" transform="translate(740.5390625, 704.5)"><rect class="basic label-container" style="fill:#fbb !important;stroke:#333 !important;stroke-width:1px !important" x="-101.8203125" y="-30.5" width="203.640625" height="61"></rect><g class="label" style="" transform="translate(-71.8203125, -15.5)"><rect></rect><foreignObject width="143.640625" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>L1: CFN Resource</p></span></div></foreignObject></g></g></g></g></g></svg></div><p><em><span>Diagram introducing CDK constructs</span></em></p><h2 id='what-is-aws-cdk'><span>What is AWS CDK?</span></h2><p><span>&quot;Let&#39;s start with the basics,&quot; Maya said. &quot;What exactly is the AWS Cloud Development Kit, or CDK?&quot;</span></p><p><span>She opened a slide on her laptop:</span></p><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart230" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="flowchart mermaid-svg" style="max-width: 346px;" viewBox="0 0 346 777" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#mermaidChart230{font-family:sans-serif;font-size:16px;fill:#333;}#mermaidChart230 .error-icon{fill:#552222;}#mermaidChart230 .error-text{fill:#552222;stroke:#552222;}#mermaidChart230 .edge-thickness-normal{stroke-width:1px;}#mermaidChart230 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart230 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart230 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaidChart230 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart230 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart230 .marker{fill:#333333;stroke:#333333;}#mermaidChart230 .marker.cross{stroke:#333333;}#mermaidChart230 svg{font-family:sans-serif;font-size:16px;}#mermaidChart230 p{margin:0;}#mermaidChart230 .label{font-family:sans-serif;color:#333;}#mermaidChart230 .cluster-label text{fill:#333;}#mermaidChart230 .cluster-label span{color:#333;}#mermaidChart230 .cluster-label span p{background-color:transparent;}#mermaidChart230 .label text,#mermaidChart230 span{fill:#333;color:#333;}#mermaidChart230 .node rect,#mermaidChart230 .node circle,#mermaidChart230 .node ellipse,#mermaidChart230 .node polygon,#mermaidChart230 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaidChart230 .rough-node .label text,#mermaidChart230 .node .label text,#mermaidChart230 .image-shape .label,#mermaidChart230 .icon-shape .label{text-anchor:middle;}#mermaidChart230 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaidChart230 .rough-node .label,#mermaidChart230 .node .label,#mermaidChart230 .image-shape .label,#mermaidChart230 .icon-shape .label{text-align:center;}#mermaidChart230 .node.clickable{cursor:pointer;}#mermaidChart230 .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#mermaidChart230 .arrowheadPath{fill:#333333;}#mermaidChart230 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaidChart230 .flowchart-link{stroke:#333333;fill:none;}#mermaidChart230 .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaidChart230 .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#mermaidChart230 .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaidChart230 .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#mermaidChart230 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaidChart230 .cluster text{fill:#333;}#mermaidChart230 .cluster span{color:#333;}#mermaidChart230 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart230 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaidChart230 rect.text{fill:none;stroke-width:0;}#mermaidChart230 .icon-shape,#mermaidChart230 .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaidChart230 .icon-shape p,#mermaidChart230 .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#mermaidChart230 .icon-shape rect,#mermaidChart230 .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaidChart230 :root{--mermaid-alt-font-family:sans-serif;}#mermaidChart230 .developer&gt;*{fill:#f5f5f5!important;stroke:#333!important;stroke-width:1px!important;}#mermaidChart230 .developer span{fill:#f5f5f5!important;stroke:#333!important;stroke-width:1px!important;}#mermaidChart230 .cdk&gt;*{fill:#FF9900!important;stroke:#333!important;stroke-width:1px!important;color:#000!important;}#mermaidChart230 .cdk span{fill:#FF9900!important;stroke:#333!important;stroke-width:1px!important;color:#000!important;}#mermaidChart230 .cdk tspan{fill:#000!important;}#mermaidChart230 .cfn&gt;*{fill:#232F3E!important;stroke:#333!important;stroke-width:1px!important;color:#fff!important;}#mermaidChart230 .cfn span{fill:#232F3E!important;stroke:#333!important;stroke-width:1px!important;color:#fff!important;}#mermaidChart230 .cfn tspan{fill:#fff!important;}#mermaidChart230 .aws&gt;*{fill:#146EB4!important;stroke:#333!important;stroke-width:1px!important;color:#fff!important;}#mermaidChart230 .aws span{fill:#146EB4!important;stroke:#333!important;stroke-width:1px!important;color:#fff!important;}#mermaidChart230 .aws tspan{fill:#fff!important;}</style><g><marker id="mermaidChart230_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart230_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart230_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart230_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart230_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart230_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"><g class="cluster " id="subGraph2" data-look="classic"><rect style="" x="8" y="596" width="330" height="173"></rect><g class="cluster-label " transform="translate(128.59375, 596)"><foreignObject width="88.8125" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>AWS Cloud</p></span></div></foreignObject></g></g><g class="cluster " id="subGraph1" data-look="classic"><rect style="" x="17.71875" y="373" width="310.5625" height="142"></rect><g class="cluster-label " transform="translate(91.953125, 373)"><foreignObject width="162.09375" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Deployment Process</p></span></div></foreignObject></g></g><g class="cluster " id="subGraph0" data-look="classic"><rect style="" x="16.34375" y="8" width="313.3125" height="284"></rect><g class="cluster-label " transform="translate(85.9609375, 8)"><foreignObject width="174.078125" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Developer Experience</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path d="M173,94L173,100.75C173,107.5,173,121,173,133.833C173,146.667,173,158.833,173,164.917L173,171" id="L_DEV_CDK_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart230_flowchart-v2-pointEnd)"></path><path d="M173,267L173,271.167C173,275.333,173,283.667,173,294.583C173,305.5,173,319,173,332.5C173,346,173,359.5,173,369.75C173,380,173,387,173,390.5L173,394" id="L_CDK_CFN_1" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart230_flowchart-v2-pointEnd)"></path><path d="M173,490L173,494.167C173,498.333,173,506.667,173,517.583C173,528.5,173,542,173,555.5C173,569,173,582.5,173,592.75C173,603,173,610,173,613.5L173,617" id="L_CFN_AWS_2" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart230_flowchart-v2-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel" transform="translate(173, 134.5)"><g class="label" transform="translate(-22.8515625, -15.5)"><foreignObject width="45.703125" height="31"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "><p>writes</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(173, 332.5)"><g class="label" transform="translate(-33.71875, -15.5)"><foreignObject width="67.4375" height="31"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "><p>converts</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(173, 555.5)"><g class="label" transform="translate(-39.7109375, -15.5)"><foreignObject width="79.421875" height="31"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "><p>provisions</p></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default developer " id="flowchart-DEV-3357" transform="translate(173, 63.5)"><rect class="basic label-container" style="fill:#f5f5f5 !important;stroke:#333 !important;stroke-width:1px !important" x="-70.359375" y="-30.5" width="140.71875" height="61"></rect><g class="label" style="" transform="translate(-40.359375, -15.5)"><rect></rect><foreignObject width="80.71875" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Developer</p></span></div></foreignObject></g></g><g class="node default cdk " id="flowchart-CDK-3358" transform="translate(173, 221)"><rect class="basic label-container" style="fill:#FF9900 !important;stroke:#333 !important;stroke-width:1px !important" x="-121.65625" y="-46" width="243.3125" height="92"></rect><g class="label" style="color:#000 !important" transform="translate(-91.65625, -31)"><rect></rect><foreignObject width="183.3125" height="62"><div style="color: rgb(0, 0, 0) !important; display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span style="color:#000 !important" class="nodeLabel "><p>AWS CDK<br/>TypeScript/Python/Java</p></span></div></foreignObject></g></g><g class="node default cfn " id="flowchart-CFN-3360" transform="translate(173, 444)"><rect class="basic label-container" style="fill:#232F3E !important;stroke:#333 !important;stroke-width:1px !important" x="-120.28125" y="-46" width="240.5625" height="92"></rect><g class="label" style="color:#fff !important" transform="translate(-90.28125, -31)"><rect></rect><foreignObject width="180.5625" height="62"><div style="color: rgb(255, 255, 255) !important; display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span style="color:#fff !important" class="nodeLabel "><p>CloudFormation<br/>JSON/YAML Templates</p></span></div></foreignObject></g></g><g class="node default aws " id="flowchart-AWS-3362" transform="translate(173, 682.5)"><rect class="basic label-container" style="fill:#146EB4 !important;stroke:#333 !important;stroke-width:1px !important" x="-130" y="-61.5" width="260" height="123"></rect><g class="label" style="color:#fff !important" transform="translate(-100, -46.5)"><rect></rect><foreignObject width="200" height="93"><div style="color: rgb(255, 255, 255) !important; display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span style="color:#fff !important" class="nodeLabel "><p>AWS Resources<br/>S3, Lambda, DynamoDB, etc.</p></span></div></foreignObject></g></g></g></g></g></svg></div><p><em><span>Diagram showing CDK generating CloudFormation</span></em></p><p><span>&quot;AWS CDK is an open-source software development framework for defining your cloud application resources using familiar programming languages like TypeScript, Python, Java, C#, and Go. It provides high-level components called </span><strong><span>Constructs</span></strong><span> that preconfigure cloud resources with proven defaults, helping you build applications faster.&quot;</span></p><p><span>&quot;So it&#39;s like another layer above CloudFormation?&quot; Ethan asked.</span></p><p><span>&quot;Exactly,&quot; Maya confirmed. &quot;CDK code is </span><strong><span>synthesized</span></strong><span> into standard AWS CloudFormation templates. CDK leverages the full power, reliability, and provisioning capabilities of CloudFormation, but provides a much more expressive and developer-friendly way to define your infrastructure.&quot;</span></p><p><span>She drew a simple diagram on the whiteboard showing the relationship:</span></p><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart231" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="flowchart mermaid-svg" style="max-width: 284px;" viewBox="-8 -8 284 622" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#mermaidChart231{font-family:sans-serif;font-size:16px;fill:#333;}#mermaidChart231 .error-icon{fill:#552222;}#mermaidChart231 .error-text{fill:#552222;stroke:#552222;}#mermaidChart231 .edge-thickness-normal{stroke-width:1px;}#mermaidChart231 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart231 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart231 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaidChart231 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart231 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart231 .marker{fill:#333333;stroke:#333333;}#mermaidChart231 .marker.cross{stroke:#333333;}#mermaidChart231 svg{font-family:sans-serif;font-size:16px;}#mermaidChart231 p{margin:0;}#mermaidChart231 .label{font-family:sans-serif;color:#333;}#mermaidChart231 .cluster-label text{fill:#333;}#mermaidChart231 .cluster-label span{color:#333;}#mermaidChart231 .cluster-label span p{background-color:transparent;}#mermaidChart231 .label text,#mermaidChart231 span{fill:#333;color:#333;}#mermaidChart231 .node rect,#mermaidChart231 .node circle,#mermaidChart231 .node ellipse,#mermaidChart231 .node polygon,#mermaidChart231 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaidChart231 .rough-node .label text,#mermaidChart231 .node .label text,#mermaidChart231 .image-shape .label,#mermaidChart231 .icon-shape .label{text-anchor:middle;}#mermaidChart231 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaidChart231 .rough-node .label,#mermaidChart231 .node .label,#mermaidChart231 .image-shape .label,#mermaidChart231 .icon-shape .label{text-align:center;}#mermaidChart231 .node.clickable{cursor:pointer;}#mermaidChart231 .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#mermaidChart231 .arrowheadPath{fill:#333333;}#mermaidChart231 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaidChart231 .flowchart-link{stroke:#333333;fill:none;}#mermaidChart231 .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaidChart231 .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#mermaidChart231 .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaidChart231 .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#mermaidChart231 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaidChart231 .cluster text{fill:#333;}#mermaidChart231 .cluster span{color:#333;}#mermaidChart231 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart231 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaidChart231 rect.text{fill:none;stroke-width:0;}#mermaidChart231 .icon-shape,#mermaidChart231 .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaidChart231 .icon-shape p,#mermaidChart231 .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#mermaidChart231 .icon-shape rect,#mermaidChart231 .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaidChart231 :root{--mermaid-alt-font-family:sans-serif;}#mermaidChart231 .step&gt;*{fill:#f9f9f9!important;stroke:#999!important;stroke-width:1px!important;}#mermaidChart231 .step span{fill:#f9f9f9!important;stroke:#999!important;stroke-width:1px!important;}</style><g><marker id="mermaidChart231_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart231_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart231_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart231_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart231_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart231_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M138,100L138,104.167C138,108.333,138,116.667,138,124.333C138,132,138,139,138,142.5L138,146" id="L_A_B_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart231_flowchart-v2-pointEnd)"></path><path d="M138,211L138,215.167C138,219.333,138,227.667,138,235.333C138,243,138,250,138,253.5L138,257" id="L_B_C_1" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart231_flowchart-v2-pointEnd)"></path><path d="M138,353L138,357.167C138,361.333,138,369.667,138,377.333C138,385,138,392,138,395.5L138,399" id="L_C_D_2" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart231_flowchart-v2-pointEnd)"></path><path d="M138,464L138,468.167C138,472.333,138,480.667,138,488.333C138,496,138,503,138,506.5L138,510" id="L_D_E_3" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart231_flowchart-v2-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default step " id="flowchart-A-3367" transform="translate(138, 54)"><rect class="basic label-container" style="fill:#f9f9f9 !important;stroke:#999 !important;stroke-width:1px !important" x="-130" y="-46" width="260" height="92"></rect><g class="label" style="" transform="translate(-100, -31)"><rect></rect><foreignObject width="200" height="62"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel "><p>Your Code - TypeScript + CDK</p></span></div></foreignObject></g></g><g class="node default step " id="flowchart-B-3368" transform="translate(138, 180.5)"><rect class="basic label-container" style="fill:#f9f9f9 !important;stroke:#999 !important;stroke-width:1px !important" x="-67.9375" y="-30.5" width="135.875" height="61"></rect><g class="label" style="" transform="translate(-37.9375, -15.5)"><rect></rect><foreignObject width="75.875" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>cdk synth</p></span></div></foreignObject></g></g><g class="node default step " id="flowchart-C-3370" transform="translate(138, 307)"><rect class="basic label-container" style="fill:#f9f9f9 !important;stroke:#999 !important;stroke-width:1px !important" x="-130" y="-46" width="260" height="92"></rect><g class="label" style="" transform="translate(-100, -31)"><rect></rect><foreignObject width="200" height="62"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel "><p>CloudFormation Template - JSON/YAML</p></span></div></foreignObject></g></g><g class="node default step " id="flowchart-D-3372" transform="translate(138, 433.5)"><rect class="basic label-container" style="fill:#f9f9f9 !important;stroke:#999 !important;stroke-width:1px !important" x="-73.765625" y="-30.5" width="147.53125" height="61"></rect><g class="label" style="" transform="translate(-43.765625, -15.5)"><rect></rect><foreignObject width="87.53125" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>cdk deploy</p></span></div></foreignObject></g></g><g class="node default step " id="flowchart-E-3374" transform="translate(138, 560)"><rect class="basic label-container" style="fill:#f9f9f9 !important;stroke:#999 !important;stroke-width:1px !important" x="-130" y="-46" width="260" height="92"></rect><g class="label" style="" transform="translate(-100, -31)"><rect></rect><foreignObject width="200" height="62"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel "><p>AWS Resources - S3, Lambda, etc.</p></span></div></foreignObject></g></g></g></g></g></svg></div><p><em><span>Diagram showing CDK workflow: Your Code (TypeScript) -&gt; cdk synth -&gt; CloudFormation Template (JSON/YAML) -&gt; cdk deploy -&gt; AWS Resources</span></em></p><p><span>&quot;The typical workflow is:</span></p><blockquote><ol start='' ><li><p><strong><span>Define:</span></strong><span> Write your infrastructure using CDK constructs in your chosen programming language — in our case, TypeScript.</span></p></li><li><p><strong><span>Synthesize:</span></strong><span> Run </span><code>cdk synth</code><span>. This command compiles your TypeScript code and generates one or more AWS CloudFormation templates (in JSON format). This step prepares the infrastructure definition but does not deploy anything.</span></p></li><li><p><strong><span>Deploy:</span></strong><span> Run </span><code>cdk deploy</code><span>. This command automatically runs </span><code>synth</code><span> behind the scenes, then uploads the generated templates and any required assets to AWS. It uses the CloudFormation service to provision or update the actual AWS resources.</span></p></li></ol></blockquote><p><span>&quot;This means you get the best of both worlds—the expressiveness, logic, and tooling of programming languages, combined with the robust, declarative provisioning engine of CloudFormation.&quot;</span></p><p><span>&quot;What advantages does this give us compared to writing CloudFormation templates directly?&quot; Ethan asked.</span></p><p><span>Maya smiled. &quot;Several major benefits, especially as infrastructure grows:</span></p><blockquote><ol start='' ><li><p><strong><span>Familiar Programming Concepts:</span></strong><span> Use loops, conditionals, functions, classes, inheritance, and libraries to define infrastructure logically.</span></p></li><li><p><strong><span>Code Reuse &amp; Modularity:</span></strong><span> Create reusable components (custom Constructs) encapsulating common patterns (like a standard Lambda setup or a secure S3 bucket).</span></p></li><li><p><strong><span>Higher-Level Abstractions:</span></strong><span> CDK provides L2 and L3 constructs that bundle multiple resources and best practices into single components (e.g., creating a VPC with public/private subnets across AZs in just a few lines).</span></p></li><li><p><strong><span>Type Safety (with TypeScript):</span></strong><span> Catch configuration errors during compilation, before deployment. Get autocompletion and inline documentation in your IDE.</span></p></li><li><p><strong><span>Testing:</span></strong><span> Write unit and integration tests for your infrastructure code.</span></p></li><li><p><strong><span>Less Code:</span></strong><span> Often requires significantly less code than equivalent CloudFormation templates, especially for complex setups.</span></p></li><li><p><strong><span>IDE Support:</span></strong><span> Leverage your existing IDE&#39;s features for code navigation, refactoring, and debugging.&quot;</span></p></li></ol></blockquote><p><span>Ethan nodded, &quot;That makes sense. Writing actual code seems much more powerful than static YAML or JSON templates.&quot;</span></p><h2 id='cdk-core-concepts'><span>CDK Core Concepts</span></h2><p><span>&quot;Before we start writing CDK code, let&#39;s understand its three fundamental building blocks,&quot; Maya said, turning to the whiteboard with the construct diagrams.</span></p><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart232" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="flowchart mermaid-svg" style="max-width: 1380.171875px;" viewBox="-8 -8 1380.171875 338" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#mermaidChart232{font-family:sans-serif;font-size:16px;fill:#333;}#mermaidChart232 .error-icon{fill:#552222;}#mermaidChart232 .error-text{fill:#552222;stroke:#552222;}#mermaidChart232 .edge-thickness-normal{stroke-width:1px;}#mermaidChart232 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart232 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart232 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaidChart232 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart232 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart232 .marker{fill:#333333;stroke:#333333;}#mermaidChart232 .marker.cross{stroke:#333333;}#mermaidChart232 svg{font-family:sans-serif;font-size:16px;}#mermaidChart232 p{margin:0;}#mermaidChart232 .label{font-family:sans-serif;color:#333;}#mermaidChart232 .cluster-label text{fill:#333;}#mermaidChart232 .cluster-label span{color:#333;}#mermaidChart232 .cluster-label span p{background-color:transparent;}#mermaidChart232 .label text,#mermaidChart232 span{fill:#333;color:#333;}#mermaidChart232 .node rect,#mermaidChart232 .node circle,#mermaidChart232 .node ellipse,#mermaidChart232 .node polygon,#mermaidChart232 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaidChart232 .rough-node .label text,#mermaidChart232 .node .label text,#mermaidChart232 .image-shape .label,#mermaidChart232 .icon-shape .label{text-anchor:middle;}#mermaidChart232 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaidChart232 .rough-node .label,#mermaidChart232 .node .label,#mermaidChart232 .image-shape .label,#mermaidChart232 .icon-shape .label{text-align:center;}#mermaidChart232 .node.clickable{cursor:pointer;}#mermaidChart232 .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#mermaidChart232 .arrowheadPath{fill:#333333;}#mermaidChart232 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaidChart232 .flowchart-link{stroke:#333333;fill:none;}#mermaidChart232 .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaidChart232 .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#mermaidChart232 .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaidChart232 .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#mermaidChart232 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaidChart232 .cluster text{fill:#333;}#mermaidChart232 .cluster span{color:#333;}#mermaidChart232 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart232 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaidChart232 rect.text{fill:none;stroke-width:0;}#mermaidChart232 .icon-shape,#mermaidChart232 .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaidChart232 .icon-shape p,#mermaidChart232 .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#mermaidChart232 .icon-shape rect,#mermaidChart232 .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaidChart232 :root{--mermaid-alt-font-family:sans-serif;}#mermaidChart232 .appStyle&gt;*{fill:#1e88e5!important;color:#fff!important;stroke:#1565c0!important;stroke-width:2px!important;}#mermaidChart232 .appStyle span{fill:#1e88e5!important;color:#fff!important;stroke:#1565c0!important;stroke-width:2px!important;}#mermaidChart232 .appStyle tspan{fill:#fff!important;}#mermaidChart232 .stackStyle&gt;*{fill:#90caf9!important;color:#000!important;stroke:#1e88e5!important;stroke-width:1.5px!important;}#mermaidChart232 .stackStyle span{fill:#90caf9!important;color:#000!important;stroke:#1e88e5!important;stroke-width:1.5px!important;}#mermaidChart232 .stackStyle tspan{fill:#000!important;}#mermaidChart232 .constructStyle&gt;*{fill:#e3f2fd!important;color:#000!important;stroke:#64b5f6!important;stroke-width:1px!important;}#mermaidChart232 .constructStyle span{fill:#e3f2fd!important;color:#000!important;stroke:#64b5f6!important;stroke-width:1px!important;}#mermaidChart232 .constructStyle tspan{fill:#000!important;}</style><g><marker id="mermaidChart232_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart232_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart232_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart232_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart232_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart232_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M450.18,51.083L411.844,58.236C373.509,65.389,296.839,79.694,258.503,90.347C220.168,101,220.168,108,220.168,111.5L220.168,115" id="L_A_S1_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart232_flowchart-v2-pointEnd)"></path><path d="M585.055,47.416L643.783,55.18C702.51,62.944,819.966,78.472,878.694,89.736C937.422,101,937.422,108,937.422,111.5L937.422,115" id="L_A_S2_1" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart232_flowchart-v2-pointEnd)"></path><path d="M152.928,180L143.742,184.167C134.556,188.333,116.184,196.667,106.998,206.917C97.813,217.167,97.813,229.333,97.813,235.417L97.813,241.5" id="L_S1_C1_2" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart232_flowchart-v2-pointEnd)"></path><path d="M287.408,180L296.594,184.167C305.78,188.333,324.152,196.667,333.338,206.917C342.523,217.167,342.523,229.333,342.523,235.417L342.523,241.5" id="L_S1_C2_3" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart232_flowchart-v2-pointEnd)"></path><path d="M829.609,168.802L795.911,174.835C762.214,180.868,694.818,192.934,661.12,202.467C627.422,212,627.422,219,627.422,222.5L627.422,226" id="L_S2_C3_4" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart232_flowchart-v2-pointEnd)"></path><path d="M937.422,180L937.422,184.167C937.422,188.333,937.422,196.667,937.422,204.333C937.422,212,937.422,219,937.422,222.5L937.422,226" id="L_S2_C4_5" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart232_flowchart-v2-pointEnd)"></path><path d="M1045.234,169.223L1077.828,175.186C1110.422,181.149,1175.609,193.074,1208.203,205.121C1240.797,217.167,1240.797,229.333,1240.797,235.417L1240.797,241.5" id="L_S2_C5_6" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart232_flowchart-v2-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default appStyle " id="flowchart-A-3375" transform="translate(517.6171875, 38.5)"><rect class="basic label-container" style="fill:#1e88e5 !important;stroke:#1565c0 !important;stroke-width:2px !important" x="-67.4375" y="-30.5" width="134.875" height="61"></rect><g class="label" style="color:#fff !important" transform="translate(-37.4375, -15.5)"><rect></rect><foreignObject width="74.875" height="31"><div style="color: rgb(255, 255, 255) !important; display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span style="color:#fff !important" class="nodeLabel "><p>CDK App</p></span></div></foreignObject></g></g><g class="node default stackStyle " id="flowchart-S1-3376" transform="translate(220.16796875, 149.5)"><rect class="basic label-container" style="fill:#90caf9 !important;stroke:#1e88e5 !important;stroke-width:1.5px !important" x="-110.71875" y="-30.5" width="221.4375" height="61"></rect><g class="label" style="color:#000 !important" transform="translate(-80.71875, -15.5)"><rect></rect><foreignObject width="161.4375" height="31"><div style="color: rgb(0, 0, 0) !important; display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span style="color:#000 !important" class="nodeLabel "><p>Stack: NetworkStack</p></span></div></foreignObject></g></g><g class="node default stackStyle " id="flowchart-S2-3378" transform="translate(937.421875, 149.5)"><rect class="basic label-container" style="fill:#90caf9 !important;stroke:#1e88e5 !important;stroke-width:1.5px !important" x="-107.8125" y="-30.5" width="215.625" height="61"></rect><g class="label" style="color:#000 !important" transform="translate(-77.8125, -15.5)"><rect></rect><foreignObject width="155.625" height="31"><div style="color: rgb(0, 0, 0) !important; display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span style="color:#000 !important" class="nodeLabel "><p>Stack: ServiceStack</p></span></div></foreignObject></g></g><g class="node default constructStyle " id="flowchart-C1-3380" transform="translate(97.8125, 276)"><rect class="basic label-container" style="fill:#e3f2fd !important;stroke:#64b5f6 !important;stroke-width:1px !important" x="-89.8125" y="-30.5" width="179.625" height="61"></rect><g class="label" style="color:#000 !important" transform="translate(-59.8125, -15.5)"><rect></rect><foreignObject width="119.625" height="31"><div style="color: rgb(0, 0, 0) !important; display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span style="color:#000 !important" class="nodeLabel "><p>Construct: VPC</p></span></div></foreignObject></g></g><g class="node default constructStyle " id="flowchart-C2-3382" transform="translate(342.5234375, 276)"><rect class="basic label-container" style="fill:#e3f2fd !important;stroke:#64b5f6 !important;stroke-width:1px !important" x="-104.8984375" y="-30.5" width="209.796875" height="61"></rect><g class="label" style="color:#000 !important" transform="translate(-74.8984375, -15.5)"><rect></rect><foreignObject width="149.796875" height="31"><div style="color: rgb(0, 0, 0) !important; display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span style="color:#000 !important" class="nodeLabel "><p>Construct: Subnets</p></span></div></foreignObject></g></g><g class="node default constructStyle " id="flowchart-C3-3384" transform="translate(627.421875, 276)"><rect class="basic label-container" style="fill:#e3f2fd !important;stroke:#64b5f6 !important;stroke-width:1px !important" x="-130" y="-46" width="260" height="92"></rect><g class="label" style="color:#000 !important" transform="translate(-100, -31)"><rect></rect><foreignObject width="200" height="62"><div style="color: rgb(0, 0, 0) !important; display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span style="color:#000 !important" class="nodeLabel "><p>Construct: Lambda Function</p></span></div></foreignObject></g></g><g class="node default constructStyle " id="flowchart-C4-3386" transform="translate(937.421875, 276)"><rect class="basic label-container" style="fill:#e3f2fd !important;stroke:#64b5f6 !important;stroke-width:1px !important" x="-130" y="-46" width="260" height="92"></rect><g class="label" style="color:#000 !important" transform="translate(-100, -31)"><rect></rect><foreignObject width="200" height="62"><div style="color: rgb(0, 0, 0) !important; display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span style="color:#000 !important" class="nodeLabel "><p>Construct: DynamoDB Table</p></span></div></foreignObject></g></g><g class="node default constructStyle " id="flowchart-C5-3388" transform="translate(1240.796875, 276)"><rect class="basic label-container" style="fill:#e3f2fd !important;stroke:#64b5f6 !important;stroke-width:1px !important" x="-123.375" y="-30.5" width="246.75" height="61"></rect><g class="label" style="color:#000 !important" transform="translate(-93.375, -15.5)"><rect></rect><foreignObject width="186.75" height="31"><div style="color: rgb(0, 0, 0) !important; display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span style="color:#000 !important" class="nodeLabel "><p>Construct: API Gateway</p></span></div></foreignObject></g></g></g></g></g></svg></div><p><em><span>Diagram showing App containing Stacks containing Constructs</span></em></p><p><span>&quot;Everything in CDK revolves around </span><strong><span>Constructs</span></strong><span>, </span><strong><span>Stacks</span></strong><span>, and </span><strong><span>Apps</span></strong><span>.&quot;</span></p><h3 id='constructs'><span>Constructs</span></h3><p><span>&quot;A </span><strong><span>Construct</span></strong><span> is the basic building block in CDK,&quot; Maya explained. &quot;It represents a &#39;cloud component,&#39; which could range from a single low-level resource like an S3 bucket to a complex, multi-resource architecture pattern.&quot;</span></p><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart233" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="classDiagram mermaid-svg" style="max-width: 331.046875px;" viewBox="-8 -8 331.046875 344" role="graphics-document document" aria-roledescription="class"><style>#mermaidChart233{font-family:sans-serif;font-size:16px;fill:#333;}#mermaidChart233 .error-icon{fill:#552222;}#mermaidChart233 .error-text{fill:#552222;stroke:#552222;}#mermaidChart233 .edge-thickness-normal{stroke-width:1px;}#mermaidChart233 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart233 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart233 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaidChart233 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart233 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart233 .marker{fill:#333333;stroke:#333333;}#mermaidChart233 .marker.cross{stroke:#333333;}#mermaidChart233 svg{font-family:sans-serif;font-size:16px;}#mermaidChart233 p{margin:0;}#mermaidChart233 g.classGroup text{fill:#9370DB;stroke:none;font-family:sans-serif;font-size:10px;}#mermaidChart233 g.classGroup text .title{font-weight:bolder;}#mermaidChart233 .nodeLabel,#mermaidChart233 .edgeLabel{color:#131300;}#mermaidChart233 .edgeLabel .label rect{fill:#ECECFF;}#mermaidChart233 .label text{fill:#131300;}#mermaidChart233 .labelBkg{background:#ECECFF;}#mermaidChart233 .edgeLabel .label span{background:#ECECFF;}#mermaidChart233 .classTitle{font-weight:bolder;}#mermaidChart233 .node rect,#mermaidChart233 .node circle,#mermaidChart233 .node ellipse,#mermaidChart233 .node polygon,#mermaidChart233 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaidChart233 .divider{stroke:#9370DB;stroke-width:1;}#mermaidChart233 g.clickable{cursor:pointer;}#mermaidChart233 g.classGroup rect{fill:#ECECFF;stroke:#9370DB;}#mermaidChart233 g.classGroup line{stroke:#9370DB;stroke-width:1;}#mermaidChart233 .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5;}#mermaidChart233 .classLabel .label{fill:#9370DB;font-size:10px;}#mermaidChart233 .relation{stroke:#333333;stroke-width:1;fill:none;}#mermaidChart233 .dashed-line{stroke-dasharray:3;}#mermaidChart233 .dotted-line{stroke-dasharray:1 2;}#mermaidChart233 #compositionStart,#mermaidChart233 .composition{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaidChart233 #compositionEnd,#mermaidChart233 .composition{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaidChart233 #dependencyStart,#mermaidChart233 .dependency{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaidChart233 #dependencyStart,#mermaidChart233 .dependency{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaidChart233 #extensionStart,#mermaidChart233 .extension{fill:transparent!important;stroke:#333333!important;stroke-width:1;}#mermaidChart233 #extensionEnd,#mermaidChart233 .extension{fill:transparent!important;stroke:#333333!important;stroke-width:1;}#mermaidChart233 #aggregationStart,#mermaidChart233 .aggregation{fill:transparent!important;stroke:#333333!important;stroke-width:1;}#mermaidChart233 #aggregationEnd,#mermaidChart233 .aggregation{fill:transparent!important;stroke:#333333!important;stroke-width:1;}#mermaidChart233 #lollipopStart,#mermaidChart233 .lollipop{fill:#ECECFF!important;stroke:#333333!important;stroke-width:1;}#mermaidChart233 #lollipopEnd,#mermaidChart233 .lollipop{fill:#ECECFF!important;stroke:#333333!important;stroke-width:1;}#mermaidChart233 .edgeTerminals{font-size:11px;line-height:initial;}#mermaidChart233 .classTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaidChart233 :root{--mermaid-alt-font-family:sans-serif;}</style><g><defs><marker id="mermaidChart233_class-aggregationStart" class="marker aggregation class" refX="18" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="mermaidChart233_class-aggregationEnd" class="marker aggregation class" refX="1" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="mermaidChart233_class-extensionStart" class="marker extension class" refX="18" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 1,7 L18,13 V 1 Z"></path></marker></defs><defs><marker id="mermaidChart233_class-extensionEnd" class="marker extension class" refX="1" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 1,1 V 13 L18,7 Z"></path></marker></defs><defs><marker id="mermaidChart233_class-compositionStart" class="marker composition class" refX="18" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="mermaidChart233_class-compositionEnd" class="marker composition class" refX="1" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="mermaidChart233_class-dependencyStart" class="marker dependency class" refX="6" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 5,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="mermaidChart233_class-dependencyEnd" class="marker dependency class" refX="13" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><defs><marker id="mermaidChart233_class-lollipopStart" class="marker lollipop class" refX="13" refY="7" markerWidth="190" markerHeight="240" orient="auto"><circle stroke="currentColor" fill="transparent" cx="7" cy="7" r="6"></circle></marker></defs><defs><marker id="mermaidChart233_class-lollipopEnd" class="marker lollipop class" refX="1" refY="7" markerWidth="190" markerHeight="240" orient="auto"><circle stroke="currentColor" fill="transparent" cx="7" cy="7" r="6"></circle></marker></defs><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M161.523,51L161.523,55.167C161.523,59.333,161.523,67.667,161.523,76C161.523,84.333,161.523,92.667,161.523,96.833L161.523,101" id="edgeNote1" class=" edge-thickness-normal edge-pattern-dotted relation" style=";fill: none"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml" class="labelBkg"><span style=";" class="edgeLabel "></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default " id="classId-Construct-558" transform="translate(161.5234375, 214.5)"><g class="basic label-container"><path d="M-153.5234375 -113.5 L153.5234375 -113.5 L153.5234375 113.5 L-153.5234375 113.5" stroke="none" stroke-width="0" fill="#ECECFF" style=""></path><path d="M-153.5234375 -113.5 C-72.42492484997304 -113.5, 8.673587800053923 -113.5, 153.5234375 -113.5 M-153.5234375 -113.5 C-65.43250436724406 -113.5, 22.65842876551187 -113.5, 153.5234375 -113.5 M153.5234375 -113.5 C153.5234375 -23.828042967354833, 153.5234375 65.84391406529033, 153.5234375 113.5 M153.5234375 -113.5 C153.5234375 -38.83082712171033, 153.5234375 35.83834575657934, 153.5234375 113.5 M153.5234375 113.5 C57.19287962373262 113.5, -39.137678252534755 113.5, -153.5234375 113.5 M153.5234375 113.5 C44.191995173284994 113.5, -65.13944715343001 113.5, -153.5234375 113.5 M-153.5234375 113.5 C-153.5234375 59.39124529297944, -153.5234375 5.282490585958882, -153.5234375 -113.5 M-153.5234375 113.5 C-153.5234375 31.173140625519338, -153.5234375 -51.153718748961325, -153.5234375 -113.5" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g><g class="annotation-group text" transform="translate(0, -89.5)"></g><g class="label-group text" transform="translate(-37.9375, -89.5)"><g class="label" style="font-weight: bolder" transform="translate(0,-15.5)"><foreignObject width="75.875" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 118px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>Construct</p></span></div></foreignObject></g></g><g class="members-group text" transform="translate(-141.5234375, -34.5)"><g class="label" style="" transform="translate(0,-15.5)"><foreignObject width="116.734375" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 159px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>AWS Resource</p></span></div></foreignObject></g><g class="label" style="" transform="translate(0,15.5)"><foreignObject width="105.046875" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 145px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>Configuration</p></span></div></foreignObject></g><g class="label" style="" transform="translate(0,46.5)"><foreignObject width="245.109375" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 271px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>Identity &amp; Access Management</p></span></div></foreignObject></g><g class="label" style="" transform="translate(0,77.5)"><foreignObject width="244.5" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 272px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>Connections to other resources</p></span></div></foreignObject></g></g><g class="methods-group text" transform="translate(-141.5234375, 113.5)"></g><g class="divider" style=""><path d="M-153.5234375 -58.5 C-36.04239224522284 -58.5, 81.43865300955432 -58.5, 153.5234375 -58.5 M-153.5234375 -58.5 C-39.27803154286815 -58.5, 74.9673744142637 -58.5, 153.5234375 -58.5" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g><g class="divider" style=""><path d="M-153.5234375 89.5 C-75.65891016482485 89.5, 2.2056171703503082 89.5, 153.5234375 89.5 M-153.5234375 89.5 C-80.86516829250031 89.5, -8.206899085000629 89.5, 153.5234375 89.5" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g></g><g class="node undefined " id="note0" transform="translate(161.5234375, 29.5)"><g class="basic label-container"><path d="M-132.421875 -21.5 L132.421875 -21.5 L132.421875 21.5 L-132.421875 21.5" stroke="none" stroke-width="0" fill="#fff5ad" style="fill:#fff5ad !important;stroke:#aaaa33 !important"></path><path d="M-132.421875 -21.5 C-65.28854413343592 -21.5, 1.84478673312816 -21.5, 132.421875 -21.5 M-132.421875 -21.5 C-77.94327887030545 -21.5, -23.464682740610883 -21.5, 132.421875 -21.5 M132.421875 -21.5 C132.421875 -12.212290165567682, 132.421875 -2.9245803311353633, 132.421875 21.5 M132.421875 -21.5 C132.421875 -11.81390526087812, 132.421875 -2.1278105217562384, 132.421875 21.5 M132.421875 21.5 C35.64417473705794 21.5, -61.133525525884124 21.5, -132.421875 21.5 M132.421875 21.5 C51.91073992714398 21.5, -28.600395145712042 21.5, -132.421875 21.5 M-132.421875 21.5 C-132.421875 6.548265667899498, -132.421875 -8.403468664201004, -132.421875 -21.5 M-132.421875 21.5 C-132.421875 4.902509037775836, -132.421875 -11.694981924448328, -132.421875 -21.5" stroke="#aaaa33" stroke-width="1.3" fill="none" style="fill:#fff5ad !important;stroke:#aaaa33 !important"></path></g><g class="label" style="text-align:left !important;white-space:nowrap !important" transform="translate(-126.421875, -15.5)"><rect></rect><foreignObject width="252.84375" height="31"><div style="text-align: center; white-space: break-spaces; display: table; line-height: 1.5; max-width: 200px; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span style="text-align:left !important;white-space:nowrap !important" class="nodeLabel "><p>The basic building block in CDK</p></span></div></foreignObject></g></g></g></g></g></svg></div><p><em><span>Diagram showing Construct</span></em></p><p><span>She began drawing more on the whiteboard:</span></p><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart234" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="flowchart mermaid-svg" style="max-width: 964.375px;" viewBox="-8 -8 964.375 674" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#mermaidChart234{font-family:sans-serif;font-size:16px;fill:#333;}#mermaidChart234 .error-icon{fill:#552222;}#mermaidChart234 .error-text{fill:#552222;stroke:#552222;}#mermaidChart234 .edge-thickness-normal{stroke-width:1px;}#mermaidChart234 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart234 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart234 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaidChart234 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart234 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart234 .marker{fill:#333333;stroke:#333333;}#mermaidChart234 .marker.cross{stroke:#333333;}#mermaidChart234 svg{font-family:sans-serif;font-size:16px;}#mermaidChart234 p{margin:0;}#mermaidChart234 .label{font-family:sans-serif;color:#333;}#mermaidChart234 .cluster-label text{fill:#333;}#mermaidChart234 .cluster-label span{color:#333;}#mermaidChart234 .cluster-label span p{background-color:transparent;}#mermaidChart234 .label text,#mermaidChart234 span{fill:#333;color:#333;}#mermaidChart234 .node rect,#mermaidChart234 .node circle,#mermaidChart234 .node ellipse,#mermaidChart234 .node polygon,#mermaidChart234 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaidChart234 .rough-node .label text,#mermaidChart234 .node .label text,#mermaidChart234 .image-shape .label,#mermaidChart234 .icon-shape .label{text-anchor:middle;}#mermaidChart234 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaidChart234 .rough-node .label,#mermaidChart234 .node .label,#mermaidChart234 .image-shape .label,#mermaidChart234 .icon-shape .label{text-align:center;}#mermaidChart234 .node.clickable{cursor:pointer;}#mermaidChart234 .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#mermaidChart234 .arrowheadPath{fill:#333333;}#mermaidChart234 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaidChart234 .flowchart-link{stroke:#333333;fill:none;}#mermaidChart234 .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaidChart234 .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#mermaidChart234 .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaidChart234 .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#mermaidChart234 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaidChart234 .cluster text{fill:#333;}#mermaidChart234 .cluster span{color:#333;}#mermaidChart234 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart234 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaidChart234 rect.text{fill:none;stroke-width:0;}#mermaidChart234 .icon-shape,#mermaidChart234 .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaidChart234 .icon-shape p,#mermaidChart234 .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#mermaidChart234 .icon-shape rect,#mermaidChart234 .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaidChart234 :root{--mermaid-alt-font-family:sans-serif;}#mermaidChart234 .title&gt;*{font-weight:bold!important;font-size:14px!important;}#mermaidChart234 .title span{font-weight:bold!important;font-size:14px!important;}</style><g><marker id="mermaidChart234_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart234_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart234_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart234_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart234_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart234_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"><g class="cluster " id="subGraph2" data-look="classic"><rect style="" x="8" y="485" width="940.375" height="173"></rect><g class="cluster-label " transform="translate(397.953125, 485)"><foreignObject width="160.46875" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>L1 Constructs (CFN)</p></span></div></foreignObject></g></g><g class="cluster " id="subGraph1" data-look="classic"><rect style="" x="37.171875" y="262" width="903.2578125" height="173"></rect><g class="cluster-label " transform="translate(407.43359375, 262)"><foreignObject width="162.734375" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>L2 Constructs (AWS)</p></span></div></foreignObject></g></g><g class="cluster " id="subGraph0" data-look="classic"><rect style="" x="139.65625" y="8" width="671.40625" height="204"></rect><g class="cluster-label " transform="translate(380.375, 8)"><foreignObject width="189.96875" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>L3 Constructs (Patterns)</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path d="M350.766,155.912L322.247,165.26C293.729,174.608,236.693,193.304,208.174,206.819C179.656,220.333,179.656,228.667,179.656,237C179.656,245.333,179.656,253.667,179.656,261.333C179.656,269,179.656,276,179.656,279.5L179.656,283" id="L_L3_L2_1_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart234_flowchart-v2-pointEnd)"></path><path d="M490.828,187L490.828,191.167C490.828,195.333,490.828,203.667,490.828,212C490.828,220.333,490.828,228.667,490.828,237C490.828,245.333,490.828,253.667,490.828,261.333C490.828,269,490.828,276,490.828,279.5L490.828,283" id="L_L3_L2_2_1" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart234_flowchart-v2-pointEnd)"></path><path d="M630.891,157.856L657.302,166.88C683.714,175.904,736.536,193.952,762.948,207.143C789.359,220.333,789.359,228.667,789.359,237C789.359,245.333,789.359,253.667,789.359,261.333C789.359,269,789.359,276,789.359,279.5L789.359,283" id="L_L3_L2_3_2" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart234_flowchart-v2-pointEnd)"></path><path d="M179.656,410L179.656,414.167C179.656,418.333,179.656,426.667,179.656,435C179.656,443.333,179.656,451.667,179.656,460C179.656,468.333,179.656,476.667,179.656,484.333C179.656,492,179.656,499,179.656,502.5L179.656,506" id="L_L2_1_L1_1_3" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart234_flowchart-v2-pointEnd)"></path><path d="M490.828,410L490.828,414.167C490.828,418.333,490.828,426.667,490.828,435C490.828,443.333,490.828,451.667,490.828,460C490.828,468.333,490.828,476.667,490.828,484.333C490.828,492,490.828,499,490.828,502.5L490.828,506" id="L_L2_2_L1_2_4" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart234_flowchart-v2-pointEnd)"></path><path d="M789.359,410L789.359,414.167C789.359,418.333,789.359,426.667,789.359,435C789.359,443.333,789.359,451.667,789.359,460C789.359,468.333,789.359,476.667,789.359,484.333C789.359,492,789.359,499,789.359,502.5L789.359,506" id="L_L2_3_L1_3_5" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart234_flowchart-v2-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default  " id="flowchart-L3-3389" transform="translate(490.828125, 110)"><rect class="basic label-container" style="fill:#75C46B !important;stroke:#333 !important;stroke-width:1px !important" x="-140.0625" y="-77" width="280.125" height="154"></rect><g class="label" style="" transform="translate(-110.0625, -62)"><rect></rect><foreignObject width="220.125" height="124"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel "><p>apigateway.LambdaRestApi<br/><i>Complete REST API with<br/>Lambda integration and DynamoDB</i></p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-L2_1-3391" transform="translate(179.65625, 348.5)"><rect class="basic label-container" style="fill:#FF9900 !important;stroke:#333 !important;stroke-width:1px !important" x="-107.484375" y="-61.5" width="214.96875" height="123"></rect><g class="label" style="" transform="translate(-77.484375, -46.5)"><rect></rect><foreignObject width="154.96875" height="93"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>apigateway.RestApi<br/><i>API Gateway with<br/>best practices</i></p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-L2_2-3392" transform="translate(490.828125, 348.5)"><rect class="basic label-container" style="fill:#FF9900 !important;stroke:#333 !important;stroke-width:1px !important" x="-114.1328125" y="-61.5" width="228.265625" height="123"></rect><g class="label" style="" transform="translate(-84.1328125, -46.5)"><rect></rect><foreignObject width="168.265625" height="93"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>lambda.Function<br/><i>Lambda function with<br/>sensible defaults</i></p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-L2_3-3393" transform="translate(789.359375, 348.5)"><rect class="basic label-container" style="fill:#FF9900 !important;stroke:#333 !important;stroke-width:1px !important" x="-116.0703125" y="-61.5" width="232.140625" height="123"></rect><g class="label" style="" transform="translate(-86.0703125, -46.5)"><rect></rect><foreignObject width="172.140625" height="93"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>dynamodb.Table<br/><i>DynamoDB Table with<br/>higher-level features</i></p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-L1_1-3397" transform="translate(179.65625, 571.5)"><rect class="basic label-container" style="fill:#E3776A !important;stroke:#333 !important;stroke-width:1px !important" x="-136.65625" y="-61.5" width="273.3125" height="123"></rect><g class="label" style="" transform="translate(-106.65625, -46.5)"><rect></rect><foreignObject width="213.3125" height="93"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel "><p>apigateway.CfnRestApi<br/><i>Direct CloudFormation<br/>AWS::ApiGateway::RestApi</i></p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-L1_2-3398" transform="translate(490.828125, 571.5)"><rect class="basic label-container" style="fill:#E3776A !important;stroke:#333 !important;stroke-width:1px !important" x="-124.515625" y="-61.5" width="249.03125" height="123"></rect><g class="label" style="" transform="translate(-94.515625, -46.5)"><rect></rect><foreignObject width="189.03125" height="93"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>lambda.CfnFunction<br/><i>Direct CloudFormation<br/>AWS::Lambda::Function</i></p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-L1_3-3399" transform="translate(789.359375, 571.5)"><rect class="basic label-container" style="fill:#E3776A !important;stroke:#333 !important;stroke-width:1px !important" x="-124.015625" y="-61.5" width="248.03125" height="123"></rect><g class="label" style="" transform="translate(-94.015625, -46.5)"><rect></rect><foreignObject width="188.03125" height="93"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>dynamodb.CfnTable<br/><i>Direct CloudFormation<br/>AWS::DynamoDB::Table</i></p></span></div></foreignObject></g></g></g></g></g></svg></div><p><em><span>Diagram showing L1 (CFN), L2 (AWS), L3 (Patterns) constructs</span></em></p><p><span>&quot;Constructs generally come in three levels:</span></p><blockquote><ul><li><p><strong><span>L1 (Layer 1) - CFN Resources:</span></strong><span> These constructs map directly, one-to-one, with AWS CloudFormation resources. They are auto-generated from the CloudFormation specification and have names starting with </span><code>Cfn</code><span> (e.g., </span><code>s3.CfnBucket</code><span>, </span><code>lambda.CfnFunction</code><span>). They provide full control but require you to configure every property explicitly, similar to writing raw CloudFormation.</span></p></li><li><p><strong><span>L2 (Layer 2) - AWS Constructs:</span></strong><span> These are the curated, higher-level constructs provided by the AWS Construct Library for specific AWS services. They offer convenient defaults, helper methods, and encapsulate best practices, making them much easier to use (e.g., </span><code>s3.Bucket</code><span>, </span><code>lambda.Function</code><span>). </span><strong><span>We will primarily use L2 constructs.</span></strong></p></li><li><p><strong><span>L3 (Layer 3) - Patterns:</span></strong><span> These are even higher-level constructs, often combining multiple L1/L2 constructs to implement common architectural patterns or opinionated solutions (e.g., </span><code>apigateway.LambdaRestApi</code><span> which sets up API Gateway integrated with a Lambda function, or </span><code>ecs_patterns.ApplicationLoadBalancedFargateService</code><span>). You can also build your own L3 constructs.&quot;</span></p></li></ul></blockquote><p><span>&quot;That&#39;s helpful,&quot; Ethan said. &quot;So L2 constructs are usually the sweet spot?&quot;</span></p><p><span>&quot;Exactly,&quot; Maya confirmed. &quot;They provide a good balance of abstraction and control. You start with sensible defaults and only override what you need. You can always drop down to L1 if you need fine-grained control over a specific property not exposed by the L2 construct.&quot;</span></p><h3 id='stacks'><span>Stacks</span></h3><p><span>&quot;The next concept is a </span><strong><span>Stack</span></strong><span>,&quot; Maya continued, drawing another diagram. &quot;A Stack is also a construct, but it serves as a </span><strong><span>unit of deployment</span></strong><span> in CDK. It represents a collection of related AWS resources that are provisioned and managed together.&quot;</span></p><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart235" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="classDiagram mermaid-svg" style="max-width: 481.984375px;" viewBox="-8 -8 481.984375 411" role="graphics-document document" aria-roledescription="class"><style>#mermaidChart235{font-family:sans-serif;font-size:16px;fill:#333;}#mermaidChart235 .error-icon{fill:#552222;}#mermaidChart235 .error-text{fill:#552222;stroke:#552222;}#mermaidChart235 .edge-thickness-normal{stroke-width:1px;}#mermaidChart235 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart235 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart235 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaidChart235 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart235 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart235 .marker{fill:#333333;stroke:#333333;}#mermaidChart235 .marker.cross{stroke:#333333;}#mermaidChart235 svg{font-family:sans-serif;font-size:16px;}#mermaidChart235 p{margin:0;}#mermaidChart235 g.classGroup text{fill:#9370DB;stroke:none;font-family:sans-serif;font-size:10px;}#mermaidChart235 g.classGroup text .title{font-weight:bolder;}#mermaidChart235 .nodeLabel,#mermaidChart235 .edgeLabel{color:#131300;}#mermaidChart235 .edgeLabel .label rect{fill:#ECECFF;}#mermaidChart235 .label text{fill:#131300;}#mermaidChart235 .labelBkg{background:#ECECFF;}#mermaidChart235 .edgeLabel .label span{background:#ECECFF;}#mermaidChart235 .classTitle{font-weight:bolder;}#mermaidChart235 .node rect,#mermaidChart235 .node circle,#mermaidChart235 .node ellipse,#mermaidChart235 .node polygon,#mermaidChart235 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaidChart235 .divider{stroke:#9370DB;stroke-width:1;}#mermaidChart235 g.clickable{cursor:pointer;}#mermaidChart235 g.classGroup rect{fill:#ECECFF;stroke:#9370DB;}#mermaidChart235 g.classGroup line{stroke:#9370DB;stroke-width:1;}#mermaidChart235 .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5;}#mermaidChart235 .classLabel .label{fill:#9370DB;font-size:10px;}#mermaidChart235 .relation{stroke:#333333;stroke-width:1;fill:none;}#mermaidChart235 .dashed-line{stroke-dasharray:3;}#mermaidChart235 .dotted-line{stroke-dasharray:1 2;}#mermaidChart235 #compositionStart,#mermaidChart235 .composition{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaidChart235 #compositionEnd,#mermaidChart235 .composition{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaidChart235 #dependencyStart,#mermaidChart235 .dependency{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaidChart235 #dependencyStart,#mermaidChart235 .dependency{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaidChart235 #extensionStart,#mermaidChart235 .extension{fill:transparent!important;stroke:#333333!important;stroke-width:1;}#mermaidChart235 #extensionEnd,#mermaidChart235 .extension{fill:transparent!important;stroke:#333333!important;stroke-width:1;}#mermaidChart235 #aggregationStart,#mermaidChart235 .aggregation{fill:transparent!important;stroke:#333333!important;stroke-width:1;}#mermaidChart235 #aggregationEnd,#mermaidChart235 .aggregation{fill:transparent!important;stroke:#333333!important;stroke-width:1;}#mermaidChart235 #lollipopStart,#mermaidChart235 .lollipop{fill:#ECECFF!important;stroke:#333333!important;stroke-width:1;}#mermaidChart235 #lollipopEnd,#mermaidChart235 .lollipop{fill:#ECECFF!important;stroke:#333333!important;stroke-width:1;}#mermaidChart235 .edgeTerminals{font-size:11px;line-height:initial;}#mermaidChart235 .classTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaidChart235 :root{--mermaid-alt-font-family:sans-serif;}</style><g><defs><marker id="mermaidChart235_class-aggregationStart" class="marker aggregation class" refX="18" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="mermaidChart235_class-aggregationEnd" class="marker aggregation class" refX="1" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="mermaidChart235_class-extensionStart" class="marker extension class" refX="18" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 1,7 L18,13 V 1 Z"></path></marker></defs><defs><marker id="mermaidChart235_class-extensionEnd" class="marker extension class" refX="1" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 1,1 V 13 L18,7 Z"></path></marker></defs><defs><marker id="mermaidChart235_class-compositionStart" class="marker composition class" refX="18" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="mermaidChart235_class-compositionEnd" class="marker composition class" refX="1" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="mermaidChart235_class-dependencyStart" class="marker dependency class" refX="6" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 5,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="mermaidChart235_class-dependencyEnd" class="marker dependency class" refX="13" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><defs><marker id="mermaidChart235_class-lollipopStart" class="marker lollipop class" refX="13" refY="7" markerWidth="190" markerHeight="240" orient="auto"><circle stroke="currentColor" fill="transparent" cx="7" cy="7" r="6"></circle></marker></defs><defs><marker id="mermaidChart235_class-lollipopEnd" class="marker lollipop class" refX="1" refY="7" markerWidth="190" markerHeight="240" orient="auto"><circle stroke="currentColor" fill="transparent" cx="7" cy="7" r="6"></circle></marker></defs><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M236.992,51L236.992,55.167C236.992,59.333,236.992,67.667,236.992,76C236.992,84.333,236.992,92.667,236.992,96.833L236.992,101" id="edgeNote1" class=" edge-thickness-normal edge-pattern-dotted relation" style=";fill: none"></path><path d="M187.053,171.864L167.155,181.97C147.257,192.076,107.46,212.288,87.562,229.144C67.664,246,67.664,259.5,67.664,266.25L67.664,273" id="id_Stack_S3_1" class=" edge-thickness-normal edge-pattern-solid relation" style=";" marker-start="url(#mermaidChart235_class-compositionStart)"></path><path d="M236.992,210L236.992,213.75C236.992,217.5,236.992,225,236.992,235.5C236.992,246,236.992,259.5,236.992,266.25L236.992,273" id="id_Stack_Lambda_2" class=" edge-thickness-normal edge-pattern-solid relation" style=";" marker-start="url(#mermaidChart235_class-compositionStart)"></path><path d="M286.932,171.864L306.83,181.97C326.728,192.076,366.524,212.288,386.422,229.144C406.32,246,406.32,259.5,406.32,266.25L406.32,273" id="id_Stack_DynamoDB_3" class=" edge-thickness-normal edge-pattern-solid relation" style=";" marker-start="url(#mermaidChart235_class-compositionStart)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml" class="labelBkg"><span style=";" class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(67.6640625, 232.5)"><g class="label" transform="translate(-33.078125, -15.5)"><foreignObject width="66.15625" height="31"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml" class="labelBkg"><span style=";display: inline-block" class="edgeLabel "><p>contains</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(236.9921875, 232.5)"><g class="label" transform="translate(-33.078125, -15.5)"><foreignObject width="66.15625" height="31"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml" class="labelBkg"><span style=";display: inline-block" class="edgeLabel "><p>contains</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(406.3203125, 232.5)"><g class="label" transform="translate(-33.078125, -15.5)"><foreignObject width="66.15625" height="31"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml" class="labelBkg"><span style=";display: inline-block" class="edgeLabel "><p>contains</p></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default " id="classId-Stack-559" transform="translate(236.9921875, 146.5)"><g class="basic label-container"><path d="M-33.890625 -45.5 L33.890625 -45.5 L33.890625 45.5 L-33.890625 45.5" stroke="none" stroke-width="0" fill="#ECECFF" style=""></path><path d="M-33.890625 -45.5 C-14.975275070565356 -45.5, 3.9400748588692878 -45.5, 33.890625 -45.5 M-33.890625 -45.5 C-9.29327579343827 -45.5, 15.304073413123461 -45.5, 33.890625 -45.5 M33.890625 -45.5 C33.890625 -17.605184145392357, 33.890625 10.289631709215286, 33.890625 45.5 M33.890625 -45.5 C33.890625 -22.18431645266239, 33.890625 1.1313670946752197, 33.890625 45.5 M33.890625 45.5 C18.551043110312918 45.5, 3.211461220625832 45.5, -33.890625 45.5 M33.890625 45.5 C16.28015992778308 45.5, -1.3303051444338365 45.5, -33.890625 45.5 M-33.890625 45.5 C-33.890625 26.681037799138146, -33.890625 7.8620755982762915, -33.890625 -45.5 M-33.890625 45.5 C-33.890625 15.987086238001169, -33.890625 -13.525827523997663, -33.890625 -45.5" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g><g class="annotation-group text" transform="translate(0, -21.5)"></g><g class="label-group text" transform="translate(-21.890625, -21.5)"><g class="label" style="font-weight: bolder" transform="translate(0,-15.5)"><foreignObject width="43.78125" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 90px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>Stack</p></span></div></foreignObject></g></g><g class="members-group text" transform="translate(-21.890625, 33.5)"></g><g class="methods-group text" transform="translate(-21.890625, 63.5)"></g><g class="divider" style=""><path d="M-33.890625 9.5 C-10.621990462568505 9.5, 12.64664407486299 9.5, 33.890625 9.5 M-33.890625 9.5 C-17.755124972769483 9.5, -1.6196249455389662 9.5, 33.890625 9.5" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g><g class="divider" style=""><path d="M-33.890625 27.5 C-18.64588784413992 27.5, -3.401150688279845 27.5, 33.890625 27.5 M-33.890625 27.5 C-20.052004763276038 27.5, -6.213384526552076 27.5, 33.890625 27.5" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g></g><g class="node default " id="classId-S3-560" transform="translate(67.6640625, 334)"><g class="basic label-container"><path d="M-59.6640625 -61 L59.6640625 -61 L59.6640625 61 L-59.6640625 61" stroke="none" stroke-width="0" fill="#ECECFF" style=""></path><path d="M-59.6640625 -61 C-29.17210477156537 -61, 1.319852956869262 -61, 59.6640625 -61 M-59.6640625 -61 C-29.333365474618297 -61, 0.9973315507634055 -61, 59.6640625 -61 M59.6640625 -61 C59.6640625 -17.708525569749142, 59.6640625 25.582948860501716, 59.6640625 61 M59.6640625 -61 C59.6640625 -23.801621332614822, 59.6640625 13.396757334770356, 59.6640625 61 M59.6640625 61 C26.197650352366324 61, -7.268761795267352 61, -59.6640625 61 M59.6640625 61 C18.114417918223026 61, -23.435226663553948 61, -59.6640625 61 M-59.6640625 61 C-59.6640625 35.82546664524129, -59.6640625 10.650933290482577, -59.6640625 -61 M-59.6640625 61 C-59.6640625 28.36893983457267, -59.6640625 -4.262120330854657, -59.6640625 -61" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g><g class="annotation-group text" transform="translate(-47.6640625, -37)"><g class="label" style="" transform="translate(0,-15.5)"><foreignObject width="95.328125" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 136px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>«Construct»</p></span></div></foreignObject></g></g><g class="label-group text" transform="translate(-10.21875, -6)"><g class="label" style="font-weight: bolder" transform="translate(0,-15.5)"><foreignObject width="20.4375" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 70px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>S3</p></span></div></foreignObject></g></g><g class="members-group text" transform="translate(-47.6640625, 49)"></g><g class="methods-group text" transform="translate(-47.6640625, 79)"></g><g class="divider" style=""><path d="M-59.6640625 25 C-16.262686716718328 25, 27.138689066563344 25, 59.6640625 25 M-59.6640625 25 C-29.83771435233124 25, -0.011366204662479618 25, 59.6640625 25" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g><g class="divider" style=""><path d="M-59.6640625 43 C-28.640412101114304 43, 2.383238297771392 43, 59.6640625 43 M-59.6640625 43 C-16.86614296266366 43, 25.931776574672682 43, 59.6640625 43" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g></g><g class="node default " id="classId-Lambda-561" transform="translate(236.9921875, 334)"><g class="basic label-container"><path d="M-59.6640625 -61 L59.6640625 -61 L59.6640625 61 L-59.6640625 61" stroke="none" stroke-width="0" fill="#ECECFF" style=""></path><path d="M-59.6640625 -61 C-34.0941420712586 -61, -8.524221642517205 -61, 59.6640625 -61 M-59.6640625 -61 C-16.764196534328946 -61, 26.13566943134211 -61, 59.6640625 -61 M59.6640625 -61 C59.6640625 -24.055658605211043, 59.6640625 12.888682789577913, 59.6640625 61 M59.6640625 -61 C59.6640625 -36.48687259755424, 59.6640625 -11.973745195108485, 59.6640625 61 M59.6640625 61 C14.114600621342092 61, -31.434861257315816 61, -59.6640625 61 M59.6640625 61 C20.517960878109115 61, -18.62814074378177 61, -59.6640625 61 M-59.6640625 61 C-59.6640625 17.717504809363867, -59.6640625 -25.564990381272267, -59.6640625 -61 M-59.6640625 61 C-59.6640625 15.767592970381791, -59.6640625 -29.464814059236417, -59.6640625 -61" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g><g class="annotation-group text" transform="translate(-47.6640625, -37)"><g class="label" style="" transform="translate(0,-15.5)"><foreignObject width="95.328125" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 136px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>«Construct»</p></span></div></foreignObject></g></g><g class="label-group text" transform="translate(-32.578125, -6)"><g class="label" style="font-weight: bolder" transform="translate(0,-15.5)"><foreignObject width="65.15625" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 108px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>Lambda</p></span></div></foreignObject></g></g><g class="members-group text" transform="translate(-47.6640625, 49)"></g><g class="methods-group text" transform="translate(-47.6640625, 79)"></g><g class="divider" style=""><path d="M-59.6640625 25 C-19.445716280614903 25, 20.772629938770194 25, 59.6640625 25 M-59.6640625 25 C-33.88472816882849 25, -8.105393837656969 25, 59.6640625 25" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g><g class="divider" style=""><path d="M-59.6640625 43 C-22.831432065677014 43, 14.001198368645973 43, 59.6640625 43 M-59.6640625 43 C-14.736177455619178 43, 30.191707588761645 43, 59.6640625 43" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g></g><g class="node default " id="classId-DynamoDB-562" transform="translate(406.3203125, 334)"><g class="basic label-container"><path d="M-59.6640625 -61 L59.6640625 -61 L59.6640625 61 L-59.6640625 61" stroke="none" stroke-width="0" fill="#ECECFF" style=""></path><path d="M-59.6640625 -61 C-18.886993649680413 -61, 21.890075200639174 -61, 59.6640625 -61 M-59.6640625 -61 C-31.483466248375848 -61, -3.3028699967516957 -61, 59.6640625 -61 M59.6640625 -61 C59.6640625 -17.163006027845164, 59.6640625 26.673987944309673, 59.6640625 61 M59.6640625 -61 C59.6640625 -13.04946288075461, 59.6640625 34.90107423849078, 59.6640625 61 M59.6640625 61 C15.805693708595271 61, -28.052675082809458 61, -59.6640625 61 M59.6640625 61 C33.71425198208282 61, 7.7644414641656425 61, -59.6640625 61 M-59.6640625 61 C-59.6640625 31.84421669133522, -59.6640625 2.688433382670439, -59.6640625 -61 M-59.6640625 61 C-59.6640625 35.446576487858444, -59.6640625 9.893152975716887, -59.6640625 -61" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g><g class="annotation-group text" transform="translate(-47.6640625, -37)"><g class="label" style="" transform="translate(0,-15.5)"><foreignObject width="95.328125" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 136px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>«Construct»</p></span></div></foreignObject></g></g><g class="label-group text" transform="translate(-44.734375, -6)"><g class="label" style="font-weight: bolder" transform="translate(0,-15.5)"><foreignObject width="89.46875" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 132px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>DynamoDB</p></span></div></foreignObject></g></g><g class="members-group text" transform="translate(-47.6640625, 49)"></g><g class="methods-group text" transform="translate(-47.6640625, 79)"></g><g class="divider" style=""><path d="M-59.6640625 25 C-13.839351528364915 25, 31.98535944327017 25, 59.6640625 25 M-59.6640625 25 C-19.856991472793005 25, 19.95007955441399 25, 59.6640625 25" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g><g class="divider" style=""><path d="M-59.6640625 43 C-19.352686199031496 43, 20.95869010193701 43, 59.6640625 43 M-59.6640625 43 C-17.821483876571918 43, 24.021094746856164 43, 59.6640625 43" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g></g><g class="node undefined " id="note0" transform="translate(236.9921875, 29.5)"><g class="basic label-container"><path d="M-116.875 -21.5 L116.875 -21.5 L116.875 21.5 L-116.875 21.5" stroke="none" stroke-width="0" fill="#fff5ad" style="fill:#fff5ad !important;stroke:#aaaa33 !important"></path><path d="M-116.875 -21.5 C-35.85682916930985 -21.5, 45.161341661380305 -21.5, 116.875 -21.5 M-116.875 -21.5 C-48.35118803748095 -21.5, 20.172623925038096 -21.5, 116.875 -21.5 M116.875 -21.5 C116.875 -8.502672132937517, 116.875 4.494655734124965, 116.875 21.5 M116.875 -21.5 C116.875 -12.021157864655015, 116.875 -2.5423157293100296, 116.875 21.5 M116.875 21.5 C52.83626579227044 21.5, -11.202468415459123 21.5, -116.875 21.5 M116.875 21.5 C39.20574673669229 21.5, -38.46350652661542 21.5, -116.875 21.5 M-116.875 21.5 C-116.875 9.967767839099364, -116.875 -1.564464321801271, -116.875 -21.5 M-116.875 21.5 C-116.875 9.523802760722932, -116.875 -2.4523944785541367, -116.875 -21.5" stroke="#aaaa33" stroke-width="1.3" fill="none" style="fill:#fff5ad !important;stroke:#aaaa33 !important"></path></g><g class="label" style="text-align:left !important;white-space:nowrap !important" transform="translate(-110.875, -15.5)"><rect></rect><foreignObject width="221.75" height="31"><div style="text-align: center; white-space: break-spaces; display: table; line-height: 1.5; max-width: 200px; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span style="text-align:left !important;white-space:nowrap !important" class="nodeLabel "><p>A unit of deployment in CDK</p></span></div></foreignObject></g></g></g></g></g></svg></div><p><em><span>Diagram showing a Stack box containing icons/boxes for S3, Lambda, DynamoDB constructs</span></em></p><p><span>&quot;Each CDK Stack class you define (e.g., </span><code>class MyApiStack extends cdk.Stack</code><span>) synthesizes into a single CloudFormation template and corresponds directly to a CloudFormation stack in your AWS account.&quot;</span></p><h3 id='app'><span>App</span></h3><p><span>&quot;Finally, there&#39;s the </span><strong><span>App</span></strong><span>,&quot; Maya said, completing her diagram. &quot;An App is the root construct in a CDK application. It&#39;s the container for one or more Stacks.&quot;</span></p><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart236" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="classDiagram mermaid-svg" style="max-width: 819.72265625px;" viewBox="-8 -8 819.72265625 583" role="graphics-document document" aria-roledescription="class"><style>#mermaidChart236{font-family:sans-serif;font-size:16px;fill:#333;}#mermaidChart236 .error-icon{fill:#552222;}#mermaidChart236 .error-text{fill:#552222;stroke:#552222;}#mermaidChart236 .edge-thickness-normal{stroke-width:1px;}#mermaidChart236 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart236 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart236 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaidChart236 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart236 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart236 .marker{fill:#333333;stroke:#333333;}#mermaidChart236 .marker.cross{stroke:#333333;}#mermaidChart236 svg{font-family:sans-serif;font-size:16px;}#mermaidChart236 p{margin:0;}#mermaidChart236 g.classGroup text{fill:#9370DB;stroke:none;font-family:sans-serif;font-size:10px;}#mermaidChart236 g.classGroup text .title{font-weight:bolder;}#mermaidChart236 .nodeLabel,#mermaidChart236 .edgeLabel{color:#131300;}#mermaidChart236 .edgeLabel .label rect{fill:#ECECFF;}#mermaidChart236 .label text{fill:#131300;}#mermaidChart236 .labelBkg{background:#ECECFF;}#mermaidChart236 .edgeLabel .label span{background:#ECECFF;}#mermaidChart236 .classTitle{font-weight:bolder;}#mermaidChart236 .node rect,#mermaidChart236 .node circle,#mermaidChart236 .node ellipse,#mermaidChart236 .node polygon,#mermaidChart236 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaidChart236 .divider{stroke:#9370DB;stroke-width:1;}#mermaidChart236 g.clickable{cursor:pointer;}#mermaidChart236 g.classGroup rect{fill:#ECECFF;stroke:#9370DB;}#mermaidChart236 g.classGroup line{stroke:#9370DB;stroke-width:1;}#mermaidChart236 .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5;}#mermaidChart236 .classLabel .label{fill:#9370DB;font-size:10px;}#mermaidChart236 .relation{stroke:#333333;stroke-width:1;fill:none;}#mermaidChart236 .dashed-line{stroke-dasharray:3;}#mermaidChart236 .dotted-line{stroke-dasharray:1 2;}#mermaidChart236 #compositionStart,#mermaidChart236 .composition{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaidChart236 #compositionEnd,#mermaidChart236 .composition{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaidChart236 #dependencyStart,#mermaidChart236 .dependency{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaidChart236 #dependencyStart,#mermaidChart236 .dependency{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaidChart236 #extensionStart,#mermaidChart236 .extension{fill:transparent!important;stroke:#333333!important;stroke-width:1;}#mermaidChart236 #extensionEnd,#mermaidChart236 .extension{fill:transparent!important;stroke:#333333!important;stroke-width:1;}#mermaidChart236 #aggregationStart,#mermaidChart236 .aggregation{fill:transparent!important;stroke:#333333!important;stroke-width:1;}#mermaidChart236 #aggregationEnd,#mermaidChart236 .aggregation{fill:transparent!important;stroke:#333333!important;stroke-width:1;}#mermaidChart236 #lollipopStart,#mermaidChart236 .lollipop{fill:#ECECFF!important;stroke:#333333!important;stroke-width:1;}#mermaidChart236 #lollipopEnd,#mermaidChart236 .lollipop{fill:#ECECFF!important;stroke:#333333!important;stroke-width:1;}#mermaidChart236 .edgeTerminals{font-size:11px;line-height:initial;}#mermaidChart236 .classTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaidChart236 :root{--mermaid-alt-font-family:sans-serif;}</style><g><defs><marker id="mermaidChart236_class-aggregationStart" class="marker aggregation class" refX="18" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="mermaidChart236_class-aggregationEnd" class="marker aggregation class" refX="1" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="mermaidChart236_class-extensionStart" class="marker extension class" refX="18" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 1,7 L18,13 V 1 Z"></path></marker></defs><defs><marker id="mermaidChart236_class-extensionEnd" class="marker extension class" refX="1" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 1,1 V 13 L18,7 Z"></path></marker></defs><defs><marker id="mermaidChart236_class-compositionStart" class="marker composition class" refX="18" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="mermaidChart236_class-compositionEnd" class="marker composition class" refX="1" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="mermaidChart236_class-dependencyStart" class="marker dependency class" refX="6" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 5,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="mermaidChart236_class-dependencyEnd" class="marker dependency class" refX="13" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><defs><marker id="mermaidChart236_class-lollipopStart" class="marker lollipop class" refX="13" refY="7" markerWidth="190" markerHeight="240" orient="auto"><circle stroke="currentColor" fill="transparent" cx="7" cy="7" r="6"></circle></marker></defs><defs><marker id="mermaidChart236_class-lollipopEnd" class="marker lollipop class" refX="1" refY="7" markerWidth="190" markerHeight="240" orient="auto"><circle stroke="currentColor" fill="transparent" cx="7" cy="7" r="6"></circle></marker></defs><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M373.797,51L373.797,55.167C373.797,59.333,373.797,67.667,373.797,76C373.797,84.333,373.797,92.667,373.797,96.833L373.797,101" id="edgeNote1" class=" edge-thickness-normal edge-pattern-dotted relation" style=";fill: none"></path><path d="M151.633,168L151.633,178.75C151.633,189.5,151.633,211,151.633,228.5C151.633,246,151.633,259.5,151.633,266.25L151.633,273" id="edgeNote2" class=" edge-thickness-normal edge-pattern-dotted relation" style=";fill: none"></path><path d="M604.398,168L604.398,178.75C604.398,189.5,604.398,211,604.398,228.5C604.398,246,604.398,259.5,604.398,266.25L604.398,273" id="edgeNote3" class=" edge-thickness-normal edge-pattern-dotted relation" style=";fill: none"></path><path d="M373.797,210L373.797,213.75C373.797,217.5,373.797,225,347.523,238.92C321.25,252.841,268.703,273.182,242.43,283.352L216.156,293.523" id="id_App_StorageStack_1" class=" edge-thickness-normal edge-pattern-solid relation" style=";" marker-start="url(#mermaidChart236_class-compositionStart)"></path><path d="M419.554,160.372L459.208,172.393C498.861,184.414,578.169,208.457,613.657,227.229C649.145,246,640.813,259.5,636.646,266.25L632.48,273" id="id_App_ComputeStack_2" class=" edge-thickness-normal edge-pattern-solid relation" style=";" marker-start="url(#mermaidChart236_class-compositionStart)"></path><path d="M151.633,382L151.633,385.75C151.633,389.5,151.633,397,151.633,407.5C151.633,418,151.633,431.5,151.633,438.25L151.633,445" id="id_StorageStack_S3_3" class=" edge-thickness-normal edge-pattern-solid relation" style=";" marker-start="url(#mermaidChart236_class-compositionStart)"></path><path d="M233.197,346.247L261.737,355.956C290.276,365.665,347.355,385.082,375.894,401.541C404.434,418,404.434,431.5,404.434,438.25L404.434,445" id="id_StorageStack_DynamoDB_4" class=" edge-thickness-normal edge-pattern-solid relation" style=";" marker-start="url(#mermaidChart236_class-compositionStart)"></path><path d="M582.149,380.956L580.751,384.88C579.353,388.804,576.557,396.652,575.16,407.326C573.762,418,573.762,431.5,573.762,438.25L573.762,445" id="id_ComputeStack_Lambda_5" class=" edge-thickness-normal edge-pattern-solid relation" style=";" marker-start="url(#mermaidChart236_class-compositionStart)"></path><path d="M689.578,371.135L698.577,376.695C707.577,382.256,725.576,393.378,734.575,405.689C743.574,418,743.574,431.5,743.574,438.25L743.574,445" id="id_ComputeStack_APIGateway_6" class=" edge-thickness-normal edge-pattern-solid relation" style=";" marker-start="url(#mermaidChart236_class-compositionStart)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml" class="labelBkg"><span style=";" class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml" class="labelBkg"><span style=";" class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml" class="labelBkg"><span style=";" class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(373.796875, 232.5)"><g class="label" transform="translate(-33.078125, -15.5)"><foreignObject width="66.15625" height="31"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml" class="labelBkg"><span style=";display: inline-block" class="edgeLabel "><p>contains</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(657.4765625, 232.5)"><g class="label" transform="translate(-33.078125, -15.5)"><foreignObject width="66.15625" height="31"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml" class="labelBkg"><span style=";display: inline-block" class="edgeLabel "><p>contains</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(151.6328125, 404.5)"><g class="label" transform="translate(-33.078125, -15.5)"><foreignObject width="66.15625" height="31"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml" class="labelBkg"><span style=";display: inline-block" class="edgeLabel "><p>contains</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(404.43359375, 404.5)"><g class="label" transform="translate(-33.078125, -15.5)"><foreignObject width="66.15625" height="31"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml" class="labelBkg"><span style=";display: inline-block" class="edgeLabel "><p>contains</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(573.76171875, 404.5)"><g class="label" transform="translate(-33.078125, -15.5)"><foreignObject width="66.15625" height="31"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml" class="labelBkg"><span style=";display: inline-block" class="edgeLabel "><p>contains</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(743.57421875, 404.5)"><g class="label" transform="translate(-33.078125, -15.5)"><foreignObject width="66.15625" height="31"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml" class="labelBkg"><span style=";display: inline-block" class="edgeLabel "><p>contains</p></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default " id="classId-App-563" transform="translate(373.796875, 146.5)"><g class="basic label-container"><path d="M-28.53125 -45.5 L28.53125 -45.5 L28.53125 45.5 L-28.53125 45.5" stroke="none" stroke-width="0" fill="#ECECFF" style=""></path><path d="M-28.53125 -45.5 C-9.825158468397568 -45.5, 8.880933063204864 -45.5, 28.53125 -45.5 M-28.53125 -45.5 C-13.11312631956238 -45.5, 2.304997360875241 -45.5, 28.53125 -45.5 M28.53125 -45.5 C28.53125 -15.47665140870927, 28.53125 14.546697182581461, 28.53125 45.5 M28.53125 -45.5 C28.53125 -17.591732723010423, 28.53125 10.316534553979153, 28.53125 45.5 M28.53125 45.5 C12.866107308320421 45.5, -2.7990353833591577 45.5, -28.53125 45.5 M28.53125 45.5 C14.996835892086025 45.5, 1.4624217841720508 45.5, -28.53125 45.5 M-28.53125 45.5 C-28.53125 19.32128379871256, -28.53125 -6.857432402574879, -28.53125 -45.5 M-28.53125 45.5 C-28.53125 9.169564917904992, -28.53125 -27.160870164190015, -28.53125 -45.5" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g><g class="annotation-group text" transform="translate(0, -21.5)"></g><g class="label-group text" transform="translate(-16.53125, -21.5)"><g class="label" style="font-weight: bolder" transform="translate(0,-15.5)"><foreignObject width="33.0625" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 78px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>App</p></span></div></foreignObject></g></g><g class="members-group text" transform="translate(-16.53125, 33.5)"></g><g class="methods-group text" transform="translate(-16.53125, 63.5)"></g><g class="divider" style=""><path d="M-28.53125 9.5 C-15.140464798880991 9.5, -1.7496795977619826 9.5, 28.53125 9.5 M-28.53125 9.5 C-8.3186497243444 9.5, 11.8939505513112 9.5, 28.53125 9.5" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g><g class="divider" style=""><path d="M-28.53125 27.5 C-12.936379882603742 27.5, 2.6584902347925166 27.5, 28.53125 27.5 M-28.53125 27.5 C-9.861276392577906 27.5, 8.808697214844187 27.5, 28.53125 27.5" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g></g><g class="node default " id="classId-StorageStack-564" transform="translate(151.6328125, 318.5)"><g class="basic label-container"><path d="M-64.5234375 -45.5 L64.5234375 -45.5 L64.5234375 45.5 L-64.5234375 45.5" stroke="none" stroke-width="0" fill="#ECECFF" style=""></path><path d="M-64.5234375 -45.5 C-15.683615588179656 -45.5, 33.15620632364069 -45.5, 64.5234375 -45.5 M-64.5234375 -45.5 C-25.438984040818042 -45.5, 13.645469418363916 -45.5, 64.5234375 -45.5 M64.5234375 -45.5 C64.5234375 -23.175048238769186, 64.5234375 -0.8500964775383721, 64.5234375 45.5 M64.5234375 -45.5 C64.5234375 -10.74192854443745, 64.5234375 24.0161429111251, 64.5234375 45.5 M64.5234375 45.5 C37.44207549164436 45.5, 10.360713483288713 45.5, -64.5234375 45.5 M64.5234375 45.5 C14.740797842014778 45.5, -35.04184181597044 45.5, -64.5234375 45.5 M-64.5234375 45.5 C-64.5234375 26.52398035930705, -64.5234375 7.5479607186141, -64.5234375 -45.5 M-64.5234375 45.5 C-64.5234375 21.787219237639075, -64.5234375 -1.92556152472185, -64.5234375 -45.5" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g><g class="annotation-group text" transform="translate(0, -21.5)"></g><g class="label-group text" transform="translate(-52.5234375, -21.5)"><g class="label" style="font-weight: bolder" transform="translate(0,-15.5)"><foreignObject width="105.046875" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 146px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>StorageStack</p></span></div></foreignObject></g></g><g class="members-group text" transform="translate(-52.5234375, 33.5)"></g><g class="methods-group text" transform="translate(-52.5234375, 63.5)"></g><g class="divider" style=""><path d="M-64.5234375 9.5 C-20.754629111085222 9.5, 23.014179277829555 9.5, 64.5234375 9.5 M-64.5234375 9.5 C-22.775713424640394 9.5, 18.972010650719213 9.5, 64.5234375 9.5" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g><g class="divider" style=""><path d="M-64.5234375 27.5 C-20.03060337634105 27.5, 24.462230747317903 27.5, 64.5234375 27.5 M-64.5234375 27.5 C-25.68176048230336 27.5, 13.159916535393279 27.5, 64.5234375 27.5" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g></g><g class="node default " id="classId-ComputeStack-565" transform="translate(604.3984375, 318.5)"><g class="basic label-container"><path d="M-69.8671875 -45.5 L69.8671875 -45.5 L69.8671875 45.5 L-69.8671875 45.5" stroke="none" stroke-width="0" fill="#ECECFF" style=""></path><path d="M-69.8671875 -45.5 C-36.08583498953469 -45.5, -2.304482479069378 -45.5, 69.8671875 -45.5 M-69.8671875 -45.5 C-22.626540177104808 -45.5, 24.614107145790385 -45.5, 69.8671875 -45.5 M69.8671875 -45.5 C69.8671875 -25.933890615674223, 69.8671875 -6.367781231348445, 69.8671875 45.5 M69.8671875 -45.5 C69.8671875 -24.46733942929408, 69.8671875 -3.434678858588157, 69.8671875 45.5 M69.8671875 45.5 C34.49064516903262 45.5, -0.8858971619347642 45.5, -69.8671875 45.5 M69.8671875 45.5 C15.103645914699676 45.5, -39.65989567060065 45.5, -69.8671875 45.5 M-69.8671875 45.5 C-69.8671875 14.818012770911917, -69.8671875 -15.863974458176166, -69.8671875 -45.5 M-69.8671875 45.5 C-69.8671875 18.60251509938762, -69.8671875 -8.29496980122476, -69.8671875 -45.5" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g><g class="annotation-group text" transform="translate(0, -21.5)"></g><g class="label-group text" transform="translate(-57.8671875, -21.5)"><g class="label" style="font-weight: bolder" transform="translate(0,-15.5)"><foreignObject width="115.734375" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 155px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>ComputeStack</p></span></div></foreignObject></g></g><g class="members-group text" transform="translate(-57.8671875, 33.5)"></g><g class="methods-group text" transform="translate(-57.8671875, 63.5)"></g><g class="divider" style=""><path d="M-69.8671875 9.5 C-26.0603341600847 9.5, 17.7465191798306 9.5, 69.8671875 9.5 M-69.8671875 9.5 C-28.151162406649448 9.5, 13.564862686701105 9.5, 69.8671875 9.5" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g><g class="divider" style=""><path d="M-69.8671875 27.5 C-39.57684578538762 27.5, -9.286504070775244 27.5, 69.8671875 27.5 M-69.8671875 27.5 C-14.307784731289082 27.5, 41.251618037421835 27.5, 69.8671875 27.5" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g></g><g class="node default " id="classId-S3-566" transform="translate(151.6328125, 506)"><g class="basic label-container"><path d="M-59.6640625 -61 L59.6640625 -61 L59.6640625 61 L-59.6640625 61" stroke="none" stroke-width="0" fill="#ECECFF" style=""></path><path d="M-59.6640625 -61 C-19.49021553871537 -61, 20.683631422569263 -61, 59.6640625 -61 M-59.6640625 -61 C-20.93014351371683 -61, 17.803775472566343 -61, 59.6640625 -61 M59.6640625 -61 C59.6640625 -36.132870957011406, 59.6640625 -11.265741914022811, 59.6640625 61 M59.6640625 -61 C59.6640625 -23.018106896868453, 59.6640625 14.963786206263094, 59.6640625 61 M59.6640625 61 C34.42960006259478 61, 9.19513762518956 61, -59.6640625 61 M59.6640625 61 C32.92233715484514 61, 6.180611809690284 61, -59.6640625 61 M-59.6640625 61 C-59.6640625 31.783959192921266, -59.6640625 2.567918385842532, -59.6640625 -61 M-59.6640625 61 C-59.6640625 28.402671876762398, -59.6640625 -4.194656246475205, -59.6640625 -61" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g><g class="annotation-group text" transform="translate(-47.6640625, -37)"><g class="label" style="" transform="translate(0,-15.5)"><foreignObject width="95.328125" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 136px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>«Construct»</p></span></div></foreignObject></g></g><g class="label-group text" transform="translate(-10.21875, -6)"><g class="label" style="font-weight: bolder" transform="translate(0,-15.5)"><foreignObject width="20.4375" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 70px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>S3</p></span></div></foreignObject></g></g><g class="members-group text" transform="translate(-47.6640625, 49)"></g><g class="methods-group text" transform="translate(-47.6640625, 79)"></g><g class="divider" style=""><path d="M-59.6640625 25 C-14.228375442934173 25, 31.207311614131655 25, 59.6640625 25 M-59.6640625 25 C-24.546908142232454 25, 10.570246215535093 25, 59.6640625 25" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g><g class="divider" style=""><path d="M-59.6640625 43 C-14.454538451998914 43, 30.75498559600217 43, 59.6640625 43 M-59.6640625 43 C-26.50273592763366 43, 6.6585906447326835 43, 59.6640625 43" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g></g><g class="node default " id="classId-DynamoDB-567" transform="translate(404.43359375, 506)"><g class="basic label-container"><path d="M-59.6640625 -61 L59.6640625 -61 L59.6640625 61 L-59.6640625 61" stroke="none" stroke-width="0" fill="#ECECFF" style=""></path><path d="M-59.6640625 -61 C-35.46687004644766 -61, -11.26967759289532 -61, 59.6640625 -61 M-59.6640625 -61 C-16.484291484704627 -61, 26.695479530590745 -61, 59.6640625 -61 M59.6640625 -61 C59.6640625 -28.670679927030505, 59.6640625 3.658640145938989, 59.6640625 61 M59.6640625 -61 C59.6640625 -36.120697841598506, 59.6640625 -11.241395683197013, 59.6640625 61 M59.6640625 61 C34.73622562941941 61, 9.808388758838824 61, -59.6640625 61 M59.6640625 61 C31.747500443068315 61, 3.83093838613663 61, -59.6640625 61 M-59.6640625 61 C-59.6640625 32.928509753952596, -59.6640625 4.8570195079052, -59.6640625 -61 M-59.6640625 61 C-59.6640625 16.606558610175064, -59.6640625 -27.786882779649872, -59.6640625 -61" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g><g class="annotation-group text" transform="translate(-47.6640625, -37)"><g class="label" style="" transform="translate(0,-15.5)"><foreignObject width="95.328125" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 136px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>«Construct»</p></span></div></foreignObject></g></g><g class="label-group text" transform="translate(-44.734375, -6)"><g class="label" style="font-weight: bolder" transform="translate(0,-15.5)"><foreignObject width="89.46875" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 132px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>DynamoDB</p></span></div></foreignObject></g></g><g class="members-group text" transform="translate(-47.6640625, 49)"></g><g class="methods-group text" transform="translate(-47.6640625, 79)"></g><g class="divider" style=""><path d="M-59.6640625 25 C-35.54371374513258 25, -11.423364990265163 25, 59.6640625 25 M-59.6640625 25 C-25.579624112588206 25, 8.504814274823588 25, 59.6640625 25" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g><g class="divider" style=""><path d="M-59.6640625 43 C-35.126412129640315 43, -10.588761759280636 43, 59.6640625 43 M-59.6640625 43 C-28.988001199509284 43, 1.6880601009814313 43, 59.6640625 43" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g></g><g class="node default " id="classId-Lambda-568" transform="translate(573.76171875, 506)"><g class="basic label-container"><path d="M-59.6640625 -61 L59.6640625 -61 L59.6640625 61 L-59.6640625 61" stroke="none" stroke-width="0" fill="#ECECFF" style=""></path><path d="M-59.6640625 -61 C-26.500805114323704 -61, 6.662452271352592 -61, 59.6640625 -61 M-59.6640625 -61 C-15.690254505075053 -61, 28.283553489849893 -61, 59.6640625 -61 M59.6640625 -61 C59.6640625 -27.521254945412437, 59.6640625 5.957490109175126, 59.6640625 61 M59.6640625 -61 C59.6640625 -23.93764127019955, 59.6640625 13.124717459600902, 59.6640625 61 M59.6640625 61 C18.26236198835913 61, -23.139338523281737 61, -59.6640625 61 M59.6640625 61 C28.265467445227838 61, -3.1331276095443243 61, -59.6640625 61 M-59.6640625 61 C-59.6640625 29.369251465727835, -59.6640625 -2.2614970685443296, -59.6640625 -61 M-59.6640625 61 C-59.6640625 15.271340788826507, -59.6640625 -30.457318422346987, -59.6640625 -61" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g><g class="annotation-group text" transform="translate(-47.6640625, -37)"><g class="label" style="" transform="translate(0,-15.5)"><foreignObject width="95.328125" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 136px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>«Construct»</p></span></div></foreignObject></g></g><g class="label-group text" transform="translate(-32.578125, -6)"><g class="label" style="font-weight: bolder" transform="translate(0,-15.5)"><foreignObject width="65.15625" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 108px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>Lambda</p></span></div></foreignObject></g></g><g class="members-group text" transform="translate(-47.6640625, 49)"></g><g class="methods-group text" transform="translate(-47.6640625, 79)"></g><g class="divider" style=""><path d="M-59.6640625 25 C-20.060968215427216 25, 19.542126069145567 25, 59.6640625 25 M-59.6640625 25 C-25.77097314656345 25, 8.122116206873102 25, 59.6640625 25" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g><g class="divider" style=""><path d="M-59.6640625 43 C-34.79560122372578 43, -9.927139947451558 43, 59.6640625 43 M-59.6640625 43 C-15.93830090014417 43, 27.78746069971166 43, 59.6640625 43" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g></g><g class="node default " id="classId-APIGateway-569" transform="translate(743.57421875, 506)"><g class="basic label-container"><path d="M-60.1484375 -61 L60.1484375 -61 L60.1484375 61 L-60.1484375 61" stroke="none" stroke-width="0" fill="#ECECFF" style=""></path><path d="M-60.1484375 -61 C-25.513963350768385 -61, 9.12051079846323 -61, 60.1484375 -61 M-60.1484375 -61 C-21.046190863411418 -61, 18.056055773177164 -61, 60.1484375 -61 M60.1484375 -61 C60.1484375 -29.867957588495045, 60.1484375 1.2640848230099095, 60.1484375 61 M60.1484375 -61 C60.1484375 -22.064510432076098, 60.1484375 16.870979135847804, 60.1484375 61 M60.1484375 61 C17.715468594116388 61, -24.717500311767225 61, -60.1484375 61 M60.1484375 61 C33.434791754587145 61, 6.721146009174291 61, -60.1484375 61 M-60.1484375 61 C-60.1484375 23.47361480783504, -60.1484375 -14.052770384329918, -60.1484375 -61 M-60.1484375 61 C-60.1484375 15.928971099280467, -60.1484375 -29.142057801439066, -60.1484375 -61" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g><g class="annotation-group text" transform="translate(-47.6640625, -37)"><g class="label" style="" transform="translate(0,-15.5)"><foreignObject width="95.328125" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 136px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>«Construct»</p></span></div></foreignObject></g></g><g class="label-group text" transform="translate(-48.1484375, -6)"><g class="label" style="font-weight: bolder" transform="translate(0,-15.5)"><foreignObject width="96.296875" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 139px; text-align: center;"><span class="nodeLabel markdown-node-label" style=""><p>APIGateway</p></span></div></foreignObject></g></g><g class="members-group text" transform="translate(-48.1484375, 49)"></g><g class="methods-group text" transform="translate(-48.1484375, 79)"></g><g class="divider" style=""><path d="M-60.1484375 25 C-22.014794461013956 25, 16.118848577972088 25, 60.1484375 25 M-60.1484375 25 C-24.016154088687244 25, 12.116129322625511 25, 60.1484375 25" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g><g class="divider" style=""><path d="M-60.1484375 43 C-18.35440295128364 43, 23.439631597432722 43, 60.1484375 43 M-60.1484375 43 C-18.617783419609985 43, 22.91287066078003 43, 60.1484375 43" stroke="#9370DB" stroke-width="1.3" fill="none" style=""></path></g></g><g class="node undefined " id="note0" transform="translate(373.796875, 29.5)"><g class="basic label-container"><path d="M-93.0546875 -21.5 L93.0546875 -21.5 L93.0546875 21.5 L-93.0546875 21.5" stroke="none" stroke-width="0" fill="#fff5ad" style="fill:#fff5ad !important;stroke:#aaaa33 !important"></path><path d="M-93.0546875 -21.5 C-31.472616054938584 -21.5, 30.109455390122832 -21.5, 93.0546875 -21.5 M-93.0546875 -21.5 C-51.37629479841294 -21.5, -9.697902096825885 -21.5, 93.0546875 -21.5 M93.0546875 -21.5 C93.0546875 -4.539849109474471, 93.0546875 12.420301781051059, 93.0546875 21.5 M93.0546875 -21.5 C93.0546875 -12.395347239261396, 93.0546875 -3.2906944785227914, 93.0546875 21.5 M93.0546875 21.5 C35.38248052143187 21.5, -22.289726457136254 21.5, -93.0546875 21.5 M93.0546875 21.5 C51.93361476108743 21.5, 10.812542022174867 21.5, -93.0546875 21.5 M-93.0546875 21.5 C-93.0546875 8.07250829548758, -93.0546875 -5.35498340902484, -93.0546875 -21.5 M-93.0546875 21.5 C-93.0546875 11.725390140385189, -93.0546875 1.9507802807703776, -93.0546875 -21.5" stroke="#aaaa33" stroke-width="1.3" fill="none" style="fill:#fff5ad !important;stroke:#aaaa33 !important"></path></g><g class="label" style="text-align:left !important;white-space:nowrap !important" transform="translate(-87.0546875, -15.5)"><rect></rect><foreignObject width="174.109375" height="31"><div style="text-align: center; white-space: nowrap; display: table-cell; line-height: 1.5; max-width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span style="text-align:left !important;white-space:nowrap !important" class="nodeLabel "><p>Root construct in CDK</p></span></div></foreignObject></g></g><g class="node undefined " id="note1" transform="translate(151.6328125, 146.5)"><g class="basic label-container"><path d="M-143.6328125 -21.5 L143.6328125 -21.5 L143.6328125 21.5 L-143.6328125 21.5" stroke="none" stroke-width="0" fill="#fff5ad" style="fill:#fff5ad !important;stroke:#aaaa33 !important"></path><path d="M-143.6328125 -21.5 C-47.460950563995354 -21.5, 48.71091137200929 -21.5, 143.6328125 -21.5 M-143.6328125 -21.5 C-38.46228046499216 -21.5, 66.70825157001568 -21.5, 143.6328125 -21.5 M143.6328125 -21.5 C143.6328125 -8.447773088094584, 143.6328125 4.604453823810832, 143.6328125 21.5 M143.6328125 -21.5 C143.6328125 -9.559473575105446, 143.6328125 2.381052849789107, 143.6328125 21.5 M143.6328125 21.5 C51.191001373210185 21.5, -41.25080975357963 21.5, -143.6328125 21.5 M143.6328125 21.5 C32.439770039835835 21.5, -78.75327242032833 21.5, -143.6328125 21.5 M-143.6328125 21.5 C-143.6328125 9.49378529319448, -143.6328125 -2.5124294136110414, -143.6328125 -21.5 M-143.6328125 21.5 C-143.6328125 4.91796415143677, -143.6328125 -11.66407169712646, -143.6328125 -21.5" stroke="#aaaa33" stroke-width="1.3" fill="none" style="fill:#fff5ad !important;stroke:#aaaa33 !important"></path></g><g class="label" style="text-align:left !important;white-space:nowrap !important" transform="translate(-137.6328125, -15.5)"><rect></rect><foreignObject width="275.265625" height="31"><div style="text-align: center; white-space: break-spaces; display: table; line-height: 1.5; max-width: 200px; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span style="text-align:left !important;white-space:nowrap !important" class="nodeLabel "><p>Stack for storage-related resources</p></span></div></foreignObject></g></g><g class="node undefined " id="note2" transform="translate(604.3984375, 146.5)"><g class="basic label-container"><path d="M-152.0703125 -21.5 L152.0703125 -21.5 L152.0703125 21.5 L-152.0703125 21.5" stroke="none" stroke-width="0" fill="#fff5ad" style="fill:#fff5ad !important;stroke:#aaaa33 !important"></path><path d="M-152.0703125 -21.5 C-70.34141430327232 -21.5, 11.387483893455368 -21.5, 152.0703125 -21.5 M-152.0703125 -21.5 C-64.60101554186613 -21.5, 22.868281416267735 -21.5, 152.0703125 -21.5 M152.0703125 -21.5 C152.0703125 -11.053067843440184, 152.0703125 -0.6061356868803678, 152.0703125 21.5 M152.0703125 -21.5 C152.0703125 -5.284231846929071, 152.0703125 10.931536306141858, 152.0703125 21.5 M152.0703125 21.5 C42.76706563823885 21.5, -66.5361812235223 21.5, -152.0703125 21.5 M152.0703125 21.5 C63.95029652887986 21.5, -24.16971944224028 21.5, -152.0703125 21.5 M-152.0703125 21.5 C-152.0703125 8.316697293194132, -152.0703125 -4.866605413611737, -152.0703125 -21.5 M-152.0703125 21.5 C-152.0703125 12.613636285532667, -152.0703125 3.7272725710653347, -152.0703125 -21.5" stroke="#aaaa33" stroke-width="1.3" fill="none" style="fill:#fff5ad !important;stroke:#aaaa33 !important"></path></g><g class="label" style="text-align:left !important;white-space:nowrap !important" transform="translate(-146.0703125, -15.5)"><rect></rect><foreignObject width="292.140625" height="31"><div style="text-align: center; white-space: break-spaces; display: table; line-height: 1.5; max-width: 200px; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span style="text-align:left !important;white-space:nowrap !important" class="nodeLabel "><p>Stack for compute and API resources</p></span></div></foreignObject></g></g></g></g></g></svg></div><p><em><span>Diagram showing an App box containing one or more Stack boxes</span></em></p><p><span>&quot;The App construct is typically instantiated in your application&#39;s entrypoint file (usually in the </span><code>bin/</code><span> directory). It&#39;s where you define which stacks belong to your application and, importantly, where you can specify default deployment environments (AWS account and region) for those stacks.&quot;</span></p><p><span>Ethan nodded. &quot;So the hierarchy is App -&gt; Stacks -&gt; Resource Constructs?&quot;</span></p><p><span>&quot;That&#39;s right,&quot; Maya affirmed. &quot;It forms a tree structure, known as the </span><strong><span>construct tree</span></strong><span>, where every element is technically a construct, but they have different roles and scopes.&quot;</span></p><h2 id='starting-your-first-cdk-project'><span>Starting Your First CDK Project</span></h2><p><span>&quot;Now that we understand the core concepts, let&#39;s create our first CDK project,&quot; Maya said, opening a terminal on her laptop. &quot;We&#39;ll use the </span><code>cdk init</code><span> command.&quot;</span></p><p><span>&quot;First, create a directory for the project and navigate into it:&quot;</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">mkdir</span> magicmail-infra</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">cd</span> magicmail-infra</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 42px;"></div><div class="CodeMirror-gutters" style="display: none; height: 42px;"></div></div></div></pre><p><span>&quot;Now, initialize a new CDK application using TypeScript:&quot;</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">npx cdk init app <span class="cm-attribute">--language</span> typescript</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 21px;"></div><div class="CodeMirror-gutters" style="display: none; height: 21px;"></div></div></div></pre><p><img src="/Users/terumilaskowsky/Downloads/ch6-cdk-init.png" referrerpolicy="no-referrer" alt="ch6-cdk-init"></p><p><em><span>Screenshot showing the files being created by cdk init and the final success message with suggested next steps like npm run build, cdk synth</span></em></p><p><span>&quot;The </span><code>npx cdk init</code><span> command sets up a new CDK project with a standard directory structure and necessary configuration files.</span></p><blockquote><ul><li><p><code>app</code><span> specifies we&#39;re creating a deployable CDK application (as opposed to a library </span><code>lib</code><span>).</span></p></li><li><p><code>--language typescript</code><span> tells CDK to use TypeScript.&quot;</span></p></li></ul></blockquote><p><span>Ethan looked at the output. &quot;That generated quite a few files and installed some packages.&quot;</span></p><p><span>&quot;Yes, </span><code>cdk init</code><span> gives us a standard starting point. Let&#39;s explore that structure.&quot;</span></p><h2 id='cdk-project-structure'><span>CDK Project Structure</span></h2><p><span>&quot;A typical CDK TypeScript project has the following structure,&quot; Maya explained, opening the project in VS Code.</span></p><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart237" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="flowchart mermaid-svg" style="max-width: 850.453125px;" viewBox="-8 -8 850.453125 973" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#mermaidChart237{font-family:sans-serif;font-size:16px;fill:#333;}#mermaidChart237 .error-icon{fill:#552222;}#mermaidChart237 .error-text{fill:#552222;stroke:#552222;}#mermaidChart237 .edge-thickness-normal{stroke-width:1px;}#mermaidChart237 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart237 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart237 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaidChart237 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart237 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart237 .marker{fill:#333333;stroke:#333333;}#mermaidChart237 .marker.cross{stroke:#333333;}#mermaidChart237 svg{font-family:sans-serif;font-size:16px;}#mermaidChart237 p{margin:0;}#mermaidChart237 .label{font-family:sans-serif;color:#333;}#mermaidChart237 .cluster-label text{fill:#333;}#mermaidChart237 .cluster-label span{color:#333;}#mermaidChart237 .cluster-label span p{background-color:transparent;}#mermaidChart237 .label text,#mermaidChart237 span{fill:#333;color:#333;}#mermaidChart237 .node rect,#mermaidChart237 .node circle,#mermaidChart237 .node ellipse,#mermaidChart237 .node polygon,#mermaidChart237 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaidChart237 .rough-node .label text,#mermaidChart237 .node .label text,#mermaidChart237 .image-shape .label,#mermaidChart237 .icon-shape .label{text-anchor:middle;}#mermaidChart237 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaidChart237 .rough-node .label,#mermaidChart237 .node .label,#mermaidChart237 .image-shape .label,#mermaidChart237 .icon-shape .label{text-align:center;}#mermaidChart237 .node.clickable{cursor:pointer;}#mermaidChart237 .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#mermaidChart237 .arrowheadPath{fill:#333333;}#mermaidChart237 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaidChart237 .flowchart-link{stroke:#333333;fill:none;}#mermaidChart237 .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaidChart237 .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#mermaidChart237 .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaidChart237 .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#mermaidChart237 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaidChart237 .cluster text{fill:#333;}#mermaidChart237 .cluster span{color:#333;}#mermaidChart237 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart237 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaidChart237 rect.text{fill:none;stroke-width:0;}#mermaidChart237 .icon-shape,#mermaidChart237 .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaidChart237 .icon-shape p,#mermaidChart237 .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#mermaidChart237 .icon-shape rect,#mermaidChart237 .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaidChart237 :root{--mermaid-alt-font-family:sans-serif;}</style><g><marker id="mermaidChart237_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart237_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart237_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart237_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart237_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart237_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M154.059,436.5L177.215,370.167C200.372,303.833,246.686,171.167,280.962,104.833C315.237,38.5,337.474,38.5,348.592,38.5L359.711,38.5" id="L_Root_bin_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart237_flowchart-v2-pointEnd)"></path><path d="M159.411,436.5L181.676,388.667C203.941,340.833,248.47,245.167,282.341,197.333C316.211,149.5,339.422,149.5,351.027,149.5L362.633,149.5" id="L_Root_lib_1" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart237_flowchart-v2-pointEnd)"></path><path d="M170.117,436.5L190.598,407.167C211.078,377.833,252.039,319.167,276.02,289.833C300,260.5,307,260.5,310.5,260.5L314,260.5" id="L_Root_node_modules_2" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart237_flowchart-v2-pointEnd)"></path><path d="M202.234,436.5L217.362,425.667C232.489,414.833,262.745,393.167,288.665,382.333C314.586,371.5,336.172,371.5,346.965,371.5L357.758,371.5" id="L_Root_test_3" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart237_flowchart-v2-pointEnd)"></path><path d="M268,482.5L272.167,482.5C276.333,482.5,284.667,482.5,296.872,482.5C309.078,482.5,325.156,482.5,333.195,482.5L341.234,482.5" id="L_Root_cdk_json_4" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart237_flowchart-v2-pointEnd)"></path><path d="M202.234,528.5L217.362,539.333C232.489,550.167,262.745,571.833,282.587,582.667C302.43,593.5,311.859,593.5,316.574,593.5L321.289,593.5" id="L_Root_package_json_5" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart237_flowchart-v2-pointEnd)"></path><path d="M170.117,528.5L190.598,557.833C211.078,587.167,252.039,645.833,277.802,675.167C303.565,704.5,314.13,704.5,319.413,704.5L324.695,704.5" id="L_Root_tsconfig_json_6" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart237_flowchart-v2-pointEnd)"></path><path d="M159.411,528.5L181.676,576.333C203.941,624.167,248.47,719.833,276.1,767.667C303.729,815.5,314.458,815.5,319.823,815.5L325.188,815.5" id="L_Root_jest_config_7" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart237_flowchart-v2-pointEnd)"></path><path d="M154.059,528.5L177.215,594.833C200.372,661.167,246.686,793.833,274.886,860.167C303.086,926.5,313.172,926.5,318.215,926.5L323.258,926.5" id="L_Root_readme_8" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart237_flowchart-v2-pointEnd)"></path><path d="M479.758,38.5L491.543,38.5C503.328,38.5,526.898,38.5,544.94,38.5C562.982,38.5,575.495,38.5,581.751,38.5L588.008,38.5" id="L_bin_entry_9" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart237_flowchart-v2-pointEnd)"></path><path d="M476.836,149.5L489.108,149.5C501.38,149.5,525.924,149.5,544.453,149.5C562.982,149.5,575.495,149.5,581.751,149.5L588.008,149.5" id="L_lib_stack_10" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart237_flowchart-v2-pointEnd)"></path><path d="M481.711,371.5L493.171,371.5C504.63,371.5,527.549,371.5,542.509,371.5C557.469,371.5,564.469,371.5,567.969,371.5L571.469,371.5" id="L_test_test_file_11" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart237_flowchart-v2-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default  " id="flowchart-Root-3415" transform="translate(138, 482.5)"><rect class="basic label-container" style="" x="-130" y="-46" width="260" height="92"></rect><g class="label" style="" transform="translate(-100, -31)"><rect></rect><foreignObject width="200" height="62"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel "><p>📁 magicmail-infra (project root)</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-bin-3417" transform="translate(421.734375, 38.5)"><rect class="basic label-container" style="" x="-58.0234375" y="-30.5" width="116.046875" height="61"></rect><g class="label" style="" transform="translate(-28.0234375, -15.5)"><rect></rect><foreignObject width="56.046875" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>📁 bin/</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-lib-3419" transform="translate(421.734375, 149.5)"><rect class="basic label-container" style="" x="-55.1015625" y="-30.5" width="110.203125" height="61"></rect><g class="label" style="" transform="translate(-25.1015625, -15.5)"><rect></rect><foreignObject width="50.203125" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>📁 lib/</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-node_modules-3421" transform="translate(421.734375, 260.5)"><rect class="basic label-container" style="" x="-103.734375" y="-30.5" width="207.46875" height="61"></rect><g class="label" style="" transform="translate(-73.734375, -15.5)"><rect></rect><foreignObject width="147.46875" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>📁 node_modules/</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-test-3423" transform="translate(421.734375, 371.5)"><rect class="basic label-container" style="" x="-59.9765625" y="-30.5" width="119.953125" height="61"></rect><g class="label" style="" transform="translate(-29.9765625, -15.5)"><rect></rect><foreignObject width="59.953125" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>📁 test/</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-cdk_json-3425" transform="translate(421.734375, 482.5)"><rect class="basic label-container" style="" x="-76.5" y="-30.5" width="153" height="61"></rect><g class="label" style="" transform="translate(-46.5, -15.5)"><rect></rect><foreignObject width="93" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>📄 cdk.json</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-package_json-3427" transform="translate(421.734375, 593.5)"><rect class="basic label-container" style="" x="-96.4453125" y="-30.5" width="192.890625" height="61"></rect><g class="label" style="" transform="translate(-66.4453125, -15.5)"><rect></rect><foreignObject width="132.890625" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>📄 package.json</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-tsconfig_json-3429" transform="translate(421.734375, 704.5)"><rect class="basic label-container" style="" x="-93.0390625" y="-30.5" width="186.078125" height="61"></rect><g class="label" style="" transform="translate(-63.0390625, -15.5)"><rect></rect><foreignObject width="126.078125" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>📄 tsconfig.json</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-jest_config-3431" transform="translate(421.734375, 815.5)"><rect class="basic label-container" style="" x="-92.546875" y="-30.5" width="185.09375" height="61"></rect><g class="label" style="" transform="translate(-62.546875, -15.5)"><rect></rect><foreignObject width="125.09375" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>📄 jest.config.js</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-readme-3433" transform="translate(421.734375, 926.5)"><rect class="basic label-container" style="" x="-94.4765625" y="-30.5" width="188.953125" height="61"></rect><g class="label" style="" transform="translate(-64.4765625, -15.5)"><rect></rect><foreignObject width="128.953125" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>📄 README.md</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-entry-3435" transform="translate(704.9609375, 38.5)"><rect class="basic label-container" style="" x="-112.953125" y="-30.5" width="225.90625" height="61"></rect><g class="label" style="" transform="translate(-82.953125, -15.5)"><rect></rect><foreignObject width="165.90625" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>📄 magicmail-infra.ts</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-stack-3437" transform="translate(704.9609375, 149.5)"><rect class="basic label-container" style="" x="-112.953125" y="-30.5" width="225.90625" height="61"></rect><g class="label" style="" transform="translate(-82.953125, -15.5)"><rect></rect><foreignObject width="165.90625" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>📄 magicmail-infra.ts</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-test_file-3439" transform="translate(704.9609375, 371.5)"><rect class="basic label-container" style="" x="-129.4921875" y="-30.5" width="258.984375" height="61"></rect><g class="label" style="" transform="translate(-99.4921875, -15.5)"><rect></rect><foreignObject width="198.984375" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>📄 magicmail-infra.test.ts</p></span></div></foreignObject></g></g></g></g></g></svg></div><p><span>*Screenshot of VS Code showing the generated file/folder structure: bin/, lib/, node_modules/, test/, .git, cdk.json, package.json, tsconfig.json, etc.</span></p><p><span>&quot;Key files and directories:</span></p><blockquote><ul><li><p><strong><code>bin/</code></strong><span>: Contains the executable entrypoint(s) for your CDK application. This is where the </span><code>App</code><span> construct is created and your </span><code>Stack</code><span> classes are instantiated.</span></p></li><li><p><strong><code>lib/</code></strong><span>: Contains your CDK stack definition code (</span><code>*.ts</code><span> files). This is where you define the resources (constructs) within your stacks. You might also create custom construct files here.</span></p></li><li><p><strong><code>test/</code></strong><span>: Contains unit and snapshot tests for your CDK code.</span></p></li><li><p><strong><code>node_modules/</code></strong><span>: Standard Node.js directory where project dependencies (like </span><code>aws-cdk-lib</code><span> and other libraries) are installed. Managed by </span><code>npm</code><span>.</span></p></li><li><p><strong><code>cdk.out/</code></strong><span>: This directory is created when you run </span><code>cdk synth</code><span>. It contains the synthesized CloudFormation templates and any assets (like Lambda code bundles) required for deployment. You generally don&#39;t edit files here directly.</span></p></li><li><p><strong><code>package.json</code></strong><span>: Standard Node.js manifest file defining project metadata, dependencies, and scripts (like </span><code>build</code><span>, </span><code>test</code><span>, </span><code>cdk</code><span>).</span></p></li><li><p><strong><code>package-lock.json</code></strong><span>: Records the exact versions of dependencies installed, ensuring reproducible builds.</span></p></li><li><p><strong><code>tsconfig.json</code></strong><span>: TypeScript compiler configuration file.</span></p></li><li><p><strong><code>cdk.json</code></strong><span>: Configures the CDK Toolkit, telling it how to run your app (e.g., </span><code>app: &quot;npx ts-node --prefer-ts-exts bin/magicmail-infra.ts&quot;</code><span>) and defining context values.</span></p></li><li><p><strong><code>.gitignore</code></strong><span>, </span><strong><code>.npmignore</code></strong><span>: Standard files specifying what to exclude from Git version control and npm packaging.</span></p></li><li><p><strong><code>README.md</code></strong><span>: Basic documentation for your project.&quot;</span></p></li></ul></blockquote><p><span>&quot;Let&#39;s look at the most important files for defining our infrastructure: the app entrypoint in </span><code>bin/</code><span> and the stack definition in </span><code>lib/</code><span>.&quot;</span></p><h3 id='the-app-entrypoint-binmagicmail-infrats'><span>The App Entrypoint (</span><code>bin/magicmail-infra.ts</code><span>)</span></h3><p><span>&quot;Open the file in the </span><code>bin/</code><span> directory (e.g., </span><code>bin/magicmail-infra.ts</code><span>),&quot; Maya instructed.</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="typescript" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="typescript"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#!/usr/bin/env node</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-string">'source-map-support/register'</span>; <span class="cm-comment">// Enables source map support for debugging</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-keyword">*</span> <span class="cm-keyword">as</span> <span class="cm-def">cdk</span> <span class="cm-keyword">from</span> <span class="cm-string">'aws-cdk-lib'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> { <span class="cm-def">MagicmailInfraStack</span> } <span class="cm-keyword">from</span> <span class="cm-string">'../lib/magicmail-infra-stack'</span>; <span class="cm-comment">// Import our Stack class</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// Create the root App construct</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-def">app</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">cdk</span>.<span class="cm-property">App</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// Instantiate our Stack class</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">new</span> <span class="cm-variable">MagicmailInfraStack</span>(<span class="cm-variable">app</span>, <span class="cm-string">'MagicmailInfraStack'</span>, {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">/* Props passed to the Stack construct */</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">/* Configure the deployment environment (AWS Account and Region) */</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">/* If env is not specified, the stack is environment-agnostic and might limit some features. */</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">/* Uncomment the next line to deploy to the account/region configured in your AWS CLI profile */</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">// env: { account: process.env.CDK_DEFAULT_ACCOUNT, region: process.env.CDK_DEFAULT_REGION },</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">/* Or, specify the account and region explicitly: */</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">// env: { account: '123456789012', region: 'us-east-1' },</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">/* For more information, see https://docs.aws.amazon.com/cdk/latest/guide/environments.html */</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">});</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 588px;"></div><div class="CodeMirror-gutters" style="display: none; height: 588px;"></div></div></div></pre><p><span>&quot;This file is the executable entrypoint. It does two main things:</span></p><blockquote><ol start='' ><li><p><span>Creates an instance of the root </span><code>cdk.App</code><span>.</span></p></li><li><p><span>Instantiates our stack class (</span><code>MagicmailInfraStack</code><span>, which we import from the </span><code>lib</code><span> directory), passing the </span><code>app</code><span> as the first argument (scope) and a unique ID (</span><code>&#39;MagicmailInfraStack&#39;</code><span>) as the second.</span></p></li></ol></blockquote><p><span>The third argument is the </span><code>props</code><span> object for the stack. A crucial property here is </span><code>env</code><span>, which specifies the target AWS account and region for deployment. The commented-out lines show two common ways to set this:</span></p><blockquote><ul><li><p><span>Using </span><code>process.env.CDK_DEFAULT_ACCOUNT</code><span> and </span><code>process.env.CDK_DEFAULT_REGION</code><span>: These environment variables are automatically populated by the CDK CLI based on your currently configured AWS profile (from </span><code>aws configure</code><span>). This is often the most convenient method for personal development.</span></p></li><li><p><span>Specifying the account and region explicitly as strings: This is recommended for production CI/CD pipelines to ensure deployments always target the correct environment, regardless of the execution context.&quot;</span></p></li></ul></blockquote><p><span>&quot;Let&#39;s uncomment the line that uses the CLI configuration for now:&quot;</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="typescript"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="typescript"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">env</span>: { <span class="cm-variable">account</span>: <span class="cm-variable">process</span>.<span class="cm-property">env</span>.<span class="cm-property">CDK_DEFAULT_ACCOUNT</span>, <span class="cm-variable">region</span>: <span class="cm-variable">process</span>.<span class="cm-property">env</span>.<span class="cm-property">CDK_DEFAULT_REGION</span> },</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 42px;"></div><div class="CodeMirror-gutters" style="display: none; height: 42px;"></div></div></div></pre><p><span>&quot;By setting the </span><code>env</code><span> here, we make the account and region available to constructs within the stack, which is how things like </span><code>cdk.Stack.of(this).account</code><span> (which we&#39;ll use later) get their values.&quot;</span></p><h3 id='the-stack-definition-libmagicmail-infra-stackts'><span>The Stack Definition (</span><code>lib/magicmail-infra-stack.ts</code><span>)</span></h3><p><span>&quot;Now, let&#39;s look at the stack definition in </span><code>lib/magicmail-infra-stack.ts</code><span>,&quot; Maya continued.</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="typescript" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="typescript"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-keyword">*</span> <span class="cm-keyword">as</span> <span class="cm-def">cdk</span> <span class="cm-keyword">from</span> <span class="cm-string">'aws-cdk-lib'</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> { <span class="cm-def">Construct</span> } <span class="cm-keyword">from</span> <span class="cm-string">'constructs'</span>; <span class="cm-comment">// Base class for all constructs</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// Example import for an AWS service construct library:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// import * as sqs from 'aws-cdk-lib/aws-sqs';</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// Our stack class inherits from the base cdk.Stack</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">export</span> <span class="cm-keyword">class</span> <span class="cm-def">MagicmailInfraStack</span> <span class="cm-keyword">extends</span> <span class="cm-type">cdk</span>.<span class="cm-type">Stack</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">// The constructor is where we define the stack's resources</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-property">constructor</span>(<span class="cm-def">scope</span>: <span class="cm-type">Construct</span>, <span class="cm-def">id</span>: <span class="cm-type">string</span>, <span class="cm-def">props</span><span class="cm-operator">?</span>: <span class="cm-type">cdk</span>.<span class="cm-type">StackProps</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// Call the parent class (cdk.Stack) constructor</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">super</span>(<span class="cm-variable-2">scope</span>, <span class="cm-variable-2">id</span>, <span class="cm-variable-2">props</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// --- Define resources within this stack here ---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// Example resource definition (commented out):</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// const queue = new sqs.Queue(this, 'MagicmailInfraQueue', {</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// &nbsp; visibilityTimeout: cdk.Duration.seconds(300)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// });</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 420px;"></div><div class="CodeMirror-gutters" style="display: none; height: 420px;"></div></div></div></pre><p><span>&quot;This is where we define the actual resources that belong in our stack. It&#39;s a standard TypeScript class that </span><code>extends cdk.Stack</code><span>. The </span><code>constructor</code><span> is the key part:&quot;</span></p><blockquote><ul><li><p><span>It receives three standard arguments for all constructs:</span></p></li><li><p><code>scope</code><span>: The parent construct in the tree (in this case, the </span><code>App</code><span> instance from the </span><code>bin</code><span> file).</span></p></li><li><p><code>id</code><span>: A unique identifier for this construct </span><em><span>within its scope</span></em><span> (the </span><code>&#39;MagicmailInfraStack&#39;</code><span> string we passed in the </span><code>bin</code><span> file).</span></p></li><li><p><code>props</code><span>: An optional object containing properties for configuring the stack (like the </span><code>env</code><span> we set). The type is </span><code>cdk.StackProps</code><span>.</span></p></li><li><p><span>It calls </span><code>super(scope, id, props)</code><span> to initialize the base </span><code>cdk.Stack</code><span> class.</span></p></li><li><p><strong><code>Crucially, inside the constructor, after calling super, is where we define the AWS resources (constructs) that belong to this stack.</code></strong></p></li></ul></blockquote><p><span>&quot;I see. It&#39;s a TypeScript class extending </span><code>cdk.Stack</code><span>, and we add resources by creating new construct instances inside its constructor, passing </span><code>this</code><span> as their scope?&quot; Ethan clarified.</span></p><p><span>&quot;Exactly,&quot; Maya confirmed. &quot;Every resource is an instance of a construct class, following the same </span><code>(scope, id, props?)</code><span> pattern. The </span><code>scope</code><span> parameter (usually </span><code>this</code><span> when defining resources inside a stack) links the constructs together into the construct tree.&quot;</span></p><h2 id='adding-an-s3-bucket-to-the-stack'><span>Adding an S3 Bucket to the Stack</span></h2><p><span>&quot;Now, let&#39;s modify our stack to add the S3 bucket for MagicMail assets,&quot; Maya suggested. &quot;We&#39;ll use the L2 construct </span><code>s3.Bucket</code><span> for a concise definition.&quot;</span></p><p><span>&quot;First, import the S3 module from the </span><code>aws-cdk-lib</code><span> library at the top of </span><code>lib/magicmail-infra-stack.ts</code><span>:&quot;</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="typescript"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="typescript"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-keyword">*</span> <span class="cm-keyword">as</span> <span class="cm-def">s3</span> <span class="cm-keyword">from</span> <span class="cm-string">'aws-cdk-lib/aws-s3'</span>;</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 21px;"></div><div class="CodeMirror-gutters" style="display: none; height: 21px;"></div></div></div></pre><p><span>&quot;Then, inside the </span><code>constructor</code><span>, after the </span><code>super</code><span> call, add the bucket definition:&quot;</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="typescript"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="typescript"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// --- Define resources within this stack here ---</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// Define the S3 bucket using the L2 'Bucket' construct</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">assetsBucket</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">s3</span>.<span class="cm-property">Bucket</span>(<span class="cm-keyword">this</span>, <span class="cm-string">'MagicMailAssetsBucket'</span>, {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment">// bucketName: `magicmail-assets-${this.account}-${this.region}`, // Construct name using stack's account/region</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">versioned</span>: <span class="cm-atom">true</span>, <span class="cm-comment">// Enable versioning</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">encryption</span>: <span class="cm-variable">s3</span>.<span class="cm-property">BucketEncryption</span>.<span class="cm-property">S3_MANAGED</span>, <span class="cm-comment">// Use SSE-S3 encryption</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">blockPublicAccess</span>: <span class="cm-variable">s3</span>.<span class="cm-property">BlockPublicAccess</span>.<span class="cm-property">BLOCK_ALL</span>, <span class="cm-comment">// Block all public access</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">removalPolicy</span>: <span class="cm-variable">cdk</span>.<span class="cm-property">RemovalPolicy</span>.<span class="cm-property">DESTROY</span>, <span class="cm-comment">// Delete the bucket when the stack is deleted (use RETAIN for production data)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment">// autoDeleteObjects: true, // Automatically empty bucket on destroy (convenient for dev, use with caution)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  });</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 294px;"></div><div class="CodeMirror-gutters" style="display: none; height: 294px;"></div></div></div></pre><p><span>Ethan looked at the code. &quot;Wow, that&#39;s much shorter than the CloudFormation YAML!&quot;</span></p><p><span>&quot;It is,&quot; Maya agreed. &quot;The L2 </span><code>s3.Bucket</code><span> construct applies sensible defaults. For example, we don&#39;t need to explicitly define the complex </span><code>PublicAccessBlockConfiguration</code><span> structure like in CloudFormation; </span><code>s3.BlockPublicAccess.BLOCK_ALL</code><span> handles it. Let&#39;s break down the properties we </span><em><span>did</span></em><span> set:</span></p><blockquote><ul><li><p><code>this</code><span>: The scope - we&#39;re adding this bucket to the </span><code>MagicmailInfraStack</code><span>.</span></p></li><li><p><code>&#39;MagicMailAssetsBucket&#39;</code><span>: The </span><strong><span>construct ID</span></strong><span>. This must be unique within the scope (</span><code>this</code><span> stack). CDK uses this to generate the CloudFormation Logical ID.</span></p></li><li><p><code>{...}</code><span>: The </span><code>props</code><span> object (of type </span><code>s3.BucketProps</code><span>) configuring the bucket:</span></p></li><li><p><code>versioned: true</code><span>: Enables S3 versioning.</span></p></li><li><p><code>encryption: s3.BucketEncryption.S3_MANAGED</code><span>: Specifies default encryption (SSE-S3). Other options exist like </span><code>KMS</code><span>.</span></p></li><li><p><code>blockPublicAccess: s3.BlockPublicAccess.BLOCK_ALL</code><span>: A convenient way to apply the recommended secure settings.</span></p></li><li><p><code>removalPolicy: cdk.RemovalPolicy.DESTROY</code><span>: Tells CloudFormation to delete the bucket when the stack is destroyed. </span><strong><span>Caution:</span></strong><span> For buckets containing important data in production, you should use </span><code>cdk.RemovalPolicy.RETAIN</code><span> to prevent accidental data loss. If you use </span><code>DESTROY</code><span>, the bucket must be empty before CloudFormation can delete it, unless you also set </span><code>autoDeleteObjects: true</code><span> (use this second property with extreme caution, mainly for temporary dev/test stacks).</span></p></li><li><p><code>bucketName</code><span>: I&#39;ve commented this out for now. If you </span><em><span>don&#39;t</span></em><span> specify a </span><code>bucketName</code><span>, CDK (via CloudFormation) will automatically generate a unique physical name for the bucket. This is often the </span><strong><span>recommended practice</span></strong><span> as it avoids potential naming conflicts if you deploy the same stack multiple times or in different regions. If you </span><em><span>do</span></em><span> need a specific, predictable name, you can uncomment that line. The </span><code>this.account</code><span> and </span><code>this.region</code><span> properties retrieve the account and region information from the </span><code>env</code><span> prop passed to the stack.</span></p></li></ul></blockquote><p><span>&quot;For comparison, remember how verbose the CloudFormation was? The L2 construct handles much of that complexity.&quot;</span></p><h2 id='adding-lifecycle-rules'><span>Adding Lifecycle Rules</span></h2><p><span>&quot;Let&#39;s add the lifecycle rule like we did before,&quot; Maya said.</span></p><p><span>&quot;Modify the </span><code>s3.Bucket</code><span> props to include </span><code>lifecycleRules</code><span>:&quot;</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="typescript" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="typescript"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">assetsBucket</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">s3</span>.<span class="cm-property">Bucket</span>(<span class="cm-keyword">this</span>, <span class="cm-string">'MagicMailAssetsBucket'</span>, {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">versioned</span>: <span class="cm-atom">true</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">encryption</span>: <span class="cm-variable">s3</span>.<span class="cm-property">BucketEncryption</span>.<span class="cm-property">S3_MANAGED</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">blockPublicAccess</span>: <span class="cm-variable">s3</span>.<span class="cm-property">BlockPublicAccess</span>.<span class="cm-property">BLOCK_ALL</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">removalPolicy</span>: <span class="cm-variable">cdk</span>.<span class="cm-property">RemovalPolicy</span>.<span class="cm-property">DESTROY</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment">// Add lifecycle rules</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">lifecycleRules</span>: [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-property">id</span>: <span class="cm-string">'TransitionToInfrequentAccess'</span>, <span class="cm-comment">// Optional ID for the rule</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-property">enabled</span>: <span class="cm-atom">true</span>, <span class="cm-comment">// Rule is enabled by default if not specified</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-property">transitions</span>: [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-property">storageClass</span>: <span class="cm-variable">s3</span>.<span class="cm-property">StorageClass</span>.<span class="cm-property">INFREQUENT_ACCESS</span>, <span class="cm-comment">// Target storage class</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-property">transitionAfter</span>: <span class="cm-variable">cdk</span>.<span class="cm-property">Duration</span>.<span class="cm-property">days</span>(<span class="cm-number">90</span>), <span class="cm-comment">// Transition after 90 days</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  ],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// You could also add expiration rules here:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// expiration: cdk.Duration.days(365),</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  ],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  });</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 462px;"></div><div class="CodeMirror-gutters" style="display: none; height: 462px;"></div></div></div></pre><p><span>&quot;The </span><code>lifecycleRules</code><span> property takes an array of rule objects. We define transitions using </span><code>s3.StorageClass</code><span> enums and durations using </span><code>cdk.Duration</code><span> helpers (like </span><code>days</code><span>, </span><code>hours</code><span>, </span><code>minutes</code><span>).&quot;</span></p><h2 id='outputting-bucket-information'><span>Outputting Bucket Information</span></h2><p><span>&quot;Let&#39;s output the bucket name and ARN so we can easily reference them after deployment, and potentially import them into other stacks,&quot; Maya suggested.</span></p><p><span>&quot;Add these lines after the </span><code>assetsBucket</code><span> definition, still inside the constructor:&quot;</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="typescript" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="typescript"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// --- Define Outputs ---</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// Output the auto-generated bucket name</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">new</span> <span class="cm-variable">cdk</span>.<span class="cm-property">CfnOutput</span>(<span class="cm-keyword">this</span>, <span class="cm-string">'AssetsBucketNameOutput'</span>, {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">value</span>: <span class="cm-variable">assetsBucket</span>.<span class="cm-property">bucketName</span>, <span class="cm-comment">// Access the bucketName property of the construct</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">description</span>: <span class="cm-string">'The name of the S3 bucket for MagicMail assets'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">exportName</span>: <span class="cm-string">'MagicMailAssetsBucketName'</span>, <span class="cm-comment">// Export name for cross-stack reference</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  });</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// Output the bucket ARN</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">new</span> <span class="cm-variable">cdk</span>.<span class="cm-property">CfnOutput</span>(<span class="cm-keyword">this</span>, <span class="cm-string">'AssetsBucketArnOutput'</span>, {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">value</span>: <span class="cm-variable">assetsBucket</span>.<span class="cm-property">bucketArn</span>, <span class="cm-comment">// Access the bucketArn property</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">description</span>: <span class="cm-string">'The ARN of the S3 bucket for MagicMail assets'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">exportName</span>: <span class="cm-string">'MagicMailAssetsBucketArn'</span>, <span class="cm-comment">// Export name</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  });</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 357px;"></div><div class="CodeMirror-gutters" style="display: none; height: 357px;"></div></div></div></pre><p><span>&quot;We use the </span><code>cdk.CfnOutput</code><span> construct.</span></p><blockquote><ul><li><p><span>The scope is </span><code>this</code><span> (the stack).</span></p></li><li><p><span>The ID (</span><code>&#39;AssetsBucketNameOutput&#39;</code><span>) is unique within the stack for this output definition.</span></p></li><li><p><span>In the props:</span></p></li><li><p><code>value</code><span>: We access properties directly from our </span><code>assetsBucket</code><span> construct instance (</span><code>assetsBucket.bucketName</code><span>, </span><code>assetsBucket.bucketArn</code><span>). CDK automatically handles resolving these values.</span></p></li><li><p><code>description</code><span>: Explains what the output represents.</span></p></li><li><p><code>exportName</code><span>: Makes the output value available for other stacks in the same region/account to import using </span><code>Fn.importValue(&#39;ExportName&#39;)</code><span>. Export names must be unique across the region/account.</span></p></li></ul></blockquote><p><span>These outputs will be shown in the terminal after a successful </span><code>cdk deploy</code><span> and also appear in the CloudFormation console&#39;s &#39;Outputs&#39; tab for the stack.&quot;</span></p><h2 id='the-complete-stack-definition'><span>The Complete Stack Definition</span></h2><p><span>&quot;Here&#39;s our complete stack definition so far:&quot;</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="typescript" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="typescript"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-keyword">*</span> <span class="cm-keyword">as</span> <span class="cm-def">cdk</span> <span class="cm-keyword">from</span> <span class="cm-string">'aws-cdk-lib'</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> { <span class="cm-def">Construct</span> } <span class="cm-keyword">from</span> <span class="cm-string">'constructs'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-keyword">*</span> <span class="cm-keyword">as</span> <span class="cm-def">s3</span> <span class="cm-keyword">from</span> <span class="cm-string">'aws-cdk-lib/aws-s3'</span>; <span class="cm-comment">// Import S3 library</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">export</span> <span class="cm-keyword">class</span> <span class="cm-def">MagicmailInfraStack</span> <span class="cm-keyword">extends</span> <span class="cm-type">cdk</span>.<span class="cm-type">Stack</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-property">constructor</span>(<span class="cm-def">scope</span>: <span class="cm-type">Construct</span>, <span class="cm-def">id</span>: <span class="cm-type">string</span>, <span class="cm-def">props</span><span class="cm-operator">?</span>: <span class="cm-type">cdk</span>.<span class="cm-type">StackProps</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">super</span>(<span class="cm-variable-2">scope</span>, <span class="cm-variable-2">id</span>, <span class="cm-variable-2">props</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// --- Define S3 Asset Bucket ---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">assetsBucket</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">s3</span>.<span class="cm-property">Bucket</span>(<span class="cm-keyword">this</span>, <span class="cm-string">'MagicMailAssetsBucket'</span>, {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">versioned</span>: <span class="cm-atom">true</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">encryption</span>: <span class="cm-variable">s3</span>.<span class="cm-property">BucketEncryption</span>.<span class="cm-property">S3_MANAGED</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">blockPublicAccess</span>: <span class="cm-variable">s3</span>.<span class="cm-property">BlockPublicAccess</span>.<span class="cm-property">BLOCK_ALL</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">removalPolicy</span>: <span class="cm-variable">cdk</span>.<span class="cm-property">RemovalPolicy</span>.<span class="cm-property">DESTROY</span>, <span class="cm-comment">// Change to RETAIN for production</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment">// autoDeleteObjects: true, // Convenient for dev/test, use with caution</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">lifecycleRules</span>: [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-property">id</span>: <span class="cm-string">'TransitionToInfrequentAccess'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-property">transitions</span>: [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-property">storageClass</span>: <span class="cm-variable">s3</span>.<span class="cm-property">StorageClass</span>.<span class="cm-property">INFREQUENT_ACCESS</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-property">transitionAfter</span>: <span class="cm-variable">cdk</span>.<span class="cm-property">Duration</span>.<span class="cm-property">days</span>(<span class="cm-number">90</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  ],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  ],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  });</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// --- Define Outputs ---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">new</span> <span class="cm-variable">cdk</span>.<span class="cm-property">CfnOutput</span>(<span class="cm-keyword">this</span>, <span class="cm-string">'AssetsBucketNameOutput'</span>, {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">value</span>: <span class="cm-variable-2">assetsBucket</span>.<span class="cm-property">bucketName</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">description</span>: <span class="cm-string">'The name of the S3 bucket for MagicMail assets'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">exportName</span>: <span class="cm-string">'MagicMailAssetsBucketName'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  });</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">new</span> <span class="cm-variable">cdk</span>.<span class="cm-property">CfnOutput</span>(<span class="cm-keyword">this</span>, <span class="cm-string">'AssetsBucketArnOutput'</span>, {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">value</span>: <span class="cm-variable-2">assetsBucket</span>.<span class="cm-property">bucketArn</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">description</span>: <span class="cm-string">'The ARN of the S3 bucket for MagicMail assets'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">exportName</span>: <span class="cm-string">'MagicMailAssetsBucketArn'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  });</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 882px;"></div><div class="CodeMirror-gutters" style="display: none; height: 882px;"></div></div></div></pre><h2 id='cdk-lifecycle-synthesize-deploy-destroy'><span>CDK Lifecycle: Synthesize, Deploy, Destroy</span></h2><p><span>&quot;Now that we&#39;ve written the code, how do we turn it into real AWS resources?&quot; Maya asked. &quot;This involves the CDK command-line toolkit and its lifecycle commands:&quot;</span></p><blockquote><ol start='' ><li><p><strong><code>cdk synth</code></strong><span> (Synthesize): Reads your CDK app code (starting from the entrypoint specified in </span><code>cdk.json</code><span>), executes it to instantiate your stacks and constructs, and generates the corresponding CloudFormation template(s) in the </span><code>cdk.out</code><span> directory. This step also automatically compiles your TypeScript code if changes are detected.</span></p></li><li><p><strong><code>cdk deploy [StackName]</code></strong><span> (Deploy): Synthesizes the templates (if needed) and then deploys the specified stack(s) to your AWS account using CloudFormation. If the stack doesn&#39;t exist, it creates it. If it exists, it creates and executes a CloudFormation change set to update it. You can deploy specific stacks by name or use </span><code>cdk deploy --all</code><span>. Before making changes that could affect security (like adding IAM policies), CDK will prompt you for confirmation.</span></p></li><li><p><strong><code>cdk diff [StackName]</code></strong><span> (Difference): Compares the currently deployed stack with the version defined in your local code and shows a summary of proposed changes, similar to a CloudFormation change set preview. Useful for checking the impact of code changes before deploying.</span></p></li><li><p><strong><code>cdk destroy [StackName]</code></strong><span> (Destroy): Destroys the specified stack(s), deleting the associated AWS resources via CloudFormation (subject to resource </span><code>RemovalPolicy</code><span> settings).</span></p></li></ol></blockquote><p><span>&quot;Unlike our pure TypeScript exercise where we manually ran </span><code>npm run build</code><span>, the CDK CLI commands (</span><code>synth</code><span>, </span><code>deploy</code><span>, </span><code>diff</code><span>, </span><code>destroy</code><span>) automatically handle the TypeScript compilation step (</span><code>tsc</code><span>) whenever they detect changes in your </span><code>.ts</code><span> files. This streamlines the workflow.&quot;</span></p><p><span>Ethan nodded. &quot;So I mostly just need </span><code>cdk synth</code><span> to check, </span><code>cdk deploy</code><span> to apply, and </span><code>cdk destroy</code><span> to clean up?&quot;</span></p><p><span>&quot;That&#39;s the core loop,&quot; Maya confirmed. &quot;Let&#39;s try it.&quot;</span></p><h2 id='deploying-the-cdk-stack'><span>Deploying the CDK Stack</span></h2><p><span>&quot;Open your terminal in the </span><code>magicmail-infra</code><span> project directory,&quot; Maya instructed.</span></p><p><span>&quot;First, let&#39;s synthesize the CloudFormation template:&quot;</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">npx cdk synth</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 21px;"></div><div class="CodeMirror-gutters" style="display: none; height: 21px;"></div></div></div></pre><p><em><code>(Note: If you get an error about TypeScript compilation, you might need to run npm install first to ensure all dependencies, including typescript, are installed in node_modules)</code></em></p><p><img src="/Users/terumilaskowsky/Documents/visualstudio/project/cdk-book-1/ch6-cdk-synth.png" referrerpolicy="no-referrer" alt="ch6-cdk-synth"></p><p><em><span>Screenshot showing the generated CloudFormation YAML output from cdk synth</span></em></p><p><span>&quot;This command executes our CDK code and prints the resulting CloudFormation template to the console. It&#39;s good practice to review this, especially when learning, to see how your CDK code translates to CloudFormation resources.&quot;</span></p><p><span>&quot;Notice the </span><code>Resources</code><span> section,&quot; Maya pointed out. &quot;You&#39;ll see our S3 bucket defined. Look at its </span><strong><span>Logical ID</span></strong><span> in the template, something like </span><code>MagicMailAssetsBucket2D5C19AD</code><span>. CDK generates this from the construct ID we provided (</span><code>&#39;MagicMailAssetsBucket&#39;</code><span>) plus a hash to ensure uniqueness within the template, preventing conflicts if you were to reuse the same construct ID in different parts of your code indirectly.&quot;</span></p><p><span>&quot;Now, let&#39;s deploy the stack to our AWS account:&quot;</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">npx cdk deploy</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 21px;"></div><div class="CodeMirror-gutters" style="display: none; height: 21px;"></div></div></div></pre><p><span>&quot;Since this is the first deployment, CDK will create a new CloudFormation stack. It will show you a summary of resources being created and might ask for confirmation if security-related changes are detected (though our current stack likely won&#39;t trigger this).&quot;</span></p><p><img src="images/ch6-cdk-bootstrap-2.png" referrerpolicy="no-referrer" alt="ch6-cdk-bootstrap-2"></p><p><em><span>Screenshot showing cdk bootstrap error</span></em></p><p><span>Maya paused as Ethan stared at the terminal error message.</span></p><blockquote><p><strong><span>“SSM parameter /cdk-bootstrap/hnb659fds/version not found. Has the environment been bootstrapped?”</span></strong></p></blockquote><p><span>&quot;Ah, I was expecting that,&quot; Maya said, leaning over. &quot;Before your first deployment, you need to </span><strong><span>bootstrap</span></strong><span> your AWS environment.&quot;</span></p><p><span>&quot;What does that mean?&quot; Ethan asked.</span></p><p><span>&quot;Bootstrapping is like preparing the AWS account for CDK to work its magic. CDK needs a few resources—like an S3 bucket to store deployment assets and an IAM role it can assume—to be in place before it can deploy anything. When you run </span><code>cdk bootstrap</code><span>, CDK creates those resources in your account.&quot;</span></p><p><span>She opened her terminal.</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">npx cdk bootstrap</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 21px;"></div><div class="CodeMirror-gutters" style="display: none; height: 21px;"></div></div></div></pre><p><span>&quot;This command sets up the environment for the </span><strong><span>account and region</span></strong><span> you&#39;re deploying to. You only need to run it once per environment. After bootstrapping completes, you’ll be ready to deploy. Just run </span><code>npx cdk deploy</code><span> again, and CDK will proceed with provisioning your resources.&quot;</span></p><p><img src="images/ch6-cdk-depoy-3.png" referrerpolicy="no-referrer" alt="ch6-cdk-depoy-3"></p><p><em><span>Screenshot showing cdk deploy command results</span></em></p><p><span>&quot;Now, check the AWS Management Console. Go to CloudFormation in the region you deployed to. You should see the </span><code>MagicmailInfraStack</code><span> stack with status </span><code>CREATE_COMPLETE</code><span>. Then go to the S3 console, and you should find the newly created bucket (with its auto-generated name if you didn&#39;t specify one) with versioning and encryption enabled.&quot;</span></p><p><img src="images/ch6-cdk-deploy-s3.png" referrerpolicy="no-referrer" alt="ch6-cdk-deploy-s3"></p><p><em><span>Screenshot of the S3 console showing the CDK-created bucket</span></em></p><p><span>&quot;Success! We&#39;ve defined and deployed infrastructure using TypeScript and CDK.&quot;</span></p><h2 id='making-changes-to-the-stack'><span>Making Changes to the Stack</span></h2><p><span>&quot;IaC makes updates easy and repeatable,&quot; Maya said. &quot;Let&#39;s add tags to our bucket.&quot;</span></p><p><span>&quot;In </span><code>lib/magicmail-infra-stack.ts</code><span>, after the </span><code>assetsBucket</code><span> definition, use the </span><code>cdk.Tags</code><span> aspect:&quot;</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="typescript"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="typescript"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// --- Define S3 Asset Bucket ---</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">assetsBucket</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">s3</span>.<span class="cm-property">Bucket</span>(<span class="cm-keyword">this</span>, <span class="cm-string">'MagicMailAssetsBucket'</span>, {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// ... existing props ...</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  });</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// --- Add Tags ---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// Use the Tags aspect to add tags to the construct and its underlying resources</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">cdk</span>.<span class="cm-property">Tags</span>.<span class="cm-property">of</span>(<span class="cm-variable">assetsBucket</span>).<span class="cm-property">add</span>(<span class="cm-string">'Project'</span>, <span class="cm-string">'MagicMail'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">cdk</span>.<span class="cm-property">Tags</span>.<span class="cm-property">of</span>(<span class="cm-variable">assetsBucket</span>).<span class="cm-property">add</span>(<span class="cm-string">'Environment'</span>, <span class="cm-string">'Development'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// --- Define Outputs ---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// ... existing outputs ...</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 252px;"></div><div class="CodeMirror-gutters" style="display: none; height: 252px;"></div></div></div></pre><p><span>&quot;The </span><code>cdk.Tags.of(construct)</code><span> allows you to apply tags to a construct. These tags are often propagated to the underlying CloudFormation resources.&quot;</span></p><p><span>&quot;Now, let&#39;s see the difference before deploying:&quot;</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">npx cdk <span class="cm-builtin">diff</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 21px;"></div><div class="CodeMirror-gutters" style="display: none; height: 21px;"></div></div></div></pre><p><img src="images/ch6-cdk-diff.png" referrerpolicy="no-referrer" alt="ch6-cdk-diff"></p><p><em><span>Screenshot showing cdk diff output, indicating changes to the bucket&#39;s Tags property</span></em></p><p><span>&quot;</span><code>cdk diff</code><span> shows us exactly what will change – in this case, the addition of tags to the S3 bucket resource.&quot;</span></p><p><span>&quot;Satisfied with the diff, let&#39;s deploy the update:&quot;</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">npx cdk deploy</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 21px;"></div><div class="CodeMirror-gutters" style="display: none; height: 21px;"></div></div></div></pre><p><img src="images/ch6-cdk-deploy-2.png" referrerpolicy="no-referrer" alt="ch6-cdk-deploy-2"></p><p><em><span>Screenshot showing cdk deploy updating the stack</span></em></p><p><span>&quot;CDK detects the stack already exists and performs an update via CloudFormation. After it completes, check the S3 console again – the bucket should now have the &#39;Project&#39; and &#39;Environment&#39; tags.&quot;</span></p><p><img src="images/ch6-cdk-deploy-s3-tags.png" referrerpolicy="no-referrer" alt="ch6-cdk-deploy-s3-tags"></p><p><em><span>Screenshot of the S3 bucket&#39;s &#39;Tags&#39; section showing the new tags</span></em></p><h2 id='using-context-values-for-environment-configuration'><span>Using Context Values for Environment Configuration</span></h2><p><span>&quot;Often, we need slightly different configurations for different environments (dev, test, prod),&quot; Maya said. &quot;CDK provides </span><strong><span>context values</span></strong><span> as a way to pass environment-specific information into your app.&quot;</span></p><p><span>&quot;Context can come from various sources (CLI </span><code>--context</code><span> flag, </span><code>cdk.context.json</code><span> file, </span><code>cdk.json</code><span> file, account context lookups). A common place to define defaults is the </span><code>cdk.json</code><span> file.&quot;</span></p><p><span>Maya opened </span><code>cdk.json</code><span> and added a </span><code>context</code><span> block:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="json" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="json"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string cm-property">"app"</span>: <span class="cm-string">"npx ts-node --prefer-ts-exts bin/magicmail-infra.ts"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string cm-property">"watch"</span>: {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"include"</span>: [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">"**"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  ],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"exclude"</span>: [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">"README.md"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">"cdk*.json"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">"**/*.d.ts"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">"**/*.js"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">"tsconfig.json"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">"package*.json"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">"yarn.lock"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">"node_modules"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">"test"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  ]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string cm-property">"context"</span>: {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"@aws-cdk/aws-apigateway:usagePlanKeyOrderInsensitiveId"</span>: <span class="cm-atom">true</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"@aws-cdk/core:stackRelativeExports"</span>: <span class="cm-atom">true</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"@aws-cdk/aws-rds:lowercaseDbIdentifier"</span>: <span class="cm-atom">true</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"@aws-cdk/aws-lambda:recognizeVersionProps"</span>: <span class="cm-atom">true</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"@aws-cdk/aws-cloudfront:defaultSecurityPolicyTLSv1.2_2021"</span>: <span class="cm-atom">true</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"@aws-cdk-containers/ecs-service-extensions:enableDefaultLogDriver"</span>: <span class="cm-atom">true</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"@aws-cdk/aws-ec2:uniqueImdsv2TemplateName"</span>: <span class="cm-atom">true</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"@aws-cdk/core:target-partitions"</span>: [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">"aws"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">"aws-cn"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  ],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// --- Add our custom context values ---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"environment"</span>: <span class="cm-string">"dev"</span>, <span class="cm-comment">// Default environment</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"project"</span>: <span class="cm-string">"MagicMail"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 735px;"></div><div class="CodeMirror-gutters" style="display: none; height: 735px;"></div></div></div></pre><p><span>&quot;We&#39;ve added default values for </span><code>environment</code><span> and </span><code>project</code><span>. Now, let&#39;s use the </span><code>environment</code><span> value in our stack to, for example, adjust the removal policy.&quot;</span></p><p><span>&quot;Modify the </span><code>assetsBucket</code><span> definition in </span><code>lib/magicmail-infra-stack.ts</code><span>:&quot;</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="typescript" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="typescript"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-keyword">*</span> <span class="cm-keyword">as</span> <span class="cm-def">cdk</span> <span class="cm-keyword">from</span> <span class="cm-string">'aws-cdk-lib'</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> { <span class="cm-def">Construct</span> } <span class="cm-keyword">from</span> <span class="cm-string">'constructs'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-keyword">*</span> <span class="cm-keyword">as</span> <span class="cm-def">s3</span> <span class="cm-keyword">from</span> <span class="cm-string">'aws-cdk-lib/aws-s3'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">export</span> <span class="cm-keyword">class</span> <span class="cm-def">MagicmailInfraStack</span> <span class="cm-keyword">extends</span> <span class="cm-type">cdk</span>.<span class="cm-type">Stack</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-property">constructor</span>(<span class="cm-def">scope</span>: <span class="cm-type">Construct</span>, <span class="cm-def">id</span>: <span class="cm-type">string</span>, <span class="cm-def">props</span><span class="cm-operator">?</span>: <span class="cm-type">cdk</span>.<span class="cm-type">StackProps</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">super</span>(<span class="cm-variable-2">scope</span>, <span class="cm-variable-2">id</span>, <span class="cm-variable-2">props</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// --- Get context values ---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// Use node.tryGetContext to safely retrieve context values</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">environment</span> <span class="cm-operator">=</span> <span class="cm-keyword">this</span>.<span class="cm-property">node</span>.<span class="cm-property">tryGetContext</span>(<span class="cm-string">'environment'</span>); <span class="cm-comment">// Retrieves from cdk.json or CLI</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">project</span> <span class="cm-operator">=</span> <span class="cm-keyword">this</span>.<span class="cm-property">node</span>.<span class="cm-property">tryGetContext</span>(<span class="cm-string">'project'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// Basic validation or default setting</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-operator">!</span><span class="cm-variable-2">environment</span> <span class="cm-operator">||</span> <span class="cm-operator">!</span><span class="cm-variable-2">project</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">throw</span> <span class="cm-keyword">new</span> <span class="cm-variable">Error</span>(<span class="cm-string">"Context variables 'environment' and 'project' must be set in cdk.json or via --context"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// --- Define S3 Asset Bucket ---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">assetsBucket</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">s3</span>.<span class="cm-property">Bucket</span>(<span class="cm-keyword">this</span>, <span class="cm-string">'MagicMailAssetsBucket'</span>, {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">versioned</span>: <span class="cm-atom">true</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">encryption</span>: <span class="cm-variable">s3</span>.<span class="cm-property">BucketEncryption</span>.<span class="cm-property">S3_MANAGED</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">blockPublicAccess</span>: <span class="cm-variable">s3</span>.<span class="cm-property">BlockPublicAccess</span>.<span class="cm-property">BLOCK_ALL</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment">// Use context value to determine Removal Policy</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">removalPolicy</span>: <span class="cm-variable-2">environment</span> <span class="cm-operator">===</span> <span class="cm-string">'prod'</span> <span class="cm-operator">?</span> <span class="cm-variable">cdk</span>.<span class="cm-property">RemovalPolicy</span>.<span class="cm-property">RETAIN</span> : <span class="cm-variable">cdk</span>.<span class="cm-property">RemovalPolicy</span>.<span class="cm-property">DESTROY</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">autoDeleteObjects</span>: <span class="cm-variable-2">environment</span> <span class="cm-operator">!==</span> <span class="cm-string">'prod'</span>, <span class="cm-comment">// Enable auto-delete only for non-prod</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">lifecycleRules</span>: [<span class="cm-comment">/* ... */</span>],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  });</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// --- Add Tags ---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">cdk</span>.<span class="cm-property">Tags</span>.<span class="cm-property">of</span>(<span class="cm-variable-2">assetsBucket</span>).<span class="cm-property">add</span>(<span class="cm-string">'Project'</span>, <span class="cm-variable-2">project</span>); <span class="cm-comment">// Use project context value</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">cdk</span>.<span class="cm-property">Tags</span>.<span class="cm-property">of</span>(<span class="cm-variable-2">assetsBucket</span>).<span class="cm-property">add</span>(<span class="cm-string">'Environment'</span>, <span class="cm-variable-2">environment</span>); <span class="cm-comment">// Use environment context value</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// --- Define Outputs ---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// ... existing outputs ...</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// Modify export names to include environment for uniqueness if needed across environments</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">new</span> <span class="cm-variable">cdk</span>.<span class="cm-property">CfnOutput</span>(<span class="cm-keyword">this</span>, <span class="cm-string">'AssetsBucketNameOutput'</span>, {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-property">value</span>: <span class="cm-variable-2">assetsBucket</span>.<span class="cm-property">bucketName</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-property">description</span>: <span class="cm-string-2">`The name of the S3 bucket for ${</span><span class="cm-variable-2">environment</span><span class="cm-string-2">}</span> <span class="cm-string-2">assets`</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-property">exportName</span>: <span class="cm-string-2">`${</span><span class="cm-variable-2">project</span><span class="cm-string-2">}-${</span><span class="cm-variable-2">environment</span><span class="cm-string-2">}-AssetsBucketName`</span>, <span class="cm-comment">// More unique export name</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  });</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">new</span> <span class="cm-variable">cdk</span>.<span class="cm-property">CfnOutput</span>(<span class="cm-keyword">this</span>, <span class="cm-string">'AssetsBucketArnOutput'</span>, {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-property">value</span>: <span class="cm-variable-2">assetsBucket</span>.<span class="cm-property">bucketArn</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-property">description</span>: <span class="cm-string-2">`The ARN of the S3 bucket for ${</span><span class="cm-variable-2">environment</span><span class="cm-string-2">}</span> <span class="cm-string-2">assets`</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-property">exportName</span>: <span class="cm-string-2">`${</span><span class="cm-variable-2">project</span><span class="cm-string-2">}-${</span><span class="cm-variable-2">environment</span><span class="cm-string-2">}-AssetsBucketArn`</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  });</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 1155px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1155px;"></div></div></div></pre><p><span>&quot;We use </span><code>this.node.tryGetContext(&#39;key&#39;)</code><span> to read the context value. Now, the </span><code>removalPolicy</code><span> and </span><code>autoDeleteObjects</code><span> settings depend on the </span><code>environment</code><span> context.&quot;</span></p><p><span>&quot;To deploy this for &#39;dev&#39; (using the default from </span><code>cdk.json</code><span>):&quot;</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">npx cdk deploy</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 21px;"></div><div class="CodeMirror-gutters" style="display: none; height: 21px;"></div></div></div></pre><p><span>&quot;To deploy this for &#39;prod&#39;, overriding the context value via the command line:&quot;</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">npx cdk deploy <span class="cm-attribute">--context</span> <span class="cm-def">environment</span><span class="cm-operator">=</span>prod</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 21px;"></div><div class="CodeMirror-gutters" style="display: none; height: 21px;"></div></div></div></pre><p><img src="images/ch6-cdk-deploy-s3-prod.png" referrerpolicy="no-referrer" alt="ch6-cdk-deploy-s3-prod"></p><p><em><span>Screenshot showing cdk deploy --context environment=prod being run</span></em></p><p><span>&quot;This command temporarily overrides the </span><code>environment</code><span> context value for this specific deployment, causing the </span><code>removalPolicy</code><span> to be set to </span><code>RETAIN</code><span>.&quot;</span></p><p><span>&quot;Context values are a powerful way to manage environment-specific configurations within your CDK code.&quot;</span></p><h2 id='cleaning-up'><span>Cleaning Up</span></h2><p><span>&quot;Finally, let&#39;s destroy the stack to clean up the AWS resources,&quot; Maya said.</span></p><p><span>&quot;Run the destroy command. Make sure you specify the correct stack name if you deployed multiple times with different names.&quot;</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Destroy the stack deployed with the default name</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">npx cdk destroy MagicmailInfraStack</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 42px;"></div><div class="CodeMirror-gutters" style="display: none; height: 42px;"></div></div></div></pre><p><img src="images/ch6-cdk-destroy-force.png" referrerpolicy="no-referrer" alt="ch6-cdk-destroy-force"></p><p><em><span>Screenshot showing the cdk destroy confirmation prompt</span></em></p><p><span>&quot;CDK will list the resources to be deleted and ask for confirmation (</span><code>y/n</code><span>). Type </span><code>y</code><span> and press Enter.&quot;</span></p><p><span>&quot;CloudFormation will now delete the stack and its associated resources. If you deployed with the default </span><code>environment=dev</code><span>, the bucket’s </span><code>removalPolicy</code><span> was likely set to </span><code>DESTROY</code><span>, so the bucket should be deleted—assuming it was empty or had </span><code>autoDeleteObjects</code><span> enabled.</span></p><p><span>However, if you deployed using </span><code>--context environment=prod</code><span>, the </span><code>removalPolicy</code><span> was set to </span><code>RETAIN</code><span> for safety. In this case, </span><strong><span>CloudFormation will delete the stack, but the S3 bucket will remain</span></strong><span> to preserve data. If you’re certain the bucket is no longer needed, you can delete it manually from the AWS Console or by running the AWS CLI command:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">aws s3 rb s3://your-bucket-name <span class="cm-attribute">--force</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 21px;"></div><div class="CodeMirror-gutters" style="display: none; height: 21px;"></div></div></div></pre><p><span>The </span><code>--force</code><span> flag ensures the bucket is emptied before deletion.&quot;</span></p><h2 id='cdk-best-practices-recap'><span>CDK Best Practices (Recap)</span></h2><p><span>&quot;Let&#39;s quickly recap some key best practices we&#39;ve touched on:&quot;</span></p><p><img src="images/cdk-bestpractice.png" referrerpolicy="no-referrer" alt="cdk-bestpractice"></p><p><em><span>Slide graphic summarizing CDK best practices</span></em></p><blockquote><ol start='' ><li><p><strong><span>Use L2/L3 Constructs:</span></strong><span> Prefer higher-level constructs for conciseness and built-in best practices.</span></p></li><li><p><strong><span>Embrace TypeScript:</span></strong><span> Leverage static typing, interfaces (</span><code>props</code><span>), and enums.</span></p></li><li><p><strong><span>Keep Stacks Focused:</span></strong><span> Define related resources together in a stack. Break large applications into multiple stacks.</span></p></li><li><p><strong><span>Use Context for Environments:</span></strong><span> Manage environment differences (</span><code>dev</code><span>/</span><code>prod</code><span>) using context values.</span></p></li><li><p><strong><span>Removal Policies:</span></strong><span> Explicitly set </span><code>RemovalPolicy</code><span> (</span><code>RETAIN</code><span> for critical data, </span><code>DESTROY</code><span> for transient resources).</span></p></li><li><p><strong><span>Tag Resources:</span></strong><span> Apply tags consistently using </span><code>cdk.Tags.of()</code><span>.</span></p></li><li><p><strong><span>Use Auto-Generated Names:</span></strong><span> Let CDK/CloudFormation generate physical names for resources where possible to avoid conflicts, unless a specific name is required.</span></p></li><li><p><strong><code>Review cdk diff:</code></strong><span> Check changes before deploying.</span></p></li><li><p><strong><span>Version Control:</span></strong><span> Store your CDK code in Git.</span></p></li></ol></blockquote><h2 id='wrapping-up'><span>Wrapping Up</span></h2><p><span>Maya closed her laptop. &quot;That covers the fundamentals of AWS CDK! We&#39;ve set up a project, learned about Apps, Stacks, and Constructs, defined an S3 bucket using TypeScript, managed environment configuration with context, and used the CDK CLI to synthesize, deploy, and destroy our infrastructure.&quot;</span></p><p><span>&quot;Any questions before we wrap up?&quot; she asked.</span></p><p><span>Ethan thought for a moment. &quot;It feels much more like software development now. Defining the bucket in TypeScript was way cleaner than the YAML. I think I get the basics of the workflow. What&#39;s next for MagicMail?&quot;</span></p><p><span>&quot;Great question,&quot; Maya replied. &quot;Now that we have the CDK fundamentals, we need a plan for the overall MagicMail system. In our next session, we&#39;ll step back and design the </span><strong><span>microservices architecture</span></strong><span>. We&#39;ll figure out what distinct services we need (like creature management, package tracking, delivery assignment), how they should communicate, and how to structure our CDK project to reflect that architecture.&quot;</span></p><p><span>&quot;We&#39;ll likely create separate stacks, maybe even separate CDK constructs, for different parts of the system. This architectural planning is crucial before we start building more complex infrastructure.&quot;</span></p><p><span>Ethan nodded, closing his notebook. &quot;Okay, architecture first, then implementation. That makes sense. I&#39;m excited to see how CDK helps build a larger system like that.&quot;</span></p><p><span>&quot;Exactly,&quot; Maya smiled. &quot;CDK really shines when building and managing complex, interconnected systems. You&#39;re ready for the next step!&quot;</span></p><h2 id='ethans-homework'><span>Ethan&#39;s Homework</span></h2><blockquote><ol start='' ><li><p><span>Create a </span><em><span>new</span></em><span> CDK project (</span><code>cdk init app --language typescript</code><span> in a new folder).</span></p></li><li><p><span>Modify the stack definition in </span><code>lib/</code><span> to create an S3 bucket.</span></p></li><li><p><span>Configure the bucket to:</span></p><ul><li><p><span>Be encrypted using </span><code>s3.BucketEncryption.KMS_MANAGED</code><span>.</span></p></li><li><p><span>Have versioning enabled.</span></p></li><li><p><span>Have a lifecycle rule that expires objects after 7 days (</span><code>expiration: cdk.Duration.days(7)</code><span>).</span></p></li><li><p><span>Use </span><code>cdk.RemovalPolicy.DESTROY</code><span> and </span><code>autoDeleteObjects: true</code><span>.</span></p></li></ul></li><li><p><span>Add a </span><code>cdk.CfnOutput</code><span> for the bucket&#39;s </span><code>bucketWebsiteUrl</code><span> property.</span></p></li><li><p><span>Run </span><code>npx cdk deploy</code><span>. Check the CloudFormation/S3 consoles to verify the settings. Note the output value.</span></p></li><li><p><span>Run </span><code>npx cdk destroy</code><span> to clean up.</span></p></li></ol></blockquote><h2 id='key-takeaways'><span>Key Takeaways</span></h2><blockquote><ul><li><p><span>AWS CDK defines cloud infrastructure using code (TypeScript, Python, etc.).</span></p></li><li><p><span>CDK code is </span><strong><span>synthesized</span></strong><span> (</span><code>cdk synth</code><span>) into CloudFormation templates.</span></p></li><li><p><span>Stacks are deployed/managed via </span><code>cdk deploy</code><span> and </span><code>cdk destroy</code><span>.</span></p></li><li><p><span>Core concepts: </span><strong><span>App</span></strong><span> (root) -&gt; </span><strong><span>Stack</span></strong><span> (deployment unit) -&gt; </span><strong><span>Construct</span></strong><span> (cloud component - L1, L2, L3).</span></p></li><li><p><span>L2 constructs (</span><code>s3.Bucket</code><span>) offer abstraction over L1/CFN (</span><code>s3.CfnBucket</code><span>).</span></p></li><li><p><span>Use </span><code>props</code><span> interfaces for configuration, leverage TypeScript&#39;s type safety.</span></p></li><li><p><span>Use </span><strong><span>context</span></strong><span> (</span><code>cdk.json</code><span>, </span><code>--context</code><span>) for environment-specific settings.</span></p></li><li><p><span>Understand </span><code>RemovalPolicy</code><span> to prevent accidental data loss.</span></p></li><li><p><span>CDK CLI handles TypeScript compilation automatically during </span><code>synth</code><span>/</span><code>deploy</code><span>.</span></p></li><li><p><span>CDK construct IDs map to CloudFormation Logical IDs (often with a hash).</span></p></li></ul></blockquote><h2 id='looking-ahead'><span>Looking Ahead</span></h2><p><span>In the next chapter, Maya will guide Ethan through designing a microservices architecture for MagicMail. They&#39;ll identify core services, define boundaries and communication patterns, and plan how to structure their CDK application to implement this architecture effectively.</span></p><h2 id='aws-services-introduced'><span>AWS Services Introduced</span></h2><blockquote><ul><li><p><span>No new AWS services (focused on CDK).</span></p></li></ul></blockquote><h2 id='cdk-concepts-introduced'><span>CDK Concepts Introduced</span></h2><blockquote><ul><li><p><code>aws-cdk-lib</code><span> (library)</span></p></li><li><p><code>cdk init</code><span> (project initialization)</span></p></li><li><p><code>App</code><span>, </span><code>Stack</code><span>, </span><code>Construct</code><span> (core classes)</span></p></li><li><p><span>Construct Levels (L1, L2, L3)</span></p></li><li><p><span>Construct Scope, ID, Props (</span><code>scope</code><span>, </span><code>id</code><span>, </span><code>props?</code><span>)</span></p></li><li><p><span>Construct Tree</span></p></li><li><p><code>cdk synth</code><span>, </span><code>cdk deploy</code><span>, </span><code>cdk diff</code><span>, </span><code>cdk destroy</code><span> (CLI commands)</span></p></li><li><p><code>cdk.json</code><span> (app configuration, context)</span></p></li><li><p><span>Context Values (</span><code>node.tryGetContext</code><span>, </span><code>--context</code><span>)</span></p></li><li><p><code>cdk.StackProps</code><span>, </span><code>env</code><span> (account/region)</span></p></li><li><p><code>cdk.RemovalPolicy</code><span> (</span><code>DESTROY</code><span>, </span><code>RETAIN</code><span>)</span></p></li><li><p><code>cdk.Tags</code><span>, </span><code>cdk.Duration</code></p></li><li><p><code>cdk.CfnOutput</code><span>, </span><code>exportName</code></p></li><li><p><span>Synthesized CloudFormation Logical IDs (vs. CDK IDs)</span></p></li><li><p><code>cdk.out</code><span> directory</span></p></li></ul></blockquote></div></div>
</body>
</html>