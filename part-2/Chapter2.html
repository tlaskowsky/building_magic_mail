<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>

<link href='https://fonts.googleapis.com/css?family=Merriweather:900,900italic,300,300italic&subset=latin-ext' rel='stylesheet' type='text/css' /><link href='https://fonts.googleapis.com/css?family=Lato:900,300&subset=latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --mermaid-theme: default; --mermaid-sequence-numbers: off; --mermaid-flowchart-curve: linear; --mermaid--gantt-left-padding: 75; --sequence-theme: simple; }
.privacy { display: none; }


:root { --bg-color: #ffffff; --text-color: #333333; --select-text-bg-color: #B5D6FC; --select-text-font-color: auto; --monospace: "Lucida Console",Consolas,"Courier",monospace; --title-bar-height: 20px; }
.mac-os-11 { --title-bar-height: 28px; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
h1, h2, h3, h4, h5 { white-space: pre-wrap; }
body { margin: 0px; padding: 0px; height: auto; inset: 0px; font-size: 1rem; line-height: 1.428571; overflow-x: hidden; background: inherit; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 36px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
.typora-export .task-list-item input { pointer-events: none; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; image-orientation: from-image; }
button, input, select, textarea { color: inherit; font-style: inherit; font-variant-caps: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; font-size-adjust: inherit; font-kerning: inherit; font-variant-alternates: inherit; font-variant-ligatures: inherit; font-variant-numeric: inherit; font-variant-east-asian: inherit; font-variant-position: inherit; font-variant-emoji: inherit; font-feature-settings: inherit; font-optical-sizing: inherit; font-variation-settings: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; position: relative; }
#write svg h1, #write svg h2, #write svg h3, #write svg h4, #write svg h5, #write svg h6, #write svg p { position: static; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 4; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px; }
thead, tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right-width: 0px; border-right-style: none; border-right-color: currentcolor; background-color: inherit; }
.CodeMirror-linenumber { -webkit-user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-fences-adv-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
svg { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li blockquote { margin: 1rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; font-variant-ligatures: no-common-ligatures; }
  #write { margin-top: 0px; border-color: transparent !important; padding-top: 0px !important; padding-bottom: 0px !important; }
  .typora-export * { print-color-adjust: exact; }
  .typora-export #write { break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  .is-mac table { break-inside: avoid; }
  #write > p:nth-child(1) { margin-top: 0px; }
  .typora-export-show-outline .typora-export-sidebar { display: none; }
  figure { overflow-x: visible; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
#write.first-line-indent p > .md-image:only-child:not(.md-img-error) img { left: -2em; position: relative; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
.MathJax_ref { fill: currentcolor; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: medium; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.reversefootnote { font-family: ui-monospace, sans-serif; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.6; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: medium !important; border-style: none !important; border-color: currentcolor !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom-width: 0px; border-bottom-style: none; border-bottom-color: currentcolor; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: medium; }
.highlight td, .highlight tr { border: 0px; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
.md-expand mark .md-meta { opacity: 0.3 !important; }
mark .md-meta { color: rgb(0, 0, 0); }
@media print {
  .typora-export h1, .typora-export h2, .typora-export h3, .typora-export h4, .typora-export h5, .typora-export h6 { break-inside: avoid; }
}
.md-diagram-panel .messageText { stroke: none !important; }
.md-diagram-panel .start-state { fill: var(--node-fill); }
.md-diagram-panel .edgeLabel rect { opacity: 1 !important; }
.md-fences.md-fences-math { font-size: 1em; }
.md-fences-advanced:not(.md-focus) { padding: 0px; white-space: nowrap; border: 0px; }
.md-fences-advanced:not(.md-focus) { background: inherit; }
.mermaid-svg { margin: auto; }
.typora-export-show-outline .typora-export-content { max-width: 1440px; margin: auto; display: flex; flex-direction: row; }
.typora-export-sidebar { width: 300px; font-size: 0.8rem; margin-top: 80px; margin-right: 18px; }
.typora-export-show-outline #write { --webkit-flex: 2; flex: 2 1 0%; }
.typora-export-sidebar .outline-content { position: fixed; top: 0px; max-height: 100%; overflow: hidden auto; padding-bottom: 30px; padding-top: 60px; width: 300px; }
@media screen and (max-width: 1024px) {
  .typora-export-sidebar, .typora-export-sidebar .outline-content { width: 240px; }
}
@media screen and (max-width: 800px) {
  .typora-export-sidebar { display: none; }
}
.outline-content li, .outline-content ul { margin-left: 0px; margin-right: 0px; padding-left: 0px; padding-right: 0px; list-style: none; overflow-wrap: anywhere; }
.outline-content ul { margin-top: 0px; margin-bottom: 0px; }
.outline-content strong { font-weight: 400; }
.outline-expander { width: 1rem; height: 1.428571rem; position: relative; display: table-cell; vertical-align: middle; cursor: pointer; padding-left: 4px; }
.outline-expander::before { content: ""; position: relative; font-family: Ionicons; display: inline-block; font-size: 8px; vertical-align: middle; }
.outline-item { padding-top: 3px; padding-bottom: 3px; cursor: pointer; }
.outline-expander:hover::before { content: ""; }
.outline-h1 > .outline-item { padding-left: 0px; }
.outline-h2 > .outline-item { padding-left: 1em; }
.outline-h3 > .outline-item { padding-left: 2em; }
.outline-h4 > .outline-item { padding-left: 3em; }
.outline-h5 > .outline-item { padding-left: 4em; }
.outline-h6 > .outline-item { padding-left: 5em; }
.outline-label { cursor: pointer; display: table-cell; vertical-align: middle; text-decoration: none; color: inherit; }
.outline-label:hover { text-decoration: underline; }
.outline-item:hover { border-color: rgb(245, 245, 245); background-color: var(--item-hover-bg-color); }
.outline-item:hover { margin-left: -28px; margin-right: -28px; border-left-width: 28px; border-left-style: solid; border-left-color: transparent; border-right-width: 28px; border-right-style: solid; border-right-color: transparent; }
.outline-item-single .outline-expander::before, .outline-item-single .outline-expander:hover::before { display: none; }
.outline-item-open > .outline-item > .outline-expander::before { content: ""; }
.outline-children { display: none; }
.info-panel-tab-wrapper { display: none; }
.outline-item-open > .outline-children { display: block; }
.typora-export .outline-item { padding-top: 1px; padding-bottom: 1px; }
.typora-export .outline-item:hover { margin-right: -8px; border-right-width: 8px; border-right-style: solid; border-right-color: transparent; }
.typora-export .outline-expander::before { content: "+"; font-family: inherit; top: -1px; }
.typora-export .outline-expander:hover::before, .typora-export .outline-item-open > .outline-item > .outline-expander::before { content: "−"; }
.typora-export-collapse-outline .outline-children { display: none; }
.typora-export-collapse-outline .outline-item-open > .outline-children, .typora-export-no-collapse-outline .outline-children { display: block; }
.typora-export-no-collapse-outline .outline-expander::before { content: "" !important; }
.typora-export-show-outline .outline-item-active > .outline-item .outline-label { font-weight: 700; }
.md-inline-math-container mjx-container { zoom: 0.95; }
mjx-container { break-inside: avoid; }
.md-alert.md-alert-note { border-left-color: rgb(9, 105, 218); }
.md-alert.md-alert-important { border-left-color: rgb(130, 80, 223); }
.md-alert.md-alert-warning { border-left-color: rgb(154, 103, 0); }
.md-alert.md-alert-tip { border-left-color: rgb(31, 136, 61); }
.md-alert.md-alert-caution { border-left-color: rgb(207, 34, 46); }
.md-alert { padding: 0px 1em; margin-bottom: 16px; color: inherit; border-left-width: 0.25em; border-left-style: solid; border-left-color: rgb(0, 0, 0); }
.md-alert-text-note { color: rgb(9, 105, 218); }
.md-alert-text-important { color: rgb(130, 80, 223); }
.md-alert-text-warning { color: rgb(154, 103, 0); }
.md-alert-text-tip { color: rgb(31, 136, 61); }
.md-alert-text-caution { color: rgb(207, 34, 46); }
.md-alert-text { font-size: 0.9rem; font-weight: 700; }
.md-alert-text svg { fill: currentcolor; position: relative; top: 0.125em; margin-right: 1ch; overflow: visible; }
.md-alert-text-container::after { content: attr(data-text); text-transform: capitalize; pointer-events: none; margin-right: 1ch; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; outline: 0px; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: auto hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 10px; z-index: 3; overflow-y: hidden; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: medium !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; overflow-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { overflow-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right-width: 30px; border-right-style: solid; border-right-color: transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right-width: medium; border-right-style: none; border-right-color: currentcolor; width: auto; }
.CodeMirror-linebackground { position: absolute; inset: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right-width: medium; border-right-style: none; border-right-color: currentcolor; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
span.cm-underlined { text-decoration: underline; }
span.cm-strikethrough { text-decoration: line-through; }
.cm-tw-syntaxerror { color: rgb(255, 255, 255); background-color: rgb(153, 0, 0); }
.cm-tw-deleted { text-decoration: line-through; }
.cm-tw-header5 { font-weight: 700; }
.cm-tw-listitem:first-child { padding-left: 10px; }
.cm-tw-box { border-style: solid; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-color: inherit; border-top-width: 0px !important; }
.cm-tw-underline { text-decoration: underline; }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


@include-when-export url(https://fonts.googleapis.com/css?family=Merriweather:900,900italic,300,300italic&subset=latin-ext);
@include-when-export url(https://fonts.googleapis.com/css?family=Lato:900,300&subset=latin-ext);

:root {
	--control-text-color: #777;
}

/**
 * forked from pixyll.com
 * MIT license
 */

h1,
.h1,
.f1 {
	font-size: 2rem;
	line-height: 2.5rem;
}
h2,
.h2,
.f2 {
	font-size: 1.5rem;
	line-height: 2rem;
}
h3,
.h3,
.f3 {
	font-size: 1.25rem;
	line-height: 1.5rem;
}
p,
.p,
.f4,
h4,
h5,
h6,
dl,
ol,
ul,
pre[cid],
div[cid],
#typora-source {
	font-size: 1.125rem;
	line-height: 1.5rem;
}

h4 {
	font-size: 1.13rem;
}
/*
 Pixyll
 A simple, beautiful theme for Jekyll that emphasizes content rather than aesthetic fluff.
 Best served with BASSCSS (http://jxnblk.github.io/basscss)
 Crafted with <3 by John Otander (@4lpine) - ©2015 John Otander MIT License http://opensource.org/licenses/MIT

*/

body {
	font-family: "Merriweather", "PT Serif", Georgia, "Times New Roman", "STSong", 'Segoe UI Emoji', Serif;
	line-height: 1.5rem;
	font-weight: 400;
}

#write {
	max-width: 914px;
	color: #333;
}

@media only screen and (min-width: 1400px) {
	#write {
		max-width: 1100px;
	}
}

@media only screen and (min-width: 1700px) {
	#write {
		max-width: 1200px;
	}
}

img {
	width: auto;
	max-width: 100%;
}
body {
	font-size: 1.5rem;
	box-sizing: border-box;
	-moz-box-sizing: border-box;
	-webkit-box-sizing: border-box;
}

.ty-table-edit {
	background: #ededed;
}

table {
	width: 100%;
	font-size: 1.125rem;
}
table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td,
table > tfoot > tr > th,
table > tfoot > tr > td {
	padding: 12px;
	line-height: 1.2;
	vertical-align: top;
	border-top: 1px solid #333;
}
table > thead > tr > th {
	vertical-align: bottom;
	border-bottom: 2px solid #333;
}
table > caption + thead > tr:first-child > th,
table > caption + thead > tr:first-child > td,
table > colgroup + thead > tr:first-child > th,
table > colgroup + thead > tr:first-child > td,
table > thead:first-child > tr:first-child > th,
table > thead:first-child > tr:first-child > td {
	border-top: 0;
}
table > tbody + tbody {
	border-top: 2px solid #333;
}
p {
	font-weight: 300;
	line-height: 1.5;
}
abbr {
	border-bottom: 1px black dotted;
	cursor: help;
}
pre,
code {
	font-family: Menlo, Monaco, "Courier New", monospace;
}

code,
.md-fences  {
	color: #7a7a7a;
}

.md-fences {
	padding: 1.125em;
	margin-bottom: 0.88em;
	font-size: 1rem;
	border: 1px solid #7a7a7a;
	padding-bottom: 0.5rem;
	padding-top: 0.5rem;
}

blockquote {
	padding: 1.33em;
	font-style: italic;
	border-left: 5px solid #7a7a7a;
	color: #555;
}
blockquote em {
	color: #000;
}
blockquote footer {
	font-size: .85rem;
	font-style: normal;
	background-color: #fff;
	color: #7a7a7a;
	border-color: transparent;
}
h1,
.h1,
h2,
.h2,
h3,
.h3,
h4,
.h4,
h5,
.h5,
h6,
.h6 {
	font-family: "Lato", 'Helvetica Neue', Helvetica, sans-serif;
	font-weight: bold;
	line-height: 1.2;
	margin: 1em 0 0.5em;
}
@media screen and (min-width: 48em) {
	.h1,
	h1 {
		font-size: 3.250rem;
	}
	.h2,
	h2 {
		font-size: 2.298rem;
	}
	.h3,
	h3 {
		font-size: 1.625rem;
	}
	.h4,
	h4 {
		font-size: 1.3rem;
	}
	#write>h4.md-focus:before,
	#write>h5.md-focus:before,
	#write>h6.md-focus:before{
		top: 1px;
	}
	.p,
	p,
	li {
		font-size: 1.25rem;
		line-height: 1.8;
	}
	table {
		font-size: 1.25rem;
	}
}
@media (max-width: 48em) {
	blockquote {
		margin-left: 1rem;
		margin-right: 0;
		padding: 0.5em;
	}
	.h1,
	h1 {
		font-size: 2.827rem;
	}
	.h2,
	h2 {
		font-size: 1.999rem;
	}
	.h3,
	h3 {
		font-size: 1.413rem;
	}
	.h4,
	h4 {
		font-size: 1.3rem;
	}
}
@media screen and (min-width: 64em) {
	.h1,
	h1 {
		font-size: 4.498rem;
	}
	.h2,
	h2 {
		font-size: 2.29rem;
	}
	.h3,
	h3 {
		font-size: 1.9rem;
	}
	.h4,
	h4 {
		font-size: 1.591rem;
	}
	#write>h4.md-focus:before{
		top:4px;
	}
}
a {
	color: #463F5C;
	text-decoration: underline;
}

#write {
	padding-top: 2rem;
}

#write pre.md-meta-block {
	min-height: 35px;
	padding: 0.5em 1em;
	white-space: pre;
	border: 0px;

	border-left: 30px #f8f8f8 solid;
	border-right: 30px #f8f8f8 solid;
	width: 100vw;
	max-width: calc(100% + 60px);

	margin-left: -30px;
	margin-bottom: 2em;
	margin-top: -2010px;
	padding-top: 2000px;
	padding-bottom: 10px;
	line-height: 1.5em;
	color: #7a7a7a;
	background-color: #fafafa;
	font-family: 'Lato', 'Helvetica Neue', Helvetica, sans-serif;
	font-weight: 300;
	clear: both;
	padding-left: 0;
	font-size:1.125rem;
}
.md-image>.md-meta {
	color: #463F5C
}
.footnotes {
	font-size:1.1rem;
}
.md-tag {
	font-family: 'Lato', 'Helvetica Neue', Helvetica, sans-serif;
}
.code-tooltip {
	background: white;
}
.code-tooltip-content {
	font-size: 1.1rem;
}

.task-list{
	padding-left: 0;
}

.md-task-list-item {
	padding-left:34px;
}

.md-task-list-item > input{
	width: 1.25rem;
	height: 1.25rem;
	display: block;
	-webkit-appearance: initial;
	top: -0.2rem;
	margin-left: -1.6em;
	margin-top: calc(1rem - 7px);
	border: none;
}

.md-task-list-item > input:focus{
	outline: none;
	box-shadow: none;
}

.md-task-list-item > input:before{
	border: 1px solid #555;
	border-radius: 1.5rem;
	width: 1.5rem;
	height: 1.5rem;
	background: #fff;
	content: ' ';
	transition: background-color 200ms ease-in-out;
	display: block;
}

.md-task-list-item > input:checked:before,
.md-task-list-item > input[checked]:before{
	background: #333;
	border-width: 2px;
	display:inline-block;
	transition: background-color 200ms ease-in-out;
}

.md-task-list-item > input:checked:after,
.md-task-list-item > input[checked]:after {
	opacity: 1;
}

.md-task-list-item > input:after {
	opacity: 1;
	-webkit-transition: opacity 0.05s ease-in-out;
	-moz-transition: opacity 0.05s ease-in-out;
	transition: opacity 0.05s ease-in-out;
	-webkit-transform: rotate(-45deg);
	-moz-transform: rotate(-45deg);
	transform: rotate(-45deg);
	position: absolute;
	top: 0.4375rem;
	left: 0.28125rem;
	width: 0.9375rem;
	height: 0.5rem;
	border: 3px solid #fff;
	border-top: 0;
	border-right: 0;
	content: ' ';
	opacity: 0;
}

.md-tag {
	color:inherit;
}

.md-toc:focus .md-toc-content{
	margin-top: 19px;
}

#typora-sidebar {
	font-size:1rem !important;
}

.html-for-mac #typora-sidebar {
	background-color:white;
}

.outline-content li, .outline-content ul {
	font-size:1rem !important;
}

.outline-title {
	line-height: inherit;
	margin-top: 10px;
}

.outline-expander {
	width: 18px;
}

.outline-expander:before {
 	content: "+";
	font-family: inherit;
	color: rgb(108, 108, 108); 
  font-size: 1.5rem;
 	top: -0.1rem;
}

.outline-expander:hover:before {
	content: "+";
}

.outline-item-open>.outline-item>.outline-expander:before{
	content: "-";
}

/** source code mode */
#typora-source {
	font-family: Courier, monospace;
    color: #6A6A6A;
}

.os-windows #typora-source {
	font-family: inherit;
}

.cm-s-typora-default .cm-header, 
.cm-s-typora-default .cm-property,
.CodeMirror.cm-s-typora-default div.CodeMirror-cursor {
	color: #428bca;
}

.cm-s-typora-default .cm-atom, .cm-s-typora-default .cm-number {
	color: #777777;
}

.md-diagram-panel {
	margin-top: 24px;
	margin-left: -1.2em;
}

.md-mathjax-midline {
	background: #fafafa;
}

.enable-diagrams pre.md-fences[lang="sequence"] .code-tooltip,
.enable-diagrams pre.md-fences[lang="flow"] .code-tooltip,
.enable-diagrams pre.md-fences[lang="mermaid"] .code-tooltip {
    bottom: -3.4em;
}

.dropdown-menu .divider {
	border-color: #e5e5e5;
}

li {
	margin: 0.5rem 0;
}

li > *:last-child {
	margin-bottom: 0;
}

p img + em {
  display: block;
  text-align: center;
  font-size: 0.85em;
  color: gray;
  margin-top: 4px;
}


 @media print { @page {margin: 0 0 0 0;} body.typora-export {padding-left: 0; padding-right: 0;} #write {padding:0;}}
</style><title>Chapter2</title>
</head>
<body class='typora-export'><div class='typora-export-content'>
<div id='write'  class=''><h1 id='chapter-2'><span>Chapter 2</span></h1><h2 id='introducing-gitlab--setting-up-your-server'><span>Introducing GitLab &amp; Setting Up Your Server</span></h2><p><em><span>Ethan felt a surge of confidence as he looked at his terminal. The </span><code>git log --oneline --graph</code><span> command showed a clean history of his work from Chapter 1, safely stored in the </span><code>.git</code><span> directory within his </span><code>magicmail-infra</code><span> project. No more random backup files! But he knew this was only half the story. His code was still just on his laptop.</span></em></p><p><em><span>&quot;Okay, Maya,&quot; he said as their next session began. &quot;I&#39;ve got my local Git history sorted. How do I back this up somewhere else and start sharing it, like you mentioned?&quot;</span></em></p><p><em><span>Maya smiled. &quot;Excellent question! That brings us to the concept of </span><strong><span>remote repositories</span></strong><span> and the platform we&#39;ll use for MagicMail: </span><strong><span>GitLab</span></strong><span>. Think of GitLab as a central hub for our code – a place to store it securely, collaborate on changes, and eventually automate our entire deployment process.&quot;</span></em></p><hr /><p><span>&quot;Your local Git repository is great for tracking changes on your machine,&quot; Maya explained, &quot;but its real power multiplies when you connect it to a remote server. This remote server acts as a central source of truth, a backup, and a platform for teamwork.&quot;</span></p><h2 id='what-is-gitlab'><span>What is GitLab?</span></h2><p><span>&quot;There are several popular platforms for hosting Git repositories, like GitHub, Bitbucket, and AWS CodeCommit. For the MagicMail project, and for this book, we&#39;re going to use </span><strong><span>GitLab</span></strong><span>,&quot; Maya stated.</span></p><p><span>&quot;Why GitLab?&quot; Ethan asked.</span></p><p><span>&quot;GitLab is a comprehensive DevOps platform delivered as a single application,&quot; Maya elaborated. &quot;This means it doesn&#39;t just host your Git repositories; it also includes powerful built-in features for the entire software development lifecycle, which are fantastic for managing Infrastructure as Code:&quot;</span></p><ul><li><p><strong><span>Source Code Management (SCM):</span></strong><span> Securely hosts your Git repositories with fine-grained access controls.</span></p></li><li><p><strong><span>Collaboration:</span></strong><span> Features like Merge Requests (MRs) for code review, issue tracking for managing tasks and bugs, and wikis for documentation.</span></p></li><li><p><strong><span>Continuous Integration/Continuous Deployment (CI/CD):</span></strong><span> A robust, built-in system for automatically building, testing, and deploying your code (including our CDK infrastructure!) whenever changes are pushed.</span></p></li><li><p><strong><span>Container Registry:</span></strong><span> Stores Docker images.</span></p></li><li><p><strong><span>Security Scanning:</span></strong><span> Tools to scan your code and infrastructure for vulnerabilities.</span></p></li><li><p><strong><span>Monitoring &amp; Analytics:</span></strong><span> Features to observe application and pipeline performance.</span></p></li></ul><p><span>&quot;The key advantage is having all these tools integrated into one platform. For our purposes, we&#39;ll focus initially on Git repository hosting and collaboration, and then heavily utilize its CI/CD capabilities.&quot;</span></p><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart0" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="flowchart mermaid-svg" style="max-width: 818.453125px;" viewBox="-8 -8 818.453125 2527" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#mermaidChart0{font-family:sans-serif;font-size:16px;fill:#333;}#mermaidChart0 .error-icon{fill:#552222;}#mermaidChart0 .error-text{fill:#552222;stroke:#552222;}#mermaidChart0 .edge-thickness-normal{stroke-width:1px;}#mermaidChart0 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart0 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart0 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaidChart0 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart0 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart0 .marker{fill:#333333;stroke:#333333;}#mermaidChart0 .marker.cross{stroke:#333333;}#mermaidChart0 svg{font-family:sans-serif;font-size:16px;}#mermaidChart0 p{margin:0;}#mermaidChart0 .label{font-family:sans-serif;color:#333;}#mermaidChart0 .cluster-label text{fill:#333;}#mermaidChart0 .cluster-label span{color:#333;}#mermaidChart0 .cluster-label span p{background-color:transparent;}#mermaidChart0 .label text,#mermaidChart0 span{fill:#333;color:#333;}#mermaidChart0 .node rect,#mermaidChart0 .node circle,#mermaidChart0 .node ellipse,#mermaidChart0 .node polygon,#mermaidChart0 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaidChart0 .rough-node .label text,#mermaidChart0 .node .label text,#mermaidChart0 .image-shape .label,#mermaidChart0 .icon-shape .label{text-anchor:middle;}#mermaidChart0 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaidChart0 .rough-node .label,#mermaidChart0 .node .label,#mermaidChart0 .image-shape .label,#mermaidChart0 .icon-shape .label{text-align:center;}#mermaidChart0 .node.clickable{cursor:pointer;}#mermaidChart0 .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#mermaidChart0 .arrowheadPath{fill:#333333;}#mermaidChart0 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaidChart0 .flowchart-link{stroke:#333333;fill:none;}#mermaidChart0 .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaidChart0 .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#mermaidChart0 .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaidChart0 .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#mermaidChart0 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaidChart0 .cluster text{fill:#333;}#mermaidChart0 .cluster span{color:#333;}#mermaidChart0 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart0 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaidChart0 rect.text{fill:none;stroke-width:0;}#mermaidChart0 .icon-shape,#mermaidChart0 .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaidChart0 .icon-shape p,#mermaidChart0 .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#mermaidChart0 .icon-shape rect,#mermaidChart0 .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaidChart0 :root{--mermaid-alt-font-family:sans-serif;}</style><g><marker id="mermaidChart0_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart0_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart0_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart0_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart0_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart0_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M98.821,1284.5L117.14,1095.333C135.459,906.167,172.097,527.833,193.915,338.667C215.734,149.5,222.734,149.5,226.234,149.5L229.734,149.5" id="L_A_B_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M100.002,1284.5L118.124,1150.833C136.246,1017.167,172.49,749.833,200.489,616.167C228.487,482.5,248.24,482.5,258.116,482.5L267.992,482.5" id="L_A_C_1" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M102.759,1284.5L120.422,1206.333C138.084,1128.167,173.409,971.833,201.809,893.667C230.208,815.5,251.682,815.5,262.419,815.5L273.156,815.5" id="L_A_D_2" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M116.543,1284.5L131.908,1261.833C147.273,1239.167,178.004,1193.833,197.65,1171.167C217.297,1148.5,225.859,1148.5,230.141,1148.5L234.422,1148.5" id="L_A_E_3" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M126.88,1345.5L140.523,1358.917C154.165,1372.333,181.45,1399.167,203.157,1412.583C224.865,1426,240.995,1426,249.06,1426L257.125,1426" id="L_A_F_4" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M104.728,1345.5L122.062,1405.167C139.397,1464.833,174.066,1584.167,196.655,1643.833C219.245,1703.5,229.755,1703.5,235.01,1703.5L240.266,1703.5" id="L_A_G_5" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M100.638,1345.5L118.654,1460.667C136.67,1575.833,172.702,1806.167,194.218,1921.333C215.734,2036.5,222.734,2036.5,226.234,2036.5L229.734,2036.5" id="L_A_H_6" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M99.132,1345.5L117.399,1516.167C135.666,1686.833,172.2,2028.167,195.397,2198.833C218.594,2369.5,228.453,2369.5,233.383,2369.5L238.313,2369.5" id="L_A_I_7" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M427.969,103.5L443.096,92.667C458.224,81.833,488.479,60.167,513.293,49.333C538.107,38.5,557.479,38.5,567.165,38.5L576.852,38.5" id="L_B_B1_8" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M493.734,149.5L497.901,149.5C502.068,149.5,510.401,149.5,520.849,149.5C531.297,149.5,543.859,149.5,550.141,149.5L556.422,149.5" id="L_B_B2_9" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M427.969,195.5L443.096,206.333C458.224,217.167,488.479,238.833,517.939,249.667C547.398,260.5,576.063,260.5,590.395,260.5L604.727,260.5" id="L_B_B3_10" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M406.324,452L425.059,438.583C443.794,425.167,481.264,398.333,511.305,384.917C541.346,371.5,563.958,371.5,575.264,371.5L586.57,371.5" id="L_C_C1_11" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M455.477,482.5L466.02,482.5C476.563,482.5,497.648,482.5,516.906,482.5C536.164,482.5,553.594,482.5,562.309,482.5L571.023,482.5" id="L_C_C2_12" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M406.324,513L425.059,526.417C443.794,539.833,481.264,566.667,509.739,580.083C538.214,593.5,557.693,593.5,567.432,593.5L577.172,593.5" id="L_C_C3_13" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M406.324,785L425.059,771.583C443.794,758.167,481.264,731.333,509.872,717.917C538.479,704.5,558.224,704.5,568.096,704.5L577.969,704.5" id="L_D_D1_14" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M450.313,815.5L461.716,815.5C473.12,815.5,495.927,815.5,514.991,815.5C534.055,815.5,549.375,815.5,557.035,815.5L564.695,815.5" id="L_D_D2_15" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M406.324,846L425.059,859.417C443.794,872.833,481.264,899.667,507.091,913.083C532.917,926.5,547.099,926.5,554.19,926.5L561.281,926.5" id="L_D_D3_16" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M406.324,1118L425.059,1104.583C443.794,1091.167,481.264,1064.333,505.093,1050.917C528.922,1037.5,539.109,1037.5,544.203,1037.5L549.297,1037.5" id="L_E_E1_17" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M489.047,1148.5L493.995,1148.5C498.943,1148.5,508.839,1148.5,522.905,1148.5C536.971,1148.5,555.208,1148.5,564.327,1148.5L573.445,1148.5" id="L_E_E2_18" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M406.324,1179L425.059,1192.417C443.794,1205.833,481.264,1232.667,510.117,1246.083C538.969,1259.5,559.203,1259.5,569.32,1259.5L579.438,1259.5" id="L_E_E3_19" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M448.915,1395.5L460.551,1391.333C472.188,1387.167,495.461,1378.833,512.49,1374.667C529.518,1370.5,540.302,1370.5,545.694,1370.5L551.086,1370.5" id="L_F_F1_20" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M448.915,1456.5L460.551,1460.667C472.188,1464.833,495.461,1473.167,510.598,1477.333C525.734,1481.5,532.734,1481.5,536.234,1481.5L539.734,1481.5" id="L_F_F2_21" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M406.324,1673L425.059,1659.583C443.794,1646.167,481.264,1619.333,505.795,1605.917C530.326,1592.5,541.917,1592.5,547.712,1592.5L553.508,1592.5" id="L_G_G1_22" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M483.203,1703.5L489.125,1703.5C495.047,1703.5,506.891,1703.5,517.878,1703.5C528.865,1703.5,538.995,1703.5,544.06,1703.5L549.125,1703.5" id="L_G_G2_23" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M406.324,1734L425.059,1747.417C443.794,1760.833,481.264,1787.667,513.007,1801.083C544.75,1814.5,570.766,1814.5,583.773,1814.5L596.781,1814.5" id="L_G_G3_24" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M427.969,1990.5L443.096,1979.667C458.224,1968.833,488.479,1947.167,512.159,1936.333C535.839,1925.5,552.943,1925.5,561.495,1925.5L570.047,1925.5" id="L_H_H1_25" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M493.734,2036.5L497.901,2036.5C502.068,2036.5,510.401,2036.5,525.551,2036.5C540.701,2036.5,562.667,2036.5,573.65,2036.5L584.633,2036.5" id="L_H_H2_26" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M427.969,2082.5L443.096,2093.333C458.224,2104.167,488.479,2125.833,510.081,2136.667C531.682,2147.5,544.63,2147.5,551.104,2147.5L557.578,2147.5" id="L_H_H3_27" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M406.324,2339L425.059,2325.583C443.794,2312.167,481.264,2285.333,508.494,2271.917C535.724,2258.5,552.714,2258.5,561.208,2258.5L569.703,2258.5" id="L_I_I1_28" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M485.156,2369.5L490.753,2369.5C496.349,2369.5,507.542,2369.5,519.824,2369.5C532.107,2369.5,545.479,2369.5,552.165,2369.5L558.852,2369.5" id="L_I_I2_29" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M406.324,2400L425.059,2413.417C443.794,2426.833,481.264,2453.667,507.119,2467.083C532.974,2480.5,547.214,2480.5,554.333,2480.5L561.453,2480.5" id="L_I_I3_30" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default  " id="flowchart-A-0" transform="translate(95.8671875, 1315)"><rect class="basic label-container" style="" x="-87.8671875" y="-30.5" width="175.734375" height="61"></rect><g class="label" style="" transform="translate(-57.8671875, -15.5)"><rect></rect><foreignObject width="115.734375" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>GitLab Service</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-B-1" transform="translate(363.734375, 149.5)"><rect class="basic label-container" style="" x="-130" y="-46" width="260" height="92"></rect><g class="label" style="" transform="translate(-100, -31)"><rect></rect><foreignObject width="200" height="62"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel "><p>Source Code Management</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-C-3" transform="translate(363.734375, 482.5)"><rect class="basic label-container" style="" x="-91.7421875" y="-30.5" width="183.484375" height="61"></rect><g class="label" style="" transform="translate(-61.7421875, -15.5)"><rect></rect><foreignObject width="123.484375" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>CI/CD Pipelines</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-D-5" transform="translate(363.734375, 815.5)"><rect class="basic label-container" style="" x="-86.578125" y="-30.5" width="173.15625" height="61"></rect><g class="label" style="" transform="translate(-56.578125, -15.5)"><rect></rect><foreignObject width="113.15625" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Issue Tracking</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-E-7" transform="translate(363.734375, 1148.5)"><rect class="basic label-container" style="" x="-125.3125" y="-30.5" width="250.625" height="61"></rect><g class="label" style="" transform="translate(-95.3125, -15.5)"><rect></rect><foreignObject width="190.625" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Merge Request Reviews</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-F-9" transform="translate(363.734375, 1426)"><rect class="basic label-container" style="" x="-102.609375" y="-30.5" width="205.21875" height="61"></rect><g class="label" style="" transform="translate(-72.609375, -15.5)"><rect></rect><foreignObject width="145.21875" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Container Registry</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-G-11" transform="translate(363.734375, 1703.5)"><rect class="basic label-container" style="" x="-119.46875" y="-30.5" width="238.9375" height="61"></rect><g class="label" style="" transform="translate(-89.46875, -15.5)"><rect></rect><foreignObject width="178.9375" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Security &amp; Compliance</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-H-13" transform="translate(363.734375, 2036.5)"><rect class="basic label-container" style="" x="-130" y="-46" width="260" height="92"></rect><g class="label" style="" transform="translate(-100, -31)"><rect></rect><foreignObject width="200" height="62"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel "><p>Monitoring &amp; Observability</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-I-15" transform="translate(363.734375, 2369.5)"><rect class="basic label-container" style="" x="-121.421875" y="-30.5" width="242.84375" height="61"></rect><g class="label" style="" transform="translate(-91.421875, -15.5)"><rect></rect><foreignObject width="182.84375" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>DevSecOps Integration</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-B1-17" transform="translate(673.09375, 38.5)"><rect class="basic label-container" style="" x="-92.2421875" y="-30.5" width="184.484375" height="61"></rect><g class="label" style="" transform="translate(-62.2421875, -15.5)"><rect></rect><foreignObject width="124.484375" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Git Repositories</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-B2-19" transform="translate(673.09375, 149.5)"><rect class="basic label-container" style="" x="-112.671875" y="-30.5" width="225.34375" height="61"></rect><g class="label" style="" transform="translate(-82.671875, -15.5)"><rect></rect><foreignObject width="165.34375" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Branching &amp; Tagging</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-B3-21" transform="translate(673.09375, 260.5)"><rect class="basic label-container" style="" x="-64.3671875" y="-30.5" width="128.734375" height="61"></rect><g class="label" style="" transform="translate(-34.3671875, -15.5)"><rect></rect><foreignObject width="68.734375" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Web IDE</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-C1-23" transform="translate(673.09375, 371.5)"><rect class="basic label-container" style="" x="-82.5234375" y="-30.5" width="165.046875" height="61"></rect><g class="label" style="" transform="translate(-52.5234375, -15.5)"><rect></rect><foreignObject width="105.046875" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Auto DevOps</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-C2-25" transform="translate(673.09375, 482.5)"><rect class="basic label-container" style="" x="-98.0703125" y="-30.5" width="196.140625" height="61"></rect><g class="label" style="" transform="translate(-68.0703125, -15.5)"><rect></rect><foreignObject width="136.140625" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Custom Pipelines</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-C3-27" transform="translate(673.09375, 593.5)"><rect class="basic label-container" style="" x="-91.921875" y="-30.5" width="183.84375" height="61"></rect><g class="label" style="" transform="translate(-61.921875, -15.5)"><rect></rect><foreignObject width="123.84375" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Runner Support</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-D1-29" transform="translate(673.09375, 704.5)"><rect class="basic label-container" style="" x="-91.125" y="-30.5" width="182.25" height="61"></rect><g class="label" style="" transform="translate(-61.125, -15.5)"><rect></rect><foreignObject width="122.25" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Kanban Boards</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-D2-31" transform="translate(673.09375, 815.5)"><rect class="basic label-container" style="" x="-104.3984375" y="-30.5" width="208.796875" height="61"></rect><g class="label" style="" transform="translate(-74.3984375, -15.5)"><rect></rect><foreignObject width="148.796875" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Epics &amp; Milestones</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-D3-33" transform="translate(673.09375, 926.5)"><rect class="basic label-container" style="" x="-107.8125" y="-30.5" width="215.625" height="61"></rect><g class="label" style="" transform="translate(-77.8125, -15.5)"><rect></rect><foreignObject width="155.625" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Labels &amp; Assignees</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-E1-35" transform="translate(673.09375, 1037.5)"><rect class="basic label-container" style="" x="-119.796875" y="-30.5" width="239.59375" height="61"></rect><g class="label" style="" transform="translate(-89.796875, -15.5)"><rect></rect><foreignObject width="179.59375" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Code Review Workflow</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-E2-37" transform="translate(673.09375, 1148.5)"><rect class="basic label-container" style="" x="-95.6484375" y="-30.5" width="191.296875" height="61"></rect><g class="label" style="" transform="translate(-65.6484375, -15.5)"><rect></rect><foreignObject width="131.296875" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Inline Comments</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-E3-39" transform="translate(673.09375, 1259.5)"><rect class="basic label-container" style="" x="-89.65625" y="-30.5" width="179.3125" height="61"></rect><g class="label" style="" transform="translate(-59.65625, -15.5)"><rect></rect><foreignObject width="119.3125" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Approval Rules</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-F1-41" transform="translate(673.09375, 1370.5)"><rect class="basic label-container" style="" x="-118.0078125" y="-30.5" width="236.015625" height="61"></rect><g class="label" style="" transform="translate(-88.0078125, -15.5)"><rect></rect><foreignObject width="176.015625" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Docker Image Hosting</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-F2-43" transform="translate(673.09375, 1481.5)"><rect class="basic label-container" style="" x="-129.359375" y="-30.5" width="258.71875" height="61"></rect><g class="label" style="" transform="translate(-99.359375, -15.5)"><rect></rect><foreignObject width="198.71875" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Kubernetes Deployments</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-G1-45" transform="translate(673.09375, 1592.5)"><rect class="basic label-container" style="" x="-115.5859375" y="-30.5" width="231.171875" height="61"></rect><g class="label" style="" transform="translate(-85.5859375, -15.5)"><rect></rect><foreignObject width="171.171875" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>SAST/DAST Scanning</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-G2-47" transform="translate(673.09375, 1703.5)"><rect class="basic label-container" style="" x="-119.96875" y="-30.5" width="239.9375" height="61"></rect><g class="label" style="" transform="translate(-89.96875, -15.5)"><rect></rect><foreignObject width="179.9375" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Dependency Scanning</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-G3-49" transform="translate(673.09375, 1814.5)"><rect class="basic label-container" style="" x="-72.3125" y="-30.5" width="144.625" height="61"></rect><g class="label" style="" transform="translate(-42.3125, -15.5)"><rect></rect><foreignObject width="84.625" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Audit Logs</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-H1-51" transform="translate(673.09375, 1925.5)"><rect class="basic label-container" style="" x="-99.046875" y="-30.5" width="198.09375" height="61"></rect><g class="label" style="" transform="translate(-69.046875, -15.5)"><rect></rect><foreignObject width="138.09375" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Pipeline Analytics</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-H2-53" transform="translate(673.09375, 2036.5)"><rect class="basic label-container" style="" x="-84.4609375" y="-30.5" width="168.921875" height="61"></rect><g class="label" style="" transform="translate(-54.4609375, -15.5)"><rect></rect><foreignObject width="108.921875" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Error Tracking</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-H3-55" transform="translate(673.09375, 2147.5)"><rect class="basic label-container" style="" x="-111.515625" y="-30.5" width="223.03125" height="61"></rect><g class="label" style="" transform="translate(-81.515625, -15.5)"><rect></rect><foreignObject width="163.03125" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Performance Metrics</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-I1-57" transform="translate(673.09375, 2258.5)"><rect class="basic label-container" style="" x="-99.390625" y="-30.5" width="198.78125" height="61"></rect><g class="label" style="" transform="translate(-69.390625, -15.5)"><rect></rect><foreignObject width="138.78125" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Secrets Detection</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-I2-59" transform="translate(673.09375, 2369.5)"><rect class="basic label-container" style="" x="-110.2421875" y="-30.5" width="220.484375" height="61"></rect><g class="label" style="" transform="translate(-80.2421875, -15.5)"><rect></rect><foreignObject width="160.484375" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>License Compliance</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-I3-61" transform="translate(673.09375, 2480.5)"><rect class="basic label-container" style="" x="-107.640625" y="-30.5" width="215.28125" height="61"></rect><g class="label" style="" transform="translate(-77.640625, -15.5)"><rect></rect><foreignObject width="155.28125" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Security Dashboard</p></span></div></foreignObject></g></g></g></g></g></svg></div><p><em><span>Diagram: GitLab integrates multiple DevOps tools into a single platform.</span></em></p><h2 id='gitlabcom-vs-self-hosted-gitlab'><span>GitLab.com vs. Self-Hosted GitLab</span></h2><p><span>&quot;GitLab offers two main deployment models:&quot; Maya continued.</span></p><ol start='' ><li><p><strong><span>GitLab.com (SaaS):</span></strong><span> This is GitLab&#39;s hosted Software-as-a-Service offering. You simply sign up for an account (they have generous free tiers), create your projects, and GitLab manages all the underlying infrastructure for you. This is often the quickest and easiest way to get started, especially for individuals and small teams, and it&#39;s what many large organizations use as well.</span></p></li><li><p><strong><span>GitLab Self-Managed (Self-Hosted):</span></strong><span> GitLab also allows you to install and run the entire GitLab platform on your own infrastructure (on-premises servers or cloud VMs like AWS EC2). This gives you complete control over your instance, data residency, and customization. GitLab offers both a free Community Edition (CE) and paid Enterprise Editions (EE) for self-hosting.</span></p></li></ol><p><span>&quot;For many real-world projects, especially starting out, GitLab.com is perfectly suitable,&quot; Maya noted. &quot;However, since this book is about learning AWS and CDK...&quot; she grinned, &quot;...we&#39;re going to take the more hands-on path for part of this chapter. We&#39;ll explore </span><strong><span>Option 2</span></strong><span> and actually use our CDK skills to deploy our own </span><strong><span>GitLab Community Edition (CE)</span></strong><span> server on an AWS EC2 instance!&quot;</span></p><p><span>&quot;Wait, we&#39;re deploying GitLab </span><em><span>using</span></em><span> CDK?&quot; Ethan asked, surprised.</span></p><p><span>&quot;Exactly! It&#39;s a fantastic practical exercise,&quot; Maya confirmed. &quot;It reinforces your CDK skills, shows you how to manage more complex application deployments on EC2, and gives you a fully functional GitLab instance to use for the rest of the book&#39;s exercises. We&#39;ll still cover how to use GitLab.com briefly, as it&#39;s a common choice, but the main hands-on part will be deploying our own.&quot;</span></p><h3 id='option-1-using-gitlabcom-the-quick-start'><span>Option 1: Using GitLab.com (The Quick Start)</span></h3><p><span>&quot;If you just want to get going quickly or prefer not to manage your own server, GitLab.com is the way to go,&quot; Maya said. &quot;The process is straightforward:&quot;</span></p><ol start='' ><li><p><strong><span>Sign Up:</span></strong><span> Go to </span><a href='https://gitlab.com/users/sign_up'><span>GitLab.com</span></a><span> and create a free account.</span></p></li><li><p><strong><span>Create a Project:</span></strong><span> Once logged in, click the &#39;+&#39; icon (usually near the top right) and select &#39;New project/repository&#39;. Choose &#39;Create blank project&#39;.</span></p></li><li><p><strong><span>Name Your Project:</span></strong><span> Give your project a name (e.g., </span><code>magicmail-infra</code><span>), optionally add a description, and decide on the visibility level (Private is recommended for most projects initially). You typically </span><em><span>don&#39;t</span></em><span> need to initialize it with a README if you plan to push your existing local repository from Chapter 1.</span></p></li><li><p><strong><span>Get the Repository URL:</span></strong><span> After creating the project, GitLab will display the repository URL (HTTPS or SSH). You&#39;ll need this URL later to add it as a remote to your local Git repository (</span><code>git remote add origin &lt;URL&gt;</code><span>).</span></p></li></ol><p><img src="images/Your GitLab group · GitLab.png" referrerpolicy="no-referrer" alt="Your GitLab group · GitLab">
<em><span>Caption: Creating a new project on GitLab.com.</span></em></p><p><span>&quot;That&#39;s essentially it. You&#39;d then follow the steps we&#39;ll cover later for adding this URL as a remote to your local repo and pushing your code. GitLab.com handles the server, backups, updates, etc.&quot;</span></p><h3 id='option-2-self-hosting-gitlab-ce-with-aws-cdk'><span>Option 2: Self-Hosting GitLab CE with AWS CDK</span></h3><p><span>&quot;Now for the more adventurous route – deploying our own GitLab CE instance using CDK,&quot; Maya announced. &quot;This gives us maximum control and is a great way to practice deploying stateful applications on AWS.&quot;</span></p><h4 id='architecture-overview'><span>Architecture Overview</span></h4><p><span>&quot;Before writing code, let&#39;s plan the AWS resources we&#39;ll need,&quot; Maya sketched on a virtual whiteboard. &quot;We need a virtual server (EC2) with the SSM Agent, network access control (Security Group), persistent storage for GitLab&#39;s data (EBS Volume), an IAM Role to grant the necessary permissions for SSM, and a way to install GitLab automatically when the server starts (User Data).&quot;</span></p><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart1" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="flowchart mermaid-svg" style="max-width: 1127.9609375px;" viewBox="0 0 1127.9609375 697" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#mermaidChart1{font-family:sans-serif;font-size:16px;fill:#333;}#mermaidChart1 .error-icon{fill:#552222;}#mermaidChart1 .error-text{fill:#552222;stroke:#552222;}#mermaidChart1 .edge-thickness-normal{stroke-width:1px;}#mermaidChart1 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart1 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart1 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaidChart1 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart1 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart1 .marker{fill:#333333;stroke:#333333;}#mermaidChart1 .marker.cross{stroke:#333333;}#mermaidChart1 svg{font-family:sans-serif;font-size:16px;}#mermaidChart1 p{margin:0;}#mermaidChart1 .label{font-family:sans-serif;color:#333;}#mermaidChart1 .cluster-label text{fill:#333;}#mermaidChart1 .cluster-label span{color:#333;}#mermaidChart1 .cluster-label span p{background-color:transparent;}#mermaidChart1 .label text,#mermaidChart1 span{fill:#333;color:#333;}#mermaidChart1 .node rect,#mermaidChart1 .node circle,#mermaidChart1 .node ellipse,#mermaidChart1 .node polygon,#mermaidChart1 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaidChart1 .rough-node .label text,#mermaidChart1 .node .label text,#mermaidChart1 .image-shape .label,#mermaidChart1 .icon-shape .label{text-anchor:middle;}#mermaidChart1 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaidChart1 .rough-node .label,#mermaidChart1 .node .label,#mermaidChart1 .image-shape .label,#mermaidChart1 .icon-shape .label{text-align:center;}#mermaidChart1 .node.clickable{cursor:pointer;}#mermaidChart1 .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#mermaidChart1 .arrowheadPath{fill:#333333;}#mermaidChart1 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaidChart1 .flowchart-link{stroke:#333333;fill:none;}#mermaidChart1 .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaidChart1 .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#mermaidChart1 .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaidChart1 .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#mermaidChart1 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaidChart1 .cluster text{fill:#333;}#mermaidChart1 .cluster span{color:#333;}#mermaidChart1 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart1 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaidChart1 rect.text{fill:none;stroke-width:0;}#mermaidChart1 .icon-shape,#mermaidChart1 .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaidChart1 .icon-shape p,#mermaidChart1 .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#mermaidChart1 .icon-shape rect,#mermaidChart1 .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaidChart1 :root{--mermaid-alt-font-family:sans-serif;}</style><g><marker id="mermaidChart1_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart1_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart1_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart1_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart1_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart1_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"><g class="cluster " id="AWS_Cloud" data-look="classic"><rect style="" x="211.875" y="8" width="908.0859375" height="681"></rect><g class="cluster-label " transform="translate(576.77734375, 8)"><foreignObject width="178.28125" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>AWS Cloud (us-east-1)</p></span></div></foreignObject></g></g><g class="cluster " id="VPC" data-look="classic"><rect style="" x="231.875" y="33" width="868.0859375" height="631"></rect><g class="cluster-label " transform="translate(570.13671875, 33)"><foreignObject width="191.5625" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>VPC (Default or Custom)</p></span></div></foreignObject></g></g><g class="cluster " id="Public_Subnet" data-look="classic"><rect style="" x="256.67578125" y="293" width="755.984375" height="173"></rect><g class="cluster-label " transform="translate(580.20703125, 293)"><foreignObject width="108.921875" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Public Subnet</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path d="M146.699,150L172.495,164.5C198.291,179,249.884,208,275.68,231.833C301.477,255.667,301.477,274.333,319.799,290.17C338.121,306.007,374.766,319.013,393.088,325.517L411.41,332.02" id="L_User_EC2_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart1_flowchart-v2-pointEnd)"></path><path d="M176.875,146.102L224.962,161.251C273.049,176.401,369.224,206.701,417.311,231.184C465.398,255.667,465.398,274.333,468.789,287.343C472.181,300.353,478.963,307.706,482.354,311.383L485.745,315.06" id="L_User_EC2_1" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart1_flowchart-v2-pointEnd)"></path><path d="M624.961,181L624.961,190.333C624.961,199.667,624.961,218.333,624.961,237C624.961,255.667,624.961,274.333,621.57,287.343C618.179,300.353,611.397,307.706,608.006,311.383L604.615,315.06" id="L_Role_EC2_2" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart1_flowchart-v2-pointEnd)"></path><path d="M934.961,181L934.961,190.333C934.961,199.667,934.961,218.333,934.961,237C934.961,255.667,934.961,274.333,892.315,293.131C849.669,311.928,764.377,330.856,721.731,340.32L679.085,349.784" id="L_SG_EC2_3" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart1_flowchart-v2-pointEnd)"></path><path d="M545.18,441L545.18,445.167C545.18,449.333,545.18,457.667,545.18,468.583C545.18,479.5,545.18,493,545.18,505.833C545.18,518.667,545.18,530.833,545.18,536.917L545.18,543" id="L_EC2_EBS_4" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart1_flowchart-v2-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel" transform="translate(301.4765625, 237)"><g class="label" transform="translate(-49.6015625, -31)"><foreignObject width="99.203125" height="62"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "><p>HTTPS (443)<br/>HTTP (80)</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(465.3984375, 237)"><g class="label" transform="translate(-94.3203125, -31)"><foreignObject width="188.640625" height="62"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "><p>Via AWS Console/CLI<br/>(SSM Session Manager)</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(624.9609375, 237)"><g class="label" transform="translate(-45.2421875, -15.5)"><foreignObject width="90.484375" height="31"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "><p>Attached to</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(934.9609375, 237)"><g class="label" transform="translate(-39.390625, -15.5)"><foreignObject width="78.78125" height="31"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "><p>Applies to</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(545.1796875, 506.5)"><g class="label" transform="translate(-61.7734375, -15.5)"><foreignObject width="123.546875" height="31"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "><p>Attaches / Uses</p></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default  " id="flowchart-Role-62" transform="translate(624.9609375, 119.5)"><rect class="basic label-container" style="fill:#f9a825 !important;stroke:#333 !important;stroke-width:1px !important" x="-130" y="-61.5" width="260" height="123"></rect><g class="label" style="" transform="translate(-100, -46.5)"><rect></rect><foreignObject width="200" height="93"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel "><p>📜 IAM Role/Instance Profile<br/>+ SSM Permissions</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-SG-63" transform="translate(934.9609375, 119.5)"><rect class="basic label-container" style="fill:#2277B0 !important;stroke:#333 !important;stroke-width:1px !important" x="-130" y="-61.5" width="260" height="123"></rect><g class="label" style="" transform="translate(-100, -46.5)"><rect></rect><foreignObject width="200" height="93"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel "><p>🔒 Security Group (GitLab-SG)<br/>Allows ports 80, 443</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-EC2-64" transform="translate(545.1796875, 379.5)"><rect class="basic label-container" style="fill:#FF9900 !important;stroke:#333 !important;stroke-width:1px !important" x="-130" y="-61.5" width="260" height="123"></rect><g class="label" style="" transform="translate(-100, -46.5)"><rect></rect><foreignObject width="200" height="93"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel "><p>💻 EC2 Instance<br/>(Ubuntu, GitLab CE, SSM Agent)</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-EBS-65" transform="translate(545.1796875, 593)"><rect class="basic label-container" style="fill:#1d8102 !important;stroke:#333 !important;stroke-width:1px !important" x="-91.0859375" y="-46" width="182.171875" height="92"></rect><g class="label" style="" transform="translate(-61.0859375, -31)"><rect></rect><foreignObject width="122.171875" height="62"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>💾 EBS Volume<br/>(GitLab Data)</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-User-66" transform="translate(92.4375, 119.5)"><rect class="basic label-container" style="fill:#999 !important;stroke:#333 !important;stroke-width:1px !important" x="-84.4375" y="-30.5" width="168.875" height="61"></rect><g class="label" style="" transform="translate(-54.4375, -15.5)"><rect></rect><foreignObject width="108.875" height="31"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>👤 User (You)</p></span></div></foreignObject></g></g></g></g></g></svg></div><p><em><span>Diagram: Architecture for self-hosted GitLab CE on AWS EC2.</span></em></p><p><span>&quot;Before diving into the code,&quot; Maya said, &quot;let&#39;s map out what resources we need for our GitLab server.&quot;</span></p><p><span>We&#39;ll deploy:</span></p><ul><li><p><strong><span>An EC2 instance</span></strong><span> running Ubuntu 22.04 with SSM access — to host GitLab.</span></p></li><li><p><strong><span>An EBS data volume</span></strong><span> — to store GitLab&#39;s repositories and configuration persistently.</span></p></li><li><p><strong><span>A Security Group</span></strong><span> — to allow inbound HTTP (80) and HTTPS (443) traffic, but no SSH (we use SSM instead).</span></p></li><li><p><strong><span>An IAM Role</span></strong><span> — to grant the EC2 instance permissions to use Session Manager securely.</span></p></li><li><p><strong><span>User Data script</span></strong><span> — to automate GitLab installation during instance launch.</span></p></li><li><p><strong><span>An Elastic IP (EIP)</span></strong><span> — to give our server a stable public IP address.</span></p></li></ul><p><span>&quot;This high-level setup ensures our GitLab server is accessible, secure, and persistent across reboots or instance replacements,&quot; Maya summarized.</span></p><h4 id='cdk-implementation-strategy'><span>CDK Implementation Strategy</span></h4><p><span>&quot;To keep things organized,&quot; Maya explained, &quot;we won&#39;t add the GitLab server resources directly into our existing </span><code>MagicmailInfraStack</code><span>. Instead, we&#39;ll create a </span><em><span>new</span></em><span>, dedicated CDK Stack for deploying GitLab. This promotes modularity – the MagicMail application infrastructure and the GitLab server infrastructure are managed separately.&quot;</span></p><p><span>&quot;First, create a new file in your </span><code>lib</code><span> directory named </span><code>gitlab-server-stack.ts</code><span>.  This is where we&#39;ll define the resources for our GitLab server. Copy the content below, then save the file.&quot;</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="typescript" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="typescript"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// lib/gitlab-server-stack.ts</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-keyword">*</span> <span class="cm-keyword">as</span> <span class="cm-def">cdk</span> <span class="cm-keyword">from</span> <span class="cm-string">'aws-cdk-lib'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> { <span class="cm-def">Construct</span> } <span class="cm-keyword">from</span> <span class="cm-string">'constructs'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-keyword">*</span> <span class="cm-keyword">as</span> <span class="cm-def">ec2</span> <span class="cm-keyword">from</span> <span class="cm-string">'aws-cdk-lib/aws-ec2'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-keyword">*</span> <span class="cm-keyword">as</span> <span class="cm-def">iam</span> <span class="cm-keyword">from</span> <span class="cm-string">'aws-cdk-lib/aws-iam'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">export</span> <span class="cm-keyword">class</span> <span class="cm-def">GitLabServerStack</span> <span class="cm-keyword">extends</span> <span class="cm-type">cdk</span>.<span class="cm-type">Stack</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-property">constructor</span>(<span class="cm-def">scope</span>: <span class="cm-type">Construct</span>, <span class="cm-def">id</span>: <span class="cm-type">string</span>, <span class="cm-def">props</span><span class="cm-operator">?</span>: <span class="cm-type">cdk</span>.<span class="cm-type">StackProps</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">super</span>(<span class="cm-variable-2">scope</span>, <span class="cm-variable-2">id</span>, <span class="cm-variable-2">props</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// --- VPC ---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">vpc</span>: <span class="cm-type">ec2</span>.<span class="cm-type">IVpc</span> <span class="cm-operator">=</span> <span class="cm-variable">ec2</span>.<span class="cm-property">Vpc</span>.<span class="cm-property">fromLookup</span>(<span class="cm-keyword">this</span>, <span class="cm-string">'Vpc'</span>, { <span class="cm-property">isDefault</span>: <span class="cm-atom">true</span> });</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// --- IAM Role for EC2 Instance (for SSM Access) ---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">instanceRole</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">iam</span>.<span class="cm-property">Role</span>(<span class="cm-keyword">this</span>, <span class="cm-string">'GitLabInstanceRole'</span>, {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">assumedBy</span>: <span class="cm-keyword">new</span> <span class="cm-variable">iam</span>.<span class="cm-property">ServicePrincipal</span>(<span class="cm-string">'ec2.amazonaws.com'</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">description</span>: <span class="cm-string">'IAM Role for GitLab EC2 instance to allow SSM access'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  });</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-2">instanceRole</span>.<span class="cm-property">addManagedPolicy</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">iam</span>.<span class="cm-property">ManagedPolicy</span>.<span class="cm-property">fromAwsManagedPolicyName</span>(<span class="cm-string">'AmazonSSMManagedInstanceCore'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  );</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// --- Security Group ---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">gitlabSecurityGroup</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">ec2</span>.<span class="cm-property">SecurityGroup</span>(<span class="cm-keyword">this</span>, <span class="cm-string">'GitLabSecurityGroup'</span>, {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">vpc</span>: <span class="cm-variable-2">vpc</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">description</span>: <span class="cm-string">'Allow HTTP, HTTPS access to GitLab server'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">allowAllOutbound</span>: <span class="cm-atom">true</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  });</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-2">gitlabSecurityGroup</span>.<span class="cm-property">addIngressRule</span>(<span class="cm-variable">ec2</span>.<span class="cm-property">Peer</span>.<span class="cm-property">anyIpv4</span>(), <span class="cm-variable">ec2</span>.<span class="cm-property">Port</span>.<span class="cm-property">tcp</span>(<span class="cm-number">80</span>), <span class="cm-string">'Allow HTTP access'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-2">gitlabSecurityGroup</span>.<span class="cm-property">addIngressRule</span>(<span class="cm-variable">ec2</span>.<span class="cm-property">Peer</span>.<span class="cm-property">anyIpv4</span>(), <span class="cm-variable">ec2</span>.<span class="cm-property">Port</span>.<span class="cm-property">tcp</span>(<span class="cm-number">443</span>), <span class="cm-string">'Allow HTTPS access'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// --- EBS Volume Definitions ---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// Define the device name as a constant - Use NVMe name</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">dataVolumeDeviceName</span>: <span class="cm-type">string</span> <span class="cm-operator">=</span> <span class="cm-string">'/dev/sdf'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">dataVolumeConfig</span>: <span class="cm-type">ec2</span>.<span class="cm-type">BlockDeviceVolume</span> <span class="cm-operator">=</span> <span class="cm-variable">ec2</span>.<span class="cm-property">BlockDeviceVolume</span>.<span class="cm-property">ebs</span>(<span class="cm-number">100</span>, {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-property">volumeType</span>: <span class="cm-variable">ec2</span>.<span class="cm-property">EbsDeviceVolumeType</span>.<span class="cm-property">GP3</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-property">encrypted</span>: <span class="cm-atom">true</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-property">deleteOnTermination</span>: <span class="cm-atom">false</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  });</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">dataBlockDevice</span>: <span class="cm-type">ec2</span>.<span class="cm-type">BlockDevice</span> <span class="cm-operator">=</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-property">deviceName</span>: <span class="cm-variable-2">dataVolumeDeviceName</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-property">volume</span>: <span class="cm-variable-2">dataVolumeConfig</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  };</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">rootVolumeConfig</span>: <span class="cm-type">ec2</span>.<span class="cm-type">BlockDeviceVolume</span> <span class="cm-operator">=</span> <span class="cm-variable">ec2</span>.<span class="cm-property">BlockDeviceVolume</span>.<span class="cm-property">ebs</span>(<span class="cm-number">50</span>, {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-property">volumeType</span>: <span class="cm-variable">ec2</span>.<span class="cm-property">EbsDeviceVolumeType</span>.<span class="cm-property">GP3</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-property">encrypted</span>: <span class="cm-atom">true</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  });</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">rootBlockDevice</span>: <span class="cm-type">ec2</span>.<span class="cm-type">BlockDevice</span> <span class="cm-operator">=</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-property">deviceName</span>: <span class="cm-string">'/dev/sda1'</span>, <span class="cm-comment">// Common root device name for Ubuntu AMIs</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-property">volume</span>: <span class="cm-variable-2">rootVolumeConfig</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  };</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// --- EC2 Instance ---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">userData</span> <span class="cm-operator">=</span> <span class="cm-variable">ec2</span>.<span class="cm-property">UserData</span>.<span class="cm-property">forLinux</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">gitlabMountPoint</span>: <span class="cm-type">string</span> <span class="cm-operator">=</span> <span class="cm-string">'/var/opt/gitlab'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-2">userData</span>.<span class="cm-property">addCommands</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'echo "--- Formatting and Mounting Data Volume ---"'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment">// Wait for NVMe devices to initialize (up to 60 seconds)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'for i in {1..60}; do [ -e /dev/nvme1n1 ] &amp;&amp; break || sleep 1; done'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment">// Find EBS volume using persistent symlink</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'DATA_DEVICE=$(realpath /dev/disk/by-id/nvme-Amazon_Elastic_Block_Store_*)'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'[ -b "$DATA_DEVICE" ] || DATA_DEVICE="/dev/nvme1n1"'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'if [ -b "$DATA_DEVICE" ]; then'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'  echo "Found EBS volume at $DATA_DEVICE"'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment">// Check filesystem</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'  if ! blkid $DATA_DEVICE; then'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">' &nbsp;  echo "Formatting $DATA_DEVICE with ext4"'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">' &nbsp;  mkfs -t ext4 -q $DATA_DEVICE'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'  fi'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment">// Create mount point</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string-2">`  mkdir -p ${</span><span class="cm-variable-2">gitlabMountPoint</span><span class="cm-string-2">}`</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment">// Get UUID and update fstab</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'  UUID=$(blkid -s UUID -o value $DATA_DEVICE)'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string-2">`  echo "UUID=$UUID ${</span><span class="cm-variable-2">gitlabMountPoint</span><span class="cm-string-2">}</span> <span class="cm-string-2">ext4 defaults,nofail,noatime 0 2" | tee -a /etc/fstab`</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment">// Mount and set permissions</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string-2">`  mount ${</span><span class="cm-variable-2">gitlabMountPoint</span><span class="cm-string-2">}`</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'  chown git:git ${gitlabMountPoint}'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'  chmod 755 ${gitlabMountPoint}'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'else'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'  echo "ERROR: EBS volume not found! Using root volume"'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string-2">`  mkdir -p ${</span><span class="cm-variable-2">gitlabMountPoint</span><span class="cm-string-2">}`</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'fi'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment">// GitLab installation continues...</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'echo "--- Installing Dependencies &amp; Setting up GitLab Repo ---"'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'export DEBIAN_FRONTEND=noninteractive'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'apt-get update -y'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'apt-get install -y curl ca-certificates tzdata perl'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'curl -L https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.deb.sh | bash'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'apt-get clean'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'echo "--- Starting GitLab CE Installation ---"'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'PUBLIC_IP=$(curl -s http://169.254.169.254/latest/meta-data/public-ipv4 || echo "127.0.0.1")'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string-2">`EXTERNAL_URL="http://$PUBLIC_IP" apt-get install -y gitlab-ce`</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'echo "--- Post-Install Configuration ---"'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'gitlab-ctl reconfigure'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  );</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">ubuntuAmi</span> <span class="cm-operator">=</span> <span class="cm-variable">ec2</span>.<span class="cm-property">MachineImage</span>.<span class="cm-property">lookup</span>({</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">name</span>: <span class="cm-string">'ubuntu/images/hvm-ssd/ubuntu-jammy-22.04-amd64-server-*'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">owners</span>: [<span class="cm-string">'099720109477'</span>],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  });</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">instance</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">ec2</span>.<span class="cm-property">Instance</span>(<span class="cm-keyword">this</span>, <span class="cm-string">'GitLabInstance'</span>, {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">vpc</span>: <span class="cm-variable-2">vpc</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">instanceType</span>: <span class="cm-variable">ec2</span>.<span class="cm-property">InstanceType</span>.<span class="cm-property">of</span>(<span class="cm-variable">ec2</span>.<span class="cm-property">InstanceClass</span>.<span class="cm-property">T3</span>, <span class="cm-variable">ec2</span>.<span class="cm-property">InstanceSize</span>.<span class="cm-property">LARGE</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">machineImage</span>: <span class="cm-variable-2">ubuntuAmi</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">securityGroup</span>: <span class="cm-variable-2">gitlabSecurityGroup</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">role</span>: <span class="cm-variable-2">instanceRole</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">vpcSubnets</span>: { <span class="cm-property">subnetType</span>: <span class="cm-variable">ec2</span>.<span class="cm-property">SubnetType</span>.<span class="cm-property">PUBLIC</span> },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">blockDevices</span>: [<span class="cm-variable-2">rootBlockDevice</span>, <span class="cm-variable-2">dataBlockDevice</span>],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">userData</span>: <span class="cm-variable-2">userData</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  });</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// --- Elastic IP --- START ADDITION ---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// Allocate an Elastic IP address</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">elasticIp</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">ec2</span>.<span class="cm-property">CfnEIP</span>(<span class="cm-keyword">this</span>, <span class="cm-string">'GitLabEIP'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// Associate the Elastic IP with the EC2 instance using AllocationId</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">new</span> <span class="cm-variable">ec2</span>.<span class="cm-property">CfnEIPAssociation</span>(<span class="cm-keyword">this</span>, <span class="cm-string">'GitLabEIPAssociation'</span>, {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-property">allocationId</span>: <span class="cm-variable-2">elasticIp</span>.<span class="cm-property">attrAllocationId</span>, <span class="cm-comment">// &lt;-- Use AllocationId attribute</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-property">instanceId</span>: <span class="cm-variable-2">instance</span>.<span class="cm-property">instanceId</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  });</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// --- Elastic IP --- END ADDITION ---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// --- Outputs ---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// Output the Elastic IP address instead of the dynamic public IP</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">new</span> <span class="cm-variable">cdk</span>.<span class="cm-property">CfnOutput</span>(<span class="cm-keyword">this</span>, <span class="cm-string">'GitLabInstancePublicIp'</span>, { <span class="cm-comment">// Keep the Output name the same for consistency</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">value</span>: <span class="cm-variable-2">elasticIp</span>.<span class="cm-property">ref</span>, <span class="cm-comment">// Output the EIP address</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">description</span>: <span class="cm-string">'Static Public IP (Elastic IP) of the GitLab EC2 instance'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  });</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">new</span> <span class="cm-variable">cdk</span>.<span class="cm-property">CfnOutput</span>(<span class="cm-keyword">this</span>, <span class="cm-string">'SsmCommand'</span>, {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">value</span>: <span class="cm-string-2">`aws ssm start-session --target ${</span><span class="cm-variable-2">instance</span>.<span class="cm-property">instanceId</span><span class="cm-string-2">}`</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">description</span>: <span class="cm-string">'Command to connect via SSM Session Manager'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  });</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 3423px;"></div><div class="CodeMirror-gutters" style="display: none; height: 3423px;"></div></div></div></pre><p><span>&quot;Okay, let&#39;s review the complete </span><code>GitLabServerStack</code><span> definition we just created:&quot; Maya summarized.</span></p><ol start='' ><li><p><strong><span>EC2 Instance:</span></strong><span> This is the core virtual server.</span></p><ul><li><p><strong><span>Operating System:</span></strong><span> We&#39;ll use </span><strong><span>Ubuntu 22.04 LTS</span></strong><span>, a Linux distribution well-supported by GitLab. The specific Amazon Machine Image (AMI) we choose must include the AWS SSM Agent for secure access.</span></p></li><li><p><strong><span>Instance Type:</span></strong><span> GitLab recommends specific minimum resources (CPU and RAM). We&#39;ll start with a </span><code>t3.large</code><span> instance type (2 vCPU / 8 GiB RAM).</span></p></li><li><p><strong><span>Root Volume:</span></strong><span> The primary disk for the operating system. We&#39;ll explicitly set this to </span><strong><span>50 GiB</span></strong><span> to ensure enough space for the OS, Docker images (used by the runner later), and temporary files from package installations.</span></p></li><li><p><strong><span>IAM Role/Instance Profile:</span></strong><span> The instance needs permissions to interact with AWS services, specifically SSM. We&#39;ll attach an IAM role with the </span><code>AmazonSSMManagedInstanceCore</code><span> policy.</span></p></li></ul></li><li><p><strong><span>EBS Volume (Data Volume):</span></strong><span> A separate, persistent </span><strong><span>100 GiB </span><code>gp3</code></strong><span> disk for GitLab&#39;s application data.</span></p><ul><li><p><strong><span>Persistence:</span></strong><span> Configured with </span><code>deleteOnTermination: false</code><span>.</span></p></li><li><p><strong><span>Encryption:</span></strong><span> Enabled.</span></p></li><li><p><strong><span>Mount Point:</span></strong><span> Formatted and mounted at </span><code>/var/opt/gitlab</code><span> by the User Data script.</span></p></li></ul></li><li><p><strong><span>Security Group:</span></strong><span> Firewall allowing inbound </span><strong><span>HTTP (80)</span></strong><span> and </span><strong><span>HTTPS (443)</span></strong><span> from anywhere (</span><code>0.0.0.0/0</code><span>). Allows all outbound traffic. </span><strong><span>No SSH port</span></strong><span> is opened.</span></p></li><li><p><strong><span>User Data Script:</span></strong><span> Automates instance setup on first boot:</span></p><ul><li><p><span>Formats (if needed) and mounts the data EBS volume at </span><code>/var/opt/gitlab</code><span>.</span></p></li><li><p><span>Installs dependencies (</span><code>curl</code><span>, </span><code>ca-certificates</code><span>, etc.) via </span><code>apt-get</code><span>.</span></p></li><li><p><span>Adds the GitLab CE package repository using </span><code>script.deb.sh</code><span>.</span></p></li><li><p><span>Cleans the </span><code>apt</code><span> cache (</span><code>apt-get clean</code><span>).</span></p></li><li><p><span>Installs </span><code>gitlab-ce</code><span> via </span><code>apt-get</code><span>, setting </span><code>EXTERNAL_URL</code><span> based on the instance&#39;s public IP.</span></p></li><li><p><span>Cleans the </span><code>apt</code><span> cache again.</span></p></li></ul></li><li><p><strong><span>IAM Role / Instance Profile:</span></strong><span> Grants EC2 permission to use SSM (</span><code>AmazonSSMManagedInstanceCore</code><span> policy).</span></p></li><li><p><strong><span>Elastic IP (EIP):</span></strong><span> A static public IPv4 address associated with the EC2 instance, ensuring the access IP remains constant.</span></p></li><li><p><strong><span>(Optional but Recommended for Production):</span></strong><span> DNS, HTTPS certificates, S3 backups.</span></p></li></ol><p><span>&quot;This completes the definition of the </span><code>GitLabServerStack</code><span>. The next step would be to instantiate this stack in our main application file (</span><code>bin/magicmail-infra.ts</code><span>) and then deploy it.&quot;</span></p><h3 id='instantiating-and-deploying-the-gitlab-stack'><span>Instantiating and Deploying the GitLab Stack</span></h3><p><span>&quot;Now that we have the </span><code>GitLabServerStack</code><span> class defined, we need to tell our CDK application to actually create an instance of it,&quot; Maya explained.</span></p><h4 id='updating-the-app-entrypoint'><span>Updating the App Entrypoint</span></h4><p><span>&quot;Open your main application entrypoint file, </span><code>bin/magicmail-infra.ts</code><span>. We need to import our new stack class and then create an instance of it, just like we did for the original </span><code>MagicmailInfraStack</code><span>.&quot;</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="typescript" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="typescript"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#!/usr/bin/env node</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-string">'source-map-support/register'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-keyword">*</span> <span class="cm-keyword">as</span> <span class="cm-def">cdk</span> <span class="cm-keyword">from</span> <span class="cm-string">'aws-cdk-lib'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> { <span class="cm-def">MagicmailInfraStack</span> } <span class="cm-keyword">from</span> <span class="cm-string">'../lib/magicmail-infra-stack'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> { <span class="cm-def">GitLabServerStack</span> } <span class="cm-keyword">from</span> <span class="cm-string">'../lib/gitlab-server-stack'</span>; <span class="cm-comment">// &lt;-- Import the new stack</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-def">app</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">cdk</span>.<span class="cm-property">App</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// Define the environment (account/region) - reuse for both stacks</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// Ensure these environment variables are set in your terminal or CI/CD environment</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// OR replace with explicit { account: 'YOUR_ACCOUNT_ID', region: 'YOUR_REGION' }</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-def">deploymentEnv</span> <span class="cm-operator">=</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-property">account</span>: <span class="cm-variable">process</span>.<span class="cm-property">env</span>.<span class="cm-property">CDK_DEFAULT_ACCOUNT</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-property">region</span>: <span class="cm-variable">process</span>.<span class="cm-property">env</span>.<span class="cm-property">CDK_DEFAULT_REGION</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">};</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// Instantiate the original MagicMail stack (from Book 1)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">new</span> <span class="cm-variable">MagicmailInfraStack</span>(<span class="cm-variable">app</span>, <span class="cm-string">'MagicmailInfraStack'</span>, {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-property">env</span>: <span class="cm-variable">deploymentEnv</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-property">description</span>: <span class="cm-string">'Stack for MagicMail core infrastructure (e.g., S3 bucket)'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">});</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// Instantiate the new GitLab Server stack</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">new</span> <span class="cm-variable">GitLabServerStack</span>(<span class="cm-variable">app</span>, <span class="cm-string">'GitLabServerStack'</span>, {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-property">env</span>: <span class="cm-variable">deploymentEnv</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-property">description</span>: <span class="cm-string">'Stack for deploying the self-hosted GitLab CE server'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">});</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// Optional: Add tags to all stacks within the app</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">cdk</span>.<span class="cm-property">Tags</span>.<span class="cm-property">of</span>(<span class="cm-variable">app</span>).<span class="cm-property">add</span>(<span class="cm-string">'Project'</span>, <span class="cm-string">'MagicMailBook'</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 693px;"></div><div class="CodeMirror-gutters" style="display: none; height: 693px;"></div></div></div></pre><p><span>&quot;See?&quot; Maya pointed out. &quot;We import </span><code>GitLabServerStack</code><span> and then create a new instance: </span><code>new GitLabServerStack(...)</code><span>. We give it a unique ID within the app (</span><code>&#39;GitLabServerStack&#39;</code><span>) and pass the same </span><code>deploymentEnv</code><span> so it deploys to the same AWS account and region as our other stack. We also added a description for clarity.&quot;</span></p><p><span>&quot;Regarding the </span><code>deploymentEnv</code><span> definition,&quot; Maya added, &quot;using </span><code>process.env.CDK_DEFAULT_ACCOUNT</code><span> and </span><code>REGION</code><span>, </span><strong><span>as we configured it in Book 1</span></strong><span>, is a flexible approach. It allows the CDK to automatically determine the target account and region based on your configured AWS profile (either the default one or a named profile set via the </span><code>AWS_PROFILE</code><span> environment variable, as we&#39;ll discuss next). This makes the code more portable than hardcoding account IDs or relying solely on </span><code>cdk.json</code><span> context, while ensuring the stacks are environment-aware, which unlocks certain CDK features.&quot;</span></p><p><span>&quot;Also notice the </span><code>cdk.Tags.of(app).add(...)</code><span> line,&quot; Maya continued. &quot;Tagging resources wasn&#39;t a focus in Book 1, but it&#39;s a critical best practice in AWS. Tags (key-value pairs) help immensely with organizing resources, tracking costs via AWS Cost Explorer, setting up automation, and even controlling access. Applying tags at the </span><code>App</code><span> level like this is convenient because CDK often propagates these tags automatically to the underlying resources created within the stacks.&quot;</span></p><h4 id='confirming-aws-access-and-profile-usage'><span>Confirming AWS Access and Profile Usage</span></h4><p><span>&quot;Before any deployment, it&#39;s crucial to confirm you&#39;re interacting with the correct AWS account, especially if you manage multiple accounts.&quot; Maya advised. &quot;We can use the AWS CLI for this, and it&#39;s also the perfect time to talk about </span><strong><span>AWS CLI Profiles</span></strong><span>.&quot;</span></p><p><span>&quot;If you only use one AWS account, running </span><code>aws configure</code><span> (as you did in Book 1) sets up your </span><code>default</code><span> profile. But if you work with multiple accounts (like a personal account and a work account, or different project accounts), using named profiles is essential.&quot;</span></p><p><span>&quot;Let&#39;s assume you have credentials (Access Key ID and Secret Access Key) for the specific AWS account you want to use for this book&#39;s exercises. We can create a dedicated profile for it, let&#39;s call it </span><code>magicmail-dev</code><span>:&quot;</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Run this command and follow the prompts</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">aws configure <span class="cm-attribute">--profile</span> magicmail-dev</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 42px;"></div><div class="CodeMirror-gutters" style="display: none; height: 42px;"></div></div></div></pre><p><span>&quot;It will ask for:</span></p><ul><li><p><strong><span>AWS Access Key ID:</span></strong><span> [Enter the key ID for your book project user]</span></p></li><li><p><strong><span>AWS Secret Access Key:</span></strong><span> [Enter the secret key for your book project user]</span></p></li><li><p><strong><span>Default region name:</span></strong><span> [Enter your desired region, e.g., </span><code>us-east-1</code><span>]</span></p></li><li><p><strong><span>Default output format:</span></strong><span> [Enter </span><code>json</code><span>]</span></p></li></ul><p><span>&quot;This saves the credentials and settings under the name </span><code>magicmail-dev</code><span> in your AWS configuration files (</span><code>~/.aws/credentials</code><span> and </span><code>~/.aws/config</code><span>). Now, you can explicitly tell AWS CLI commands </span><em><span>which</span></em><span> profile to use.&quot;</span></p><p><span>&quot;Let&#39;s verify the identity associated with our new profile:&quot;</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">aws sts get-caller-identity <span class="cm-attribute">--profile</span> magicmail-dev</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 21px;"></div><div class="CodeMirror-gutters" style="display: none; height: 21px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Output:</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"UserId"</span>: <span class="cm-string">"AIXXXXXXXXXX5X6XX3XXX"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"Account"</span>: <span class="cm-string">"012345678901"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"Arn"</span>: <span class="cm-string">"arn:aws:iam::012345678901:user/mm-dev"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 126px;"></div><div class="CodeMirror-gutters" style="display: none; height: 126px;"></div></div></div></pre><p><em><span>Caption: Verifying AWS identity using a specific profile.</span></em></p><p><span>&quot;Make sure the </span><code>Account</code><span> and </span><code>UserId</code><span> shown match the AWS account and IAM user you intend to deploy with. If you just have the one </span><code>default</code><span> profile configured, you can omit the </span><code>--profile</code><span> flag.&quot;</span></p><p><span>&quot;Now, how does CDK know which profile to use?&quot; Maya continued. &quot;The most common way is to set the </span><code>AWS_PROFILE</code><span> environment variable in your terminal </span><em><span>before</span></em><span> running CDK commands:&quot;</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># For Linux/macOS:</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">export</span> <span class="cm-def">AWS_PROFILE</span><span class="cm-operator">=</span>magicmail-dev</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># For Windows (Command Prompt):</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># set AWS_PROFILE=magicmail-dev</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># For Windows (PowerShell):</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># $env:AWS_PROFILE="magicmail-dev"</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 168px;"></div><div class="CodeMirror-gutters" style="display: none; height: 168px;"></div></div></div></pre><p><span>&quot;Set this environment variable in your current terminal session. Now, any subsequent AWS CLI or CDK commands in </span><em><span>this terminal session</span></em><span> will use the </span><code>magicmail-dev</code><span> profile credentials and settings.&quot;</span></p><h4 id='deploying-the-stack'><span>Deploying the Stack</span></h4><p><span>&quot;Alright, with the correct profile configured and exported, let&#39;s deploy </span><em><span>just</span></em><span> the new GitLab stack,&quot; Maya instructed.</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Ensure AWS_PROFILE is set if using a named profile</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Then run deploy:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">npx cdk deploy GitLabServerStack</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 63px;"></div><div class="CodeMirror-gutters" style="display: none; height: 63px;"></div></div></div></pre><p><span>&quot;CDK will now perform the following using the credentials from your selected profile:</span></p><ol start='' ><li><p><strong><span>Synthesize:</span></strong><span> Compile your TypeScript code and generate the CloudFormation template for </span><code>GitLabServerStack</code><span>.</span></p></li><li><p><strong><span>Diff (Optional):</span></strong><span> It might show you the resources that will be created (EC2 instance, IAM Role, Security Group, EBS Volume).</span></p></li><li><p><strong><span>Security Changes Prompt:</span></strong><span> Because we&#39;re creating an IAM Role (</span><code>GitLabInstanceRole</code><span>), CDK will likely pause and ask you to confirm that you want to deploy these security-related changes. Review the changes listed and type </span><code>y</code><span> to approve if they look correct.</span></p></li><li><p><strong><span>Deploy:</span></strong><span> CDK will use CloudFormation to create the resources defined in the stack.</span></p></li></ol><p><img src="images/book2-chap2-gitlabstack-deploy.png" referrerpolicy="no-referrer" alt="typora-book2-gitlabserverstack-deploy">
<em><span>Caption: Deploying the GitLabServerStack and confirming IAM changes.</span></em></p><p><span>&quot;</span><strong><span>Patience is key here!</span></strong><span>&quot; Maya emphasized. &quot;Creating the resources is relatively quick, but the User Data script that installs GitLab CE inside the EC2 instance can take a significant amount of time – easily </span><strong><span>10-20 minutes or even longer</span></strong><span>, depending on the instance type and current GitLab package size. The </span><code>cdk deploy</code><span> command will finish once the CloudFormation stack creation is complete, but GitLab itself might still be installing in the background on the instance.&quot;</span></p><p><span>&quot;Once the deployment command finishes successfully, it will display the </span><strong><span>Outputs</span></strong><span> we defined:&quot;</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Output:</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">GitLabServerStack.GitLabInstancePublicIp <span class="cm-operator">=</span> <span class="cm-number">12</span>.34.56.78</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">GitLabServerStack.SsmCommand <span class="cm-operator">=</span> aws ssm start-session <span class="cm-attribute">--target</span> i-0abcdef1234567890</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 84px;"></div><div class="CodeMirror-gutters" style="display: none; height: 84px;"></div></div></div></pre><p><span>&quot;Make a note of these outputs, especially the Public IP.&quot;</span></p><h3 id='initial-verification'><span>Initial Verification</span></h3><p><span>&quot;After </span><code>cdk deploy</code><span> finishes, wait patiently for about 15-20 minutes to give GitLab time to install and start,&quot; Maya advised.</span></p><ol start='' ><li><p><strong><span>Check CloudFormation:</span></strong><span> You can go to the AWS Management Console -&gt; CloudFormation and check that the </span><code>GitLabServerStack</code><span> status is </span><code>CREATE_COMPLETE</code><span>.</span></p></li><li><p><strong><span>Access GitLab Web UI:</span></strong><span> Open a web browser and navigate to </span><code>http://&lt;YOUR_INSTANCE_PUBLIC_IP&gt;</code><span> (using the IP address from the CDK output).</span></p></li><li><p><strong><span>First Login / Password Retrieval:</span></strong></p><ul><li><p><strong><span>Scenario A (Expected First Run):</span></strong><span> If this is the first successful boot with a clean data volume, you should be redirected to a page asking you to set the initial password for the administrator user (username </span><code>root</code><span>). Set a strong password and store it securely!</span></p></li><li><p><strong><span>Scenario B (Password Already Set):</span></strong><span> If you see the standard GitLab login page instead, it likely means GitLab&#39;s initial configuration completed on a previous boot using the persistent EBS volume. In this case, GitLab automatically generated an initial root password. To retrieve it:</span></p></li></ul></li></ol><p><img src="images/book2-chap2-gitlab-signin.png" referrerpolicy="no-referrer" alt="book2-chap2-gitlab-signin">
<em><span>Caption: GitLab login screen</span></em></p><ul><li><p><span>Connect to the instance using SSM Session Manager via the AWS CLI (using the </span><code>SsmCommand</code><span> output from </span><code>cdk deploy</code><span> and your configured AWS profile):</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Example: aws ssm start-session --target i-0abcdef1234567890 --profile magicmail-dev</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 42px;"></div><div class="CodeMirror-gutters" style="display: none; height: 42px;"></div></div></div></pre></li><li><p><span>Once connected to the instance&#39;s shell, view the temporary password file:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">sudo</span> <span class="cm-builtin">cat</span> /etc/gitlab/initial_root_password</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 21px;"></div><div class="CodeMirror-gutters" style="display: none; height: 21px;"></div></div></div></pre></li><li><p><span>Copy the displayed password (it might be long and complex). Note that this file may be automatically deleted after 24 hours.</span></p></li></ul><p><span>    </span><img src="images/book2-chap2-gitlab-rootpw.png" referrerpolicy="no-referrer" alt="book-2-gitlab-ce-retrieve-root-password">
<span>​      </span><em><span>Caption: Retrieving the initial root password via SSM Session Manager.</span></em></p><ol start='4' ><li><p><strong><span>Login:</span></strong></p><ul><li><p><span>Go back to the GitLab web UI.</span></p></li><li><p><span>Log in with username </span><code>root</code><span> and the password (either the one you set in Scenario A or the one you retrieved in Scenario B).</span></p></li><li><p><strong><span>Important:</span></strong><span> Once logged in for the first time, immediately go to your user settings (expand the sidebar menu on the left -&gt; Password) and change the root password to something secure that you will remember.</span></p></li></ul></li></ol><p><span>&quot;If you can successfully log in, congratulations! You&#39;ve successfully deployed and accessed your self-hosted GitLab CE instance using AWS CDK,&quot; Maya beamed. &quot;If the web UI doesn&#39;t load after 20-30 minutes, or if you encounter issues retrieving/using the initial password, use SSM Session Manager again to check the logs (</span><code>/var/log/cloud-init-output.log</code><span> or logs in </span><code>/var/log/gitlab/</code><span>) for errors.&quot;</span></p><h3 id='initial-gitlab-server-configuration'><span>Initial GitLab Server Configuration</span></h3><p><span>&quot;Now that you&#39;re logged into your self-hosted GitLab instance as the </span><code>root</code><span> user, there are a couple of important initial configuration steps we should take, especially for security,&quot; Maya advised.</span></p><ol start='' ><li><p><strong><span>Access Admin Area:</span></strong><span> Click the Wrench icon (Admin Area) in the top navigation bar. This area allows you to configure instance-wide settings.</span></p></li></ol><p><img src="images/book2-chap2-gitlab-admin-menu.png" referrerpolicy="no-referrer" alt="book-2-gitlab-ce-admin-menu">
<span>    </span><em><span>Caption: Admin Area with Wrench icon.</span></em></p><ol start='2' ><li><p><strong><span>Disable New Sign-ups:</span></strong><span> Since this is your private GitLab instance for the book exercises (and potentially small projects), you generally don&#39;t want random people signing up for accounts.</span></p><ul><li><p><span>In the Admin Area sidebar, navigate to </span><strong><span>Settings -&gt; General</span></strong><span>.</span></p></li><li><p><span>Expand the </span><strong><span>Sign-up restrictions</span></strong><span> section.</span></p></li><li><p><strong><span>Uncheck</span></strong><span> the box labeled </span><strong><span>Sign-up enabled</span></strong><span>.</span></p></li><li><p><span>Scroll down and click </span><strong><span>Save changes</span></strong><span>.</span></p></li></ul></li></ol><p><img src="images/book2-chap2-gitlab-disable-signup.png" referrerpolicy="no-referrer" alt="book-2-gitlab-ce-admin-signup-restriction"></p><p><em><span>Caption: Disabling new user sign-ups in GitLab Admin Area.</span></em></p><p><span>&quot;This ensures only you (as the root user) can create new accounts if needed later.&quot;</span></p><p><span>&quot;There are many other settings you </span><em><span>could</span></em><span> configure,&quot; Maya added, &quot;like setting up email notifications (which requires configuring SMTP settings), integrating external authentication, customizing appearance, etc. But for now, disabling sign-ups is the most critical one. We can explore other settings later if needed.&quot;</span></p><h3 id='connecting-your-local-repository-to-self-hosted-gitlab'><span>Connecting Your Local Repository to Self-Hosted GitLab</span></h3><p><span>&quot;Okay, Ethan, the moment we&#39;ve been building towards!&quot; Maya said enthusiastically. &quot;Let&#39;s connect the local </span><code>magicmail-infra</code><span> Git repository (the one we initialized and worked on in Chapter 1) to a new project on our self-hosted GitLab server.&quot;</span></p><h4 id='creating-a-project-in-gitlab'><span>Creating a Project in GitLab</span></h4><p><span>&quot;First, we need an empty project on the GitLab server to push our code into.&quot;</span></p><ol start='' ><li><p><strong><span>Navigate:</span></strong><span> In the GitLab UI (make sure you&#39;re logged in as </span><code>root</code><span>), click the &#39;+&#39; icon in the top navigation bar and select </span><strong><span>New project/repository</span></strong><span>.</span></p></li><li><p><strong><span>Create Blank Project:</span></strong><span> Choose the </span><strong><span>Create blank project</span></strong><span> option.</span></p></li><li><p><strong><span>Project Details:</span></strong></p><ul><li><p><strong><span>Project name:</span></strong><span> Enter </span><code>magicmail-infra</code><span>. GitLab will automatically suggest a &#39;Project slug&#39; (used in URLs) based on this, which is usually fine.</span></p></li><li><p><strong><span>Pick a group or namespace:</span></strong><span> Select &#39;root&#39;.</span></p></li><li><p><strong><span>Visibility Level:</span></strong><span> Keep it as </span><strong><span>Private</span></strong><span> for now. This means only you (and users you explicitly grant access to later) can see the project.</span></p></li><li><p><strong><span>Project Configuration:</span></strong><span> </span><strong><span>Uncheck</span></strong><span> the box for &quot;Initialize repository with a README&quot;. We want an empty project because we&#39;re going to push our </span><em><span>existing</span></em><span> repository history from Chapter 1.</span></p></li><li><p><span>Click </span><strong><span>Create project</span></strong><span>.</span></p></li></ul></li></ol><p><img src="images/book2-chap2-gitlab-new-project.png" referrerpolicy="no-referrer" alt="book-2-gitlab-ce-admin-create-project">
<em><span>Caption: Creating the empty &#39;magicmail-infra&#39; project on the self-hosted GitLab server.</span></em></p><p>&nbsp;</p><h4 id='adding-the-remote'><span>Adding the Remote</span></h4><p><span>&quot;GitLab will now show you the project page, which is currently empty,&quot; Maya explained. &quot;It usually provides instructions, including the repository URLs. We need the </span><strong><span>HTTPS</span></strong><span> URL.&quot;</span></p><ol start='' ><li><p><strong><span>Copy HTTPS URL:</span></strong><span> Find the HTTPS URL for your new project. It will look something like </span><code>http://&lt;YOUR_INSTANCE_PUBLIC_IP&gt;/root/magicmail-infra.git</code><span>. Copy this URL.</span></p></li></ol><p><img src="images/book2-chap2-gitlab-clone-url.png" referrerpolicy="no-referrer" alt="book-2-gitlab-ce-admin-clone-link">
<span>    </span><em><span>Caption: Copying the HTTPS repository URL from the GitLab project page.</span></em></p><ol start='2' ><li><p><strong><span>Open Terminal:</span></strong><span> Go back to your local terminal window. Make sure you are inside your local </span><code>magicmail-infra</code><span> project directory (the one containing your </span><code>.git</code><span> folder from Chapter 1).</span></p></li><li><p><strong><span>Add Remote:</span></strong><span> Use the </span><code>git remote add</code><span> command to link your local repository to the remote GitLab server. We&#39;ll name the remote </span><code>origin</code><span> (the standard convention for the primary remote). Replace </span><code>&lt;YOUR_GITLAB_HTTPS_URL&gt;</code><span> with the URL you just copied.</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Example: git remote add origin [http://12.34.56.78/root/magicmail-infra.git](http://12.34.56.78/root/magicmail-infra.git)</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">git</span> remote add origin &lt;YOUR_GITLAB_HTTPS_URL&gt;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 63px;"></div><div class="CodeMirror-gutters" style="display: none; height: 63px;"></div></div></div></pre></li><li><p><strong><span>Verify Remote:</span></strong><span> Check that the remote was added correctly:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">git</span> remote <span class="cm-attribute">-v</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 21px;"></div><div class="CodeMirror-gutters" style="display: none; height: 21px;"></div></div></div></pre><p><span>This should show </span><code>origin</code><span> listed with the correct fetch and push URLs.</span></p></li></ol><h2 id='finalizing-chapter-1-repository-setup'><span>Finalizing Chapter 1 Repository Setup</span></h2><h3 id='pushing-your-code'><span>Pushing Your Code</span></h3><p><span>&quot;Now that the remote is configured, let&#39;s push our existing local history (the </span><code>main</code><span> branch and the </span><code>chapter-1-end</code><span> tag) to GitLab,&quot; Maya instructed.</span></p><ol start='' ><li><p><strong><span>Push Main Branch:</span></strong><span> Use the </span><code>git push -u origin main</code><span> command we discussed earlier. The </span><code>-u</code><span> sets the upstream tracking link.</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">git</span> push <span class="cm-attribute">-u</span> origin main</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 21px;"></div><div class="CodeMirror-gutters" style="display: none; height: 21px;"></div></div></div></pre><ul><li><p><strong><span>Authentication:</span></strong><span> Since you are pushing to your own server over HTTP (not HTTPS with a trusted certificate yet), Git might prompt you for a username and password. Use </span><code>root</code><span> for the username and the password you set for the </span><code>root</code><span> user in GitLab. </span><em><span>(Note: For more secure and convenient authentication later, setting up SSH keys or personal access tokens is recommended, but username/password works for now).</span></em></p></li></ul></li><li><p><strong><span>Push Tag:</span></strong><span> Push the tag you created at the end of Chapter 1:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">git</span> push origin chapter-1-end</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 21px;"></div><div class="CodeMirror-gutters" style="display: none; height: 21px;"></div></div></div></pre></li></ol><p>&nbsp;</p><h3 id='verify-push-in-gitlab'><span>Verify Push in GitLab</span></h3><p><span>&quot;Finally, go back to your web browser and refresh the </span><code>magicmail-infra</code><span> project page on your GitLab server,&quot; Maya said. &quot;The &#39;empty project&#39; message should be gone, replaced by your code files, commit history, and the </span><code>chapter-1-end</code><span> tag should be visible under Repository -&gt; Tags!&quot;</span></p><p><img src="images/book2-chap2-gitlab-initial-push.png" referrerpolicy="no-referrer" alt="book-2-gitlab-ce-admin-push-result">
<em><span>Caption: Verifying the code has been successfully pushed to the GitLab project.</span></em></p><p><span>&quot;Success! Your local Git repository is now backed up and connected to your self-hosted GitLab server. This completes the setup phase. In the next chapter, we&#39;ll start using GitLab for actual collaboration workflows, like creating issues and merge requests.&quot;</span></p><h2 id='tagging-the-end-of-chapter-2'><span>Tagging the End of Chapter 2</span></h2><p><span>&quot;Before we wrap up, let&#39;s commit the changes we made in Chapter 2, and tag the current state of our main branch to </span><code>mark</code><span> the end of Chapter 2,&quot; said Maya. </span></p><ol start='' ><li><p><strong><span>Ensure main is Up-to-Date:</span></strong><span> Make sure you are on the main branch locally and commit and push all the changes we made in this chapter:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">git</span> switch main</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">git</span> add .</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">git</span> commit <span class="cm-attribute">-m</span> <span class="cm-string">"feat: Add GitLab server deployment stack (End of Chapter 2)"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">git</span> push origin main</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 105px;"></div><div class="CodeMirror-gutters" style="display: none; height: 105px;"></div></div></div></pre></li><li><p><strong><span>Create Local Tag:</span></strong><span> Create the tag pointing to the latest commit on </span><code>main</code><span>:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">git</span> tag chapter-2-end</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 21px;"></div><div class="CodeMirror-gutters" style="display: none; height: 21px;"></div></div></div></pre></li><li><p><strong><span>Push Tag:</span></strong><span> Push this new tag to the remote GitLab server (</span><code>origin</code><span>):</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">git</span> push origin chapter-2-end</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 21px;"></div><div class="CodeMirror-gutters" style="display: none; height: 21px;"></div></div></div></pre></li></ol><h2 id='wrapping-up-chapter-2'><span>Wrapping Up Chapter 2</span></h2><p><span>&quot;Big milestone today, Ethan,&quot; Maya said. &quot;You didn&#39;t just learn GitLab — you deployed your own GitLab server with CDK and AWS. That’s real-world infrastructure in action.&quot;</span></p><p><span>&quot;Now your code isn&#39;t just stored locally; it&#39;s backed up remotely, ready for collaboration, and managed with professional-grade tooling.&quot;</span></p><p><span>Maya nodded thoughtfully. &quot;With GitLab in place, you&#39;re set up for more than just version control. You&#39;re ready for collaboration, automation, and scaling your project properly.&quot;</span></p><p><span>&quot;In the next chapter, we&#39;ll start managing your infrastructure code inside GitLab — learning how issues, branches, and merge requests create a professional development workflow.&quot;</span></p><hr /><h2 id='ethans-homework'><span>Ethan&#39;s Homework</span></h2><p><span>&quot;To get more comfortable with your new GitLab server and reinforce the connection:&quot; Maya suggested.</span></p><blockquote><ol start='' ><li><p><strong><span>Explore Admin:</span></strong><span> Log in as </span><code>root</code><span> and briefly explore the different sections within the Admin Area (wrench icon). Don&#39;t change any settings other than the sign-up restriction we already disabled, just get a feel for what&#39;s available.</span></p></li><li><p><strong><span>Create Test Project:</span></strong><span> Create another new </span><em><span>blank</span></em><span> project in GitLab named </span><code>my-test-project</code><span>. Make it private.</span></p></li><li><p><strong><span>Clone Test Project:</span></strong><span> On your local machine (outside your </span><code>magicmail-infra</code><span> directory), use </span><code>git clone</code><span> with the HTTPS URL of </span><code>my-test-project</code><span> to clone the empty project. You&#39;ll likely be prompted for your </span><code>root</code><span> username and password again.</span></p></li><li><p><strong><span>Add &amp; Push File:</span></strong><span> </span><code>cd</code><span> into the new </span><code>my-test-project</code><span> directory locally. Create a simple text file (e.g., </span><code>echo &quot;Hello GitLab&quot; &gt; test.txt</code><span>). Use </span><code>git add .</code><span>, </span><code>git commit -m &quot;Add test file&quot;</code><span>, and </span><code>git push origin main</code><span> to push the file to your GitLab server. Verify it appears in the </span><code>my-test-project</code><span> UI.</span></p></li><li><p><strong><span>(Optional) SSM Connect:</span></strong><span> Practice connecting to your GitLab EC2 instance using the </span><code>SsmCommand</code><span> output from </span><code>cdk deploy</code><span>. Once connected, run </span><code>sudo gitlab-ctl status</code><span> just to see the output confirming services are running. Type </span><code>exit</code><span> to disconnect.</span></p></li></ol></blockquote><h2 id='key-takeaways'><span>Key Takeaways</span></h2><blockquote><ul><li><p><span>GitLab is an integrated DevOps platform offering SCM, CI/CD, issue tracking, and more.</span></p></li><li><p><span>GitLab can be used via the SaaS offering (GitLab.com) or self-hosted (CE/EE).</span></p></li><li><p><span>AWS CDK can be used to provision the infrastructure (EC2, EBS, SG, IAM Role) for a self-hosted GitLab CE instance.</span></p></li><li><p><span>Using SSM Session Manager provides secure shell access to EC2 instances without opening SSH ports, relying on IAM permissions instead.</span></p></li><li><p><span>Persistent data for stateful applications on EC2 requires EBS volumes configured with </span><code>deleteOnTermination: false</code><span>.</span></p></li><li><p><span>EC2 User Data scripts automate instance bootstrapping tasks like package installation (using </span><code>apt-get</code><span> for Ubuntu).</span></p></li><li><p><span>AWS CLI profiles help manage credentials for multiple AWS accounts. Setting the </span><code>AWS_PROFILE</code><span> environment variable directs CDK and AWS CLI commands.</span></p></li><li><p><span>Tagging AWS resources (</span><code>cdk.Tags.of(app).add(...)</code><span>) is crucial for cost tracking, organization, and automation.</span></p></li><li><p><span>Local Git repositories are connected to remotes using </span><code>git remote add &lt;name&gt; &lt;url&gt;</code><span>.</span></p></li><li><p><span>Code and tags are sent to remotes using </span><code>git push &lt;remote-name&gt; &lt;branch-name&gt;</code><span> and </span><code>git push &lt;remote-name&gt; &lt;tag-name&gt;</code><span>.</span></p></li></ul></blockquote><h2 id='looking-ahead'><span>Looking Ahead</span></h2><p><span>With Git fundamentals covered and a GitLab instance (self-hosted or GitLab.com) set up and connected, Chapter 3 will focus on leveraging GitLab for effective collaboration on our </span><code>magicmail-infra</code><span> CDK project. Ethan and Maya will explore creating issues to track work, using feature branches for development, and managing code reviews through GitLab&#39;s Merge Request workflow.</span></p><h2 id='key-services--concepts-introduced'><span>Key Services &amp; Concepts Introduced</span></h2><h3 id='aws-services'><span>AWS Services:</span></h3><blockquote><ul><li><p><strong><span>AWS EC2 (Elastic Compute Cloud):</span></strong><span> Used to provision the virtual server hosting GitLab CE.</span></p></li><li><p><strong><span>AWS EBS (Elastic Block Store):</span></strong><span> Used to provide persistent block storage for GitLab data.</span></p></li><li><p><strong><span>AWS IAM (Identity and Access Management):</span></strong><span> Used to create a Role (</span><code>GitLabInstanceRole</code><span>) and attach a Managed Policy (</span><code>AmazonSSMManagedInstanceCore</code><span>) granting permissions for SSM Session Manager.</span></p></li><li><p><strong><span>AWS Systems Manager (SSM) Session Manager:</span></strong><span> Used as the secure method for accessing the EC2 instance shell, replacing the need for SSH.</span></p></li></ul></blockquote><h3 id='other-concepts--tools'><span>Other Concepts &amp; Tools:</span></h3><blockquote><ul><li><p><strong><span>GitLab:</span></strong><span> Introduced as an integrated DevOps platform (SCM, CI/CD, etc.). Compared GitLab.com (SaaS) vs. Self-Hosted CE. Performed basic server configuration.</span></p></li><li><p><strong><span>Self-Hosting Applications:</span></strong><span> Used GitLab CE as an example of deploying a stateful application on EC2 infrastructure provisioned via CDK.</span></p></li><li><p><strong><span>AWS CLI Profiles:</span></strong><span> Explained the use of named profiles for managing credentials for different AWS accounts/roles.</span></p></li><li><p><strong><span>Resource Tagging:</span></strong><span> Introduced the concept and benefits of tagging AWS resources using CDK.</span></p></li></ul></blockquote></div></div>
</body>
</html>